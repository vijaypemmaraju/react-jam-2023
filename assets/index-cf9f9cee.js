var a2=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var v4=a2((w4,pf)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}})();var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Cb(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),i}var Pb={exports:{}},ff={},Ab={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),l2=Symbol.for("react.portal"),u2=Symbol.for("react.fragment"),h2=Symbol.for("react.strict_mode"),c2=Symbol.for("react.profiler"),d2=Symbol.for("react.provider"),f2=Symbol.for("react.context"),p2=Symbol.for("react.forward_ref"),m2=Symbol.for("react.suspense"),g2=Symbol.for("react.memo"),y2=Symbol.for("react.lazy"),T1=Symbol.iterator;function v2(e){return e===null||typeof e!="object"?null:(e=T1&&e[T1]||e["@@iterator"],typeof e=="function"?e:null)}var Ib={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rb=Object.assign,Mb={};function Qa(e,t,i){this.props=e,this.context=t,this.refs=Mb,this.updater=i||Ib}Qa.prototype.isReactComponent={};Qa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kb(){}kb.prototype=Qa.prototype;function yv(e,t,i){this.props=e,this.context=t,this.refs=Mb,this.updater=i||Ib}var vv=yv.prototype=new kb;vv.constructor=yv;Rb(vv,Qa.prototype);vv.isPureReactComponent=!0;var C1=Array.isArray,Db=Object.prototype.hasOwnProperty,_v={current:null},Ob={key:!0,ref:!0,__self:!0,__source:!0};function Nb(e,t,i){var r,n={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Db.call(t,r)&&!Ob.hasOwnProperty(r)&&(n[r]=t[r]);var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];n.children=h}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)n[r]===void 0&&(n[r]=l[r]);return{$$typeof:Qu,type:e,key:s,ref:o,props:n,_owner:_v.current}}function _2(e,t){return{$$typeof:Qu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qu}function x2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var P1=/\/+/g;function mm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?x2(""+e.key):t.toString(36)}function Qc(e,t,i,r,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qu:case l2:o=!0}}if(o)return o=e,n=n(o),e=r===""?"."+mm(o,0):r,C1(n)?(i="",e!=null&&(i=e.replace(P1,"$&/")+"/"),Qc(n,t,i,"",function(c){return c})):n!=null&&(xv(n)&&(n=_2(n,i+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(P1,"$&/")+"/")+e)),t.push(n)),1;if(o=0,r=r===""?".":r+":",C1(e))for(var l=0;l<e.length;l++){s=e[l];var h=r+mm(s,l);o+=Qc(s,t,i,h,n)}else if(h=v2(e),typeof h=="function")for(e=h.call(e),l=0;!(s=e.next()).done;)s=s.value,h=r+mm(s,l++),o+=Qc(s,t,i,h,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sc(e,t,i){if(e==null)return e;var r=[],n=0;return Qc(e,r,"","",function(s){return t.call(i,s,n++)}),r}function w2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ai={current:null},Kc={transition:null},S2={ReactCurrentDispatcher:ai,ReactCurrentBatchConfig:Kc,ReactCurrentOwner:_v};Pt.Children={map:sc,forEach:function(e,t,i){sc(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return sc(e,function(){t++}),t},toArray:function(e){return sc(e,function(t){return t})||[]},only:function(e){if(!xv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pt.Component=Qa;Pt.Fragment=u2;Pt.Profiler=c2;Pt.PureComponent=yv;Pt.StrictMode=h2;Pt.Suspense=m2;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S2;Pt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Rb({},e.props),n=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=_v.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(h in t)Db.call(t,h)&&!Ob.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&l!==void 0?l[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=i;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Qu,type:e.type,key:n,ref:s,props:r,_owner:o}};Pt.createContext=function(e){return e={$$typeof:f2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:d2,_context:e},e.Consumer=e};Pt.createElement=Nb;Pt.createFactory=function(e){var t=Nb.bind(null,e);return t.type=e,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(e){return{$$typeof:p2,render:e}};Pt.isValidElement=xv;Pt.lazy=function(e){return{$$typeof:y2,_payload:{_status:-1,_result:e},_init:w2}};Pt.memo=function(e,t){return{$$typeof:g2,type:e,compare:t===void 0?null:t}};Pt.startTransition=function(e){var t=Kc.transition;Kc.transition={};try{e()}finally{Kc.transition=t}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(e,t){return ai.current.useCallback(e,t)};Pt.useContext=function(e){return ai.current.useContext(e)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(e){return ai.current.useDeferredValue(e)};Pt.useEffect=function(e,t){return ai.current.useEffect(e,t)};Pt.useId=function(){return ai.current.useId()};Pt.useImperativeHandle=function(e,t,i){return ai.current.useImperativeHandle(e,t,i)};Pt.useInsertionEffect=function(e,t){return ai.current.useInsertionEffect(e,t)};Pt.useLayoutEffect=function(e,t){return ai.current.useLayoutEffect(e,t)};Pt.useMemo=function(e,t){return ai.current.useMemo(e,t)};Pt.useReducer=function(e,t,i){return ai.current.useReducer(e,t,i)};Pt.useRef=function(e){return ai.current.useRef(e)};Pt.useState=function(e){return ai.current.useState(e)};Pt.useSyncExternalStore=function(e,t,i){return ai.current.useSyncExternalStore(e,t,i)};Pt.useTransition=function(){return ai.current.useTransition()};Pt.version="18.2.0";Ab.exports=Pt;var ne=Ab.exports;const kn=qu(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2=ne,E2=Symbol.for("react.element"),T2=Symbol.for("react.fragment"),C2=Object.prototype.hasOwnProperty,P2=b2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A2={key:!0,ref:!0,__self:!0,__source:!0};function Fb(e,t,i){var r,n={},s=null,o=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)C2.call(t,r)&&!A2.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:E2,type:e,key:s,ref:o,props:n,_owner:P2.current}}ff.Fragment=T2;ff.jsx=Fb;ff.jsxs=Fb;Pb.exports=ff;var Ge=Pb.exports,pf={exports:{}},As=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(As||{}),wv=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(wv||{}),gd=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(gd||{}),ft=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(ft||{}),Ji=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(Ji||{}),J=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(J||{}),lo=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(lo||{}),yt=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(yt||{}),yd=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(yd||{}),nn=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(nn||{}),an=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(an||{}),Nr=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(Nr||{}),ar=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(ar||{}),br=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(br||{}),mf=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(mf||{}),Pi=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(Pi||{}),_e=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(_e||{}),Lb=(e=>(e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e))(Lb||{}),me=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(me||{}),Rr=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(Rr||{});const Bb={createCanvas:(e,t)=>{const i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},nt={ADAPTER:Bb,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var gm=/iPhone/i,A1=/iPod/i,I1=/iPad/i,R1=/\biOS-universal(?:.+)Mac\b/i,ym=/\bAndroid(?:.+)Mobile\b/i,M1=/Android/i,Vo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,oc=/Silk/i,xn=/Windows Phone/i,k1=/\bWindows(?:.+)ARM\b/i,D1=/BlackBerry/i,O1=/BB10/i,N1=/Opera Mini/i,F1=/\b(CriOS|Chrome)(?:.+)Mobile/i,L1=/Mobile(?:.+)Firefox\b/i,B1=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function I2(e){return function(t){return t.test(e)}}function U1(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var i=t.userAgent,r=i.split("[FBAN");typeof r[1]<"u"&&(i=r[0]),r=i.split("Twitter"),typeof r[1]<"u"&&(i=r[0]);var n=I2(i),s={apple:{phone:n(gm)&&!n(xn),ipod:n(A1),tablet:!n(gm)&&(n(I1)||B1(t))&&!n(xn),universal:n(R1),device:(n(gm)||n(A1)||n(I1)||n(R1)||B1(t))&&!n(xn)},amazon:{phone:n(Vo),tablet:!n(Vo)&&n(oc),device:n(Vo)||n(oc)},android:{phone:!n(xn)&&n(Vo)||!n(xn)&&n(ym),tablet:!n(xn)&&!n(Vo)&&!n(ym)&&(n(oc)||n(M1)),device:!n(xn)&&(n(Vo)||n(oc)||n(ym)||n(M1))||n(/\bokhttp\b/i)},windows:{phone:n(xn),tablet:n(k1),device:n(xn)||n(k1)},other:{blackberry:n(D1),blackberry10:n(O1),opera:n(N1),firefox:n(L1),chrome:n(F1),device:n(D1)||n(O1)||n(N1)||n(L1)||n(F1)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const R2=U1.default??U1,Cr=R2(globalThis.navigator);nt.RETINA_PREFIX=/@([0-9\.]+)x/;nt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ub={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function n(h,c,f){this.fn=h,this.context=c,this.once=f||!1}function s(h,c,f,m,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new n(f,m||h,p),_=i?i+c:c;return h._events[_]?h._events[_].fn?h._events[_]=[h._events[_],v]:h._events[_].push(v):(h._events[_]=v,h._eventsCount++),h}function o(h,c){--h._eventsCount===0?h._events=new r:delete h._events[c]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],f,m;if(this._eventsCount===0)return c;for(m in f=this._events)t.call(f,m)&&c.push(i?m.slice(1):m);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},l.prototype.listeners=function(c){var f=i?i+c:c,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,v=m.length,_=new Array(v);p<v;p++)_[p]=m[p].fn;return _},l.prototype.listenerCount=function(c){var f=i?i+c:c,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(c,f,m,p,v,_){var E=i?i+c:c;if(!this._events[E])return!1;var T=this._events[E],b=arguments.length,S,w;if(T.fn){switch(T.once&&this.removeListener(c,T.fn,void 0,!0),b){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,m),!0;case 4:return T.fn.call(T.context,f,m,p),!0;case 5:return T.fn.call(T.context,f,m,p,v),!0;case 6:return T.fn.call(T.context,f,m,p,v,_),!0}for(w=1,S=new Array(b-1);w<b;w++)S[w-1]=arguments[w];T.fn.apply(T.context,S)}else{var P=T.length,I;for(w=0;w<P;w++)switch(T[w].once&&this.removeListener(c,T[w].fn,void 0,!0),b){case 1:T[w].fn.call(T[w].context);break;case 2:T[w].fn.call(T[w].context,f);break;case 3:T[w].fn.call(T[w].context,f,m);break;case 4:T[w].fn.call(T[w].context,f,m,p);break;default:if(!S)for(I=1,S=new Array(b-1);I<b;I++)S[I-1]=arguments[I];T[w].fn.apply(T[w].context,S)}}return!0},l.prototype.on=function(c,f,m){return s(this,c,f,m,!1)},l.prototype.once=function(c,f,m){return s(this,c,f,m,!0)},l.prototype.removeListener=function(c,f,m,p){var v=i?i+c:c;if(!this._events[v])return this;if(!f)return o(this,v),this;var _=this._events[v];if(_.fn)_.fn===f&&(!p||_.once)&&(!m||_.context===m)&&o(this,v);else{for(var E=0,T=[],b=_.length;E<b;E++)(_[E].fn!==f||p&&!_[E].once||m&&_[E].context!==m)&&T.push(_[E]);T.length?this._events[v]=T.length===1?T[0]:T:o(this,v)}return this},l.prototype.removeAllListeners=function(c){var f;return c?(f=i?i+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l})(Ub);var M2=Ub.exports;const Ur=qu(M2);var Sv={exports:{}};Sv.exports=gf;Sv.exports.default=gf;function gf(e,t,i){i=i||2;var r=t&&t.length,n=r?t[0]*i:e.length,s=zb(e,0,n,i,!0),o=[];if(!s||s.next===s.prev)return o;var l,h,c,f,m,p,v;if(r&&(s=F2(e,t,s,i)),e.length>80*i){l=c=e[0],h=f=e[1];for(var _=i;_<n;_+=i)m=e[_],p=e[_+1],m<l&&(l=m),p<h&&(h=p),m>c&&(c=m),p>f&&(f=p);v=Math.max(c-l,f-h),v=v!==0?32767/v:0}return du(s,o,i,l,h,v,0),o}function zb(e,t,i,r,n){var s,o;if(n===Dg(e,t,i,r)>0)for(s=t;s<i;s+=r)o=z1(s,e[s],e[s+1],o);else for(s=i-r;s>=t;s-=r)o=z1(s,e[s],e[s+1],o);return o&&yf(o,o.next)&&(pu(o),o=o.next),o}function yo(e,t){if(!e)return e;t||(t=e);var i=e,r;do if(r=!1,!i.steiner&&(yf(i,i.next)||se(i.prev,i,i.next)===0)){if(pu(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function du(e,t,i,r,n,s,o){if(e){!o&&s&&H2(e,r,n,s);for(var l=e,h,c;e.prev!==e.next;){if(h=e.prev,c=e.next,s?D2(e,r,n,s):k2(e)){t.push(h.i/i|0),t.push(e.i/i|0),t.push(c.i/i|0),pu(e),e=c.next,l=c.next;continue}if(e=c,e===l){o?o===1?(e=O2(yo(e),t,i),du(e,t,i,r,n,s,2)):o===2&&N2(e,t,i,r,n,s):du(yo(e),t,i,r,n,s,1);break}}}}function k2(e){var t=e.prev,i=e,r=e.next;if(se(t,i,r)>=0)return!1;for(var n=t.x,s=i.x,o=r.x,l=t.y,h=i.y,c=r.y,f=n<s?n<o?n:o:s<o?s:o,m=l<h?l<c?l:c:h<c?h:c,p=n>s?n>o?n:o:s>o?s:o,v=l>h?l>c?l:c:h>c?h:c,_=r.next;_!==t;){if(_.x>=f&&_.x<=p&&_.y>=m&&_.y<=v&&aa(n,l,s,h,o,c,_.x,_.y)&&se(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function D2(e,t,i,r){var n=e.prev,s=e,o=e.next;if(se(n,s,o)>=0)return!1;for(var l=n.x,h=s.x,c=o.x,f=n.y,m=s.y,p=o.y,v=l<h?l<c?l:c:h<c?h:c,_=f<m?f<p?f:p:m<p?m:p,E=l>h?l>c?l:c:h>c?h:c,T=f>m?f>p?f:p:m>p?m:p,b=Mg(v,_,t,i,r),S=Mg(E,T,t,i,r),w=e.prevZ,P=e.nextZ;w&&w.z>=b&&P&&P.z<=S;){if(w.x>=v&&w.x<=E&&w.y>=_&&w.y<=T&&w!==n&&w!==o&&aa(l,f,h,m,c,p,w.x,w.y)&&se(w.prev,w,w.next)>=0||(w=w.prevZ,P.x>=v&&P.x<=E&&P.y>=_&&P.y<=T&&P!==n&&P!==o&&aa(l,f,h,m,c,p,P.x,P.y)&&se(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;w&&w.z>=b;){if(w.x>=v&&w.x<=E&&w.y>=_&&w.y<=T&&w!==n&&w!==o&&aa(l,f,h,m,c,p,w.x,w.y)&&se(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;P&&P.z<=S;){if(P.x>=v&&P.x<=E&&P.y>=_&&P.y<=T&&P!==n&&P!==o&&aa(l,f,h,m,c,p,P.x,P.y)&&se(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function O2(e,t,i){var r=e;do{var n=r.prev,s=r.next.next;!yf(n,s)&&Hb(n,r,r.next,s)&&fu(n,s)&&fu(s,n)&&(t.push(n.i/i|0),t.push(r.i/i|0),t.push(s.i/i|0),pu(r),pu(r.next),r=e=s),r=r.next}while(r!==e);return yo(r)}function N2(e,t,i,r,n,s){var o=e;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&$2(o,l)){var h=Gb(o,l);o=yo(o,o.next),h=yo(h,h.next),du(o,t,i,r,n,s,0),du(h,t,i,r,n,s,0);return}l=l.next}o=o.next}while(o!==e)}function F2(e,t,i,r){var n=[],s,o,l,h,c;for(s=0,o=t.length;s<o;s++)l=t[s]*r,h=s<o-1?t[s+1]*r:e.length,c=zb(e,l,h,r,!1),c===c.next&&(c.steiner=!0),n.push(W2(c));for(n.sort(L2),s=0;s<n.length;s++)i=B2(n[s],i);return i}function L2(e,t){return e.x-t.x}function B2(e,t){var i=U2(e,t);if(!i)return t;var r=Gb(i,e);return yo(r,r.next),yo(i,i.next)}function U2(e,t){var i=t,r=e.x,n=e.y,s=-1/0,o;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var l=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=r&&l>s&&(s=l,o=i.x<i.next.x?i:i.next,l===r))return o}i=i.next}while(i!==t);if(!o)return null;var h=o,c=o.x,f=o.y,m=1/0,p;i=o;do r>=i.x&&i.x>=c&&r!==i.x&&aa(n<f?r:s,n,c,f,n<f?s:r,n,i.x,i.y)&&(p=Math.abs(n-i.y)/(r-i.x),fu(i,e)&&(p<m||p===m&&(i.x>o.x||i.x===o.x&&z2(o,i)))&&(o=i,m=p)),i=i.next;while(i!==h);return o}function z2(e,t){return se(e.prev,e,t.prev)<0&&se(t.next,e,e.next)<0}function H2(e,t,i,r){var n=e;do n.z===0&&(n.z=Mg(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,G2(n)}function G2(e){var t,i,r,n,s,o,l,h,c=1;do{for(i=e,e=null,s=null,o=0;i;){for(o++,r=i,l=0,t=0;t<c&&(l++,r=r.nextZ,!!r);t++);for(h=c;l>0||h>0&&r;)l!==0&&(h===0||!r||i.z<=r.z)?(n=i,i=i.nextZ,l--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;i=r}s.nextZ=null,c*=2}while(o>1);return e}function Mg(e,t,i,r,n){return e=(e-i)*n|0,t=(t-r)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function W2(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function aa(e,t,i,r,n,s,o,l){return(n-o)*(t-l)>=(e-o)*(s-l)&&(e-o)*(r-l)>=(i-o)*(t-l)&&(i-o)*(s-l)>=(n-o)*(r-l)}function $2(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!j2(e,t)&&(fu(e,t)&&fu(t,e)&&V2(e,t)&&(se(e.prev,e,t.prev)||se(e,t.prev,t))||yf(e,t)&&se(e.prev,e,e.next)>0&&se(t.prev,t,t.next)>0)}function se(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function yf(e,t){return e.x===t.x&&e.y===t.y}function Hb(e,t,i,r){var n=lc(se(e,t,i)),s=lc(se(e,t,r)),o=lc(se(i,r,e)),l=lc(se(i,r,t));return!!(n!==s&&o!==l||n===0&&ac(e,i,t)||s===0&&ac(e,r,t)||o===0&&ac(i,e,r)||l===0&&ac(i,t,r))}function ac(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function lc(e){return e>0?1:e<0?-1:0}function j2(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Hb(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function fu(e,t){return se(e.prev,e,e.next)<0?se(e,t,e.next)>=0&&se(e,e.prev,t)>=0:se(e,t,e.prev)<0||se(e,e.next,t)<0}function V2(e,t){var i=e,r=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function Gb(e,t){var i=new kg(e.i,e.x,e.y),r=new kg(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function z1(e,t,i,r){var n=new kg(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function pu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function kg(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}gf.deviation=function(e,t,i,r){var n=t&&t.length,s=n?t[0]*i:e.length,o=Math.abs(Dg(e,0,s,i));if(n)for(var l=0,h=t.length;l<h;l++){var c=t[l]*i,f=l<h-1?t[l+1]*i:e.length;o-=Math.abs(Dg(e,c,f,i))}var m=0;for(l=0;l<r.length;l+=3){var p=r[l]*i,v=r[l+1]*i,_=r[l+2]*i;m+=Math.abs((e[p]-e[_])*(e[v+1]-e[p+1])-(e[p]-e[v])*(e[_+1]-e[p+1]))}return o===0&&m===0?0:Math.abs((m-o)/o)};function Dg(e,t,i,r){for(var n=0,s=t,o=i-r;s<i;s+=r)n+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return n}gf.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var s=0;s<e[n].length;s++)for(var o=0;o<t;o++)i.vertices.push(e[n][s][o]);n>0&&(r+=e[n-1].length,i.holes.push(r))}return i};var X2=Sv.exports;const Wb=qu(X2);var vd={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */vd.exports;(function(e,t){(function(i){var r=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,s=typeof pm=="object"&&pm;(s.global===s||s.window===s||s.self===s)&&(i=s);var o,l=2147483647,h=36,c=1,f=26,m=38,p=700,v=72,_=128,E="-",T=/^xn--/,b=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=h-c,I=Math.floor,F=String.fromCharCode,O;function k(M){throw new RangeError(w[M])}function X(M,Q){for(var rt=M.length,wt=[];rt--;)wt[rt]=Q(M[rt]);return wt}function j(M,Q){var rt=M.split("@"),wt="";rt.length>1&&(wt=rt[0]+"@",M=rt[1]),M=M.replace(S,".");var vt=M.split("."),Ft=X(vt,Q).join(".");return wt+Ft}function V(M){for(var Q=[],rt=0,wt=M.length,vt,Ft;rt<wt;)vt=M.charCodeAt(rt++),vt>=55296&&vt<=56319&&rt<wt?(Ft=M.charCodeAt(rt++),(Ft&64512)==56320?Q.push(((vt&1023)<<10)+(Ft&1023)+65536):(Q.push(vt),rt--)):Q.push(vt);return Q}function K(M){return X(M,function(Q){var rt="";return Q>65535&&(Q-=65536,rt+=F(Q>>>10&1023|55296),Q=56320|Q&1023),rt+=F(Q),rt}).join("")}function B(M){return M-48<10?M-22:M-65<26?M-65:M-97<26?M-97:h}function z(M,Q){return M+22+75*(M<26)-((Q!=0)<<5)}function gt(M,Q,rt){var wt=0;for(M=rt?I(M/p):M>>1,M+=I(M/Q);M>P*f>>1;wt+=h)M=I(M/P);return I(wt+(P+1)*M/(M+m))}function pt(M){var Q=[],rt=M.length,wt,vt=0,Ft=_,Et=v,Ot,Te,Be,le,Tt,$t,Mt,Li,Bi;for(Ot=M.lastIndexOf(E),Ot<0&&(Ot=0),Te=0;Te<Ot;++Te)M.charCodeAt(Te)>=128&&k("not-basic"),Q.push(M.charCodeAt(Te));for(Be=Ot>0?Ot+1:0;Be<rt;){for(le=vt,Tt=1,$t=h;Be>=rt&&k("invalid-input"),Mt=B(M.charCodeAt(Be++)),(Mt>=h||Mt>I((l-vt)/Tt))&&k("overflow"),vt+=Mt*Tt,Li=$t<=Et?c:$t>=Et+f?f:$t-Et,!(Mt<Li);$t+=h)Bi=h-Li,Tt>I(l/Bi)&&k("overflow"),Tt*=Bi;wt=Q.length+1,Et=gt(vt-le,wt,le==0),I(vt/wt)>l-Ft&&k("overflow"),Ft+=I(vt/wt),vt%=wt,Q.splice(vt++,0,Ft)}return K(Q)}function et(M){var Q,rt,wt,vt,Ft,Et,Ot,Te,Be,le,Tt,$t=[],Mt,Li,Bi,Fs;for(M=V(M),Mt=M.length,Q=_,rt=0,Ft=v,Et=0;Et<Mt;++Et)Tt=M[Et],Tt<128&&$t.push(F(Tt));for(wt=vt=$t.length,vt&&$t.push(E);wt<Mt;){for(Ot=l,Et=0;Et<Mt;++Et)Tt=M[Et],Tt>=Q&&Tt<Ot&&(Ot=Tt);for(Li=wt+1,Ot-Q>I((l-rt)/Li)&&k("overflow"),rt+=(Ot-Q)*Li,Q=Ot,Et=0;Et<Mt;++Et)if(Tt=M[Et],Tt<Q&&++rt>l&&k("overflow"),Tt==Q){for(Te=rt,Be=h;le=Be<=Ft?c:Be>=Ft+f?f:Be-Ft,!(Te<le);Be+=h)Fs=Te-le,Bi=h-le,$t.push(F(z(le+Fs%Bi,0))),Te=I(Fs/Bi);$t.push(F(z(Te,0))),Ft=gt(rt,Li,wt==vt),rt=0,++wt}++rt,++Q}return $t.join("")}function D(M){return j(M,function(Q){return T.test(Q)?pt(Q.slice(4).toLowerCase()):Q})}function $(M){return j(M,function(Q){return b.test(Q)?"xn--"+et(Q):Q})}if(o={version:"1.4.1",ucs2:{decode:V,encode:K},decode:pt,encode:et,toASCII:$,toUnicode:D},r&&n)if(e.exports==r)n.exports=o;else for(O in o)o.hasOwnProperty(O)&&(r[O]=o[O]);else i.punycode=o})(pm)})(vd,vd.exports);var Y2=vd.exports,q2=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),r=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;t[i]=n;for(i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,i);if(o.value!==n||o.enumerable!==!0)return!1}return!0},H1=typeof Symbol<"u"&&Symbol,Q2=q2,K2=function(){return typeof H1!="function"||typeof Symbol!="function"||typeof H1("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Q2()},G1={foo:{}},Z2=Object,J2=function(){return{__proto__:G1}.foo===G1.foo&&!({__proto__:null}instanceof Z2)},tR="Function.prototype.bind called on incompatible ",vm=Array.prototype.slice,eR=Object.prototype.toString,iR="[object Function]",rR=function(t){var i=this;if(typeof i!="function"||eR.call(i)!==iR)throw new TypeError(tR+i);for(var r=vm.call(arguments,1),n,s=function(){if(this instanceof n){var f=i.apply(this,r.concat(vm.call(arguments)));return Object(f)===f?f:this}else return i.apply(t,r.concat(vm.call(arguments)))},o=Math.max(0,i.length-r.length),l=[],h=0;h<o;h++)l.push("$"+h);if(n=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(s),i.prototype){var c=function(){};c.prototype=i.prototype,n.prototype=new c,c.prototype=null}return n},nR=rR,bv=Function.prototype.bind||nR,sR=bv,oR=sR.call(Function.call,Object.prototype.hasOwnProperty),Ct,Ma=SyntaxError,$b=Function,wa=TypeError,_m=function(e){try{return $b('"use strict"; return ('+e+").constructor;")()}catch{}},uo=Object.getOwnPropertyDescriptor;if(uo)try{uo({},"")}catch{uo=null}var xm=function(){throw new wa},aR=uo?function(){try{return arguments.callee,xm}catch{try{return uo(arguments,"callee").get}catch{return xm}}}():xm,Xo=K2(),lR=J2(),Me=Object.getPrototypeOf||(lR?function(e){return e.__proto__}:null),Jo={},uR=typeof Uint8Array>"u"||!Me?Ct:Me(Uint8Array),ho={"%AggregateError%":typeof AggregateError>"u"?Ct:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ct:ArrayBuffer,"%ArrayIteratorPrototype%":Xo&&Me?Me([][Symbol.iterator]()):Ct,"%AsyncFromSyncIteratorPrototype%":Ct,"%AsyncFunction%":Jo,"%AsyncGenerator%":Jo,"%AsyncGeneratorFunction%":Jo,"%AsyncIteratorPrototype%":Jo,"%Atomics%":typeof Atomics>"u"?Ct:Atomics,"%BigInt%":typeof BigInt>"u"?Ct:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ct:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ct:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ct:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ct:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ct:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ct:FinalizationRegistry,"%Function%":$b,"%GeneratorFunction%":Jo,"%Int8Array%":typeof Int8Array>"u"?Ct:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ct:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ct:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xo&&Me?Me(Me([][Symbol.iterator]())):Ct,"%JSON%":typeof JSON=="object"?JSON:Ct,"%Map%":typeof Map>"u"?Ct:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Xo||!Me?Ct:Me(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ct:Promise,"%Proxy%":typeof Proxy>"u"?Ct:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ct:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ct:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Xo||!Me?Ct:Me(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ct:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xo&&Me?Me(""[Symbol.iterator]()):Ct,"%Symbol%":Xo?Symbol:Ct,"%SyntaxError%":Ma,"%ThrowTypeError%":aR,"%TypedArray%":uR,"%TypeError%":wa,"%Uint8Array%":typeof Uint8Array>"u"?Ct:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ct:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ct:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ct:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ct:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ct:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ct:WeakSet};if(Me)try{null.error}catch(e){var hR=Me(Me(e));ho["%Error.prototype%"]=hR}var cR=function e(t){var i;if(t==="%AsyncFunction%")i=_m("async function () {}");else if(t==="%GeneratorFunction%")i=_m("function* () {}");else if(t==="%AsyncGeneratorFunction%")i=_m("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(i=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=e("%AsyncGenerator%");n&&Me&&(i=Me(n.prototype))}return ho[t]=i,i},W1={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ku=bv,_d=oR,dR=Ku.call(Function.call,Array.prototype.concat),fR=Ku.call(Function.apply,Array.prototype.splice),$1=Ku.call(Function.call,String.prototype.replace),xd=Ku.call(Function.call,String.prototype.slice),pR=Ku.call(Function.call,RegExp.prototype.exec),mR=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,gR=/\\(\\)?/g,yR=function(t){var i=xd(t,0,1),r=xd(t,-1);if(i==="%"&&r!=="%")throw new Ma("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&i!=="%")throw new Ma("invalid intrinsic syntax, expected opening `%`");var n=[];return $1(t,mR,function(s,o,l,h){n[n.length]=l?$1(h,gR,"$1"):o||s}),n},vR=function(t,i){var r=t,n;if(_d(W1,r)&&(n=W1[r],r="%"+n[0]+"%"),_d(ho,r)){var s=ho[r];if(s===Jo&&(s=cR(r)),typeof s>"u"&&!i)throw new wa("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:s}}throw new Ma("intrinsic "+t+" does not exist!")},Ev=function(t,i){if(typeof t!="string"||t.length===0)throw new wa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof i!="boolean")throw new wa('"allowMissing" argument must be a boolean');if(pR(/^%?[^%]*%?$/,t)===null)throw new Ma("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=yR(t),n=r.length>0?r[0]:"",s=vR("%"+n+"%",i),o=s.name,l=s.value,h=!1,c=s.alias;c&&(n=c[0],fR(r,dR([0,1],c)));for(var f=1,m=!0;f<r.length;f+=1){var p=r[f],v=xd(p,0,1),_=xd(p,-1);if((v==='"'||v==="'"||v==="`"||_==='"'||_==="'"||_==="`")&&v!==_)throw new Ma("property names with quotes must have matching quotes");if((p==="constructor"||!m)&&(h=!0),n+="."+p,o="%"+n+"%",_d(ho,o))l=ho[o];else if(l!=null){if(!(p in l)){if(!i)throw new wa("base intrinsic for "+t+" exists, but the property is not available.");return}if(uo&&f+1>=r.length){var E=uo(l,p);m=!!E,m&&"get"in E&&!("originalValue"in E.get)?l=E.get:l=l[p]}else m=_d(l,p),l=l[p];m&&!h&&(ho[o]=l)}}return l},jb={exports:{}};(function(e){var t=bv,i=Ev,r=i("%Function.prototype.apply%"),n=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||t.call(n,r),o=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),h=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}e.exports=function(m){var p=s(t,n,arguments);if(o&&l){var v=o(p,"length");v.configurable&&l(p,"length",{value:1+h(0,m.length-(arguments.length-1))})}return p};var c=function(){return s(t,r,arguments)};l?l(e.exports,"apply",{value:c}):e.exports.apply=c})(jb);var _R=jb.exports,Vb=Ev,Xb=_R,xR=Xb(Vb("String.prototype.indexOf")),wR=function(t,i){var r=Vb(t,!!i);return typeof r=="function"&&xR(t,".prototype.")>-1?Xb(r):r};const SR={},bR=Object.freeze(Object.defineProperty({__proto__:null,default:SR},Symbol.toStringTag,{value:"Module"})),ER=Cb(bR);var Tv=typeof Map=="function"&&Map.prototype,wm=Object.getOwnPropertyDescriptor&&Tv?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,wd=Tv&&wm&&typeof wm.get=="function"?wm.get:null,j1=Tv&&Map.prototype.forEach,Cv=typeof Set=="function"&&Set.prototype,Sm=Object.getOwnPropertyDescriptor&&Cv?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Sd=Cv&&Sm&&typeof Sm.get=="function"?Sm.get:null,V1=Cv&&Set.prototype.forEach,TR=typeof WeakMap=="function"&&WeakMap.prototype,Zl=TR?WeakMap.prototype.has:null,CR=typeof WeakSet=="function"&&WeakSet.prototype,Jl=CR?WeakSet.prototype.has:null,PR=typeof WeakRef=="function"&&WeakRef.prototype,X1=PR?WeakRef.prototype.deref:null,AR=Boolean.prototype.valueOf,IR=Object.prototype.toString,RR=Function.prototype.toString,MR=String.prototype.match,Pv=String.prototype.slice,us=String.prototype.replace,kR=String.prototype.toUpperCase,Y1=String.prototype.toLowerCase,Yb=RegExp.prototype.test,q1=Array.prototype.concat,tn=Array.prototype.join,DR=Array.prototype.slice,Q1=Math.floor,Og=typeof BigInt=="function"?BigInt.prototype.valueOf:null,bm=Object.getOwnPropertySymbols,Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ka=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Je=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ka||"symbol")?Symbol.toStringTag:null,qb=Object.prototype.propertyIsEnumerable,K1=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Z1(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Yb.call(/e/,t))return t;var i=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-Q1(-e):Q1(e);if(r!==e){var n=String(r),s=Pv.call(t,n.length+1);return us.call(n,i,"$&_")+"."+us.call(us.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return us.call(t,i,"$&_")}var Fg=ER,J1=Fg.custom,tw=Kb(J1)?J1:null,OR=function e(t,i,r,n){var s=i||{};if(rs(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rs(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=rs(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rs(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rs(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Jb(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var h=String(t);return l?Z1(t,h):h}if(typeof t=="bigint"){var c=String(t)+"n";return l?Z1(t,c):c}var f=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=f&&f>0&&typeof t=="object")return Lg(t)?"[Array]":"[Object]";var m=ZR(s,r);if(typeof n>"u")n=[];else if(Zb(n,t)>=0)return"[Circular]";function p(B,z,gt){if(z&&(n=DR.call(n),n.push(z)),gt){var pt={depth:s.depth};return rs(s,"quoteStyle")&&(pt.quoteStyle=s.quoteStyle),e(B,pt,r+1,n)}return e(B,s,r+1,n)}if(typeof t=="function"&&!ew(t)){var v=WR(t),_=uc(t,p);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(_.length>0?" { "+tn.call(_,", ")+" }":"")}if(Kb(t)){var E=ka?us.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ng.call(t);return typeof t=="object"&&!ka?Tl(E):E}if(qR(t)){for(var T="<"+Y1.call(String(t.nodeName)),b=t.attributes||[],S=0;S<b.length;S++)T+=" "+b[S].name+"="+Qb(NR(b[S].value),"double",s);return T+=">",t.childNodes&&t.childNodes.length&&(T+="..."),T+="</"+Y1.call(String(t.nodeName))+">",T}if(Lg(t)){if(t.length===0)return"[]";var w=uc(t,p);return m&&!KR(w)?"["+Bg(w,m)+"]":"[ "+tn.call(w,", ")+" ]"}if(LR(t)){var P=uc(t,p);return!("cause"in Error.prototype)&&"cause"in t&&!qb.call(t,"cause")?"{ ["+String(t)+"] "+tn.call(q1.call("[cause]: "+p(t.cause),P),", ")+" }":P.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+tn.call(P,", ")+" }"}if(typeof t=="object"&&o){if(tw&&typeof t[tw]=="function"&&Fg)return Fg(t,{depth:f-r});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if($R(t)){var I=[];return j1&&j1.call(t,function(B,z){I.push(p(z,t,!0)+" => "+p(B,t))}),iw("Map",wd.call(t),I,m)}if(XR(t)){var F=[];return V1&&V1.call(t,function(B){F.push(p(B,t))}),iw("Set",Sd.call(t),F,m)}if(jR(t))return Em("WeakMap");if(YR(t))return Em("WeakSet");if(VR(t))return Em("WeakRef");if(UR(t))return Tl(p(Number(t)));if(HR(t))return Tl(p(Og.call(t)));if(zR(t))return Tl(AR.call(t));if(BR(t))return Tl(p(String(t)));if(!FR(t)&&!ew(t)){var O=uc(t,p),k=K1?K1(t)===Object.prototype:t instanceof Object||t.constructor===Object,X=t instanceof Object?"":"null prototype",j=!k&&Je&&Object(t)===t&&Je in t?Pv.call(Is(t),8,-1):X?"Object":"",V=k||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",K=V+(j||X?"["+tn.call(q1.call([],j||[],X||[]),": ")+"] ":"");return O.length===0?K+"{}":m?K+"{"+Bg(O,m)+"}":K+"{ "+tn.call(O,", ")+" }"}return String(t)};function Qb(e,t,i){var r=(i.quoteStyle||t)==="double"?'"':"'";return r+e+r}function NR(e){return us.call(String(e),/"/g,"&quot;")}function Lg(e){return Is(e)==="[object Array]"&&(!Je||!(typeof e=="object"&&Je in e))}function FR(e){return Is(e)==="[object Date]"&&(!Je||!(typeof e=="object"&&Je in e))}function ew(e){return Is(e)==="[object RegExp]"&&(!Je||!(typeof e=="object"&&Je in e))}function LR(e){return Is(e)==="[object Error]"&&(!Je||!(typeof e=="object"&&Je in e))}function BR(e){return Is(e)==="[object String]"&&(!Je||!(typeof e=="object"&&Je in e))}function UR(e){return Is(e)==="[object Number]"&&(!Je||!(typeof e=="object"&&Je in e))}function zR(e){return Is(e)==="[object Boolean]"&&(!Je||!(typeof e=="object"&&Je in e))}function Kb(e){if(ka)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Ng)return!1;try{return Ng.call(e),!0}catch{}return!1}function HR(e){if(!e||typeof e!="object"||!Og)return!1;try{return Og.call(e),!0}catch{}return!1}var GR=Object.prototype.hasOwnProperty||function(e){return e in this};function rs(e,t){return GR.call(e,t)}function Is(e){return IR.call(e)}function WR(e){if(e.name)return e.name;var t=MR.call(RR.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Zb(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}function $R(e){if(!wd||!e||typeof e!="object")return!1;try{wd.call(e);try{Sd.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function jR(e){if(!Zl||!e||typeof e!="object")return!1;try{Zl.call(e,Zl);try{Jl.call(e,Jl)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function VR(e){if(!X1||!e||typeof e!="object")return!1;try{return X1.call(e),!0}catch{}return!1}function XR(e){if(!Sd||!e||typeof e!="object")return!1;try{Sd.call(e);try{wd.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function YR(e){if(!Jl||!e||typeof e!="object")return!1;try{Jl.call(e,Jl);try{Zl.call(e,Zl)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function qR(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Jb(e,t){if(e.length>t.maxStringLength){var i=e.length-t.maxStringLength,r="... "+i+" more character"+(i>1?"s":"");return Jb(Pv.call(e,0,t.maxStringLength),t)+r}var n=us.call(us.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,QR);return Qb(n,"single",t)}function QR(e){var t=e.charCodeAt(0),i={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return i?"\\"+i:"\\x"+(t<16?"0":"")+kR.call(t.toString(16))}function Tl(e){return"Object("+e+")"}function Em(e){return e+" { ? }"}function iw(e,t,i,r){var n=r?Bg(i,r):tn.call(i,", ");return e+" ("+t+") {"+n+"}"}function KR(e){for(var t=0;t<e.length;t++)if(Zb(e[t],`
`)>=0)return!1;return!0}function ZR(e,t){var i;if(e.indent==="	")i="	";else if(typeof e.indent=="number"&&e.indent>0)i=tn.call(Array(e.indent+1)," ");else return null;return{base:i,prev:tn.call(Array(t+1),i)}}function Bg(e,t){if(e.length===0)return"";var i=`
`+t.prev+t.base;return i+tn.call(e,","+i)+`
`+t.prev}function uc(e,t){var i=Lg(e),r=[];if(i){r.length=e.length;for(var n=0;n<e.length;n++)r[n]=rs(e,n)?t(e[n],e):""}var s=typeof bm=="function"?bm(e):[],o;if(ka){o={};for(var l=0;l<s.length;l++)o["$"+s[l]]=s[l]}for(var h in e)rs(e,h)&&(i&&String(Number(h))===h&&h<e.length||ka&&o["$"+h]instanceof Symbol||(Yb.call(/[^\w$]/,h)?r.push(t(h,e)+": "+t(e[h],e)):r.push(h+": "+t(e[h],e))));if(typeof bm=="function")for(var c=0;c<s.length;c++)qb.call(e,s[c])&&r.push("["+t(s[c])+"]: "+t(e[s[c]],e));return r}var Av=Ev,Ka=wR,JR=OR,tM=Av("%TypeError%"),hc=Av("%WeakMap%",!0),cc=Av("%Map%",!0),eM=Ka("WeakMap.prototype.get",!0),iM=Ka("WeakMap.prototype.set",!0),rM=Ka("WeakMap.prototype.has",!0),nM=Ka("Map.prototype.get",!0),sM=Ka("Map.prototype.set",!0),oM=Ka("Map.prototype.has",!0),Iv=function(e,t){for(var i=e,r;(r=i.next)!==null;i=r)if(r.key===t)return i.next=r.next,r.next=e.next,e.next=r,r},aM=function(e,t){var i=Iv(e,t);return i&&i.value},lM=function(e,t,i){var r=Iv(e,t);r?r.value=i:e.next={key:t,next:e.next,value:i}},uM=function(e,t){return!!Iv(e,t)},hM=function(){var t,i,r,n={assert:function(s){if(!n.has(s))throw new tM("Side channel does not contain "+JR(s))},get:function(s){if(hc&&s&&(typeof s=="object"||typeof s=="function")){if(t)return eM(t,s)}else if(cc){if(i)return nM(i,s)}else if(r)return aM(r,s)},has:function(s){if(hc&&s&&(typeof s=="object"||typeof s=="function")){if(t)return rM(t,s)}else if(cc){if(i)return oM(i,s)}else if(r)return uM(r,s);return!1},set:function(s,o){hc&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new hc),iM(t,s,o)):cc?(i||(i=new cc),sM(i,s,o)):(r||(r={key:{},next:null}),lM(r,s,o))}};return n},cM=String.prototype.replace,dM=/%20/g,Tm={RFC1738:"RFC1738",RFC3986:"RFC3986"},Rv={default:Tm.RFC3986,formatters:{RFC1738:function(e){return cM.call(e,dM,"+")},RFC3986:function(e){return String(e)}},RFC1738:Tm.RFC1738,RFC3986:Tm.RFC3986},fM=Rv,Cm=Object.prototype.hasOwnProperty,ro=Array.isArray,Qr=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),pM=function(t){for(;t.length>1;){var i=t.pop(),r=i.obj[i.prop];if(ro(r)){for(var n=[],s=0;s<r.length;++s)typeof r[s]<"u"&&n.push(r[s]);i.obj[i.prop]=n}}},tE=function(t,i){for(var r=i&&i.plainObjects?Object.create(null):{},n=0;n<t.length;++n)typeof t[n]<"u"&&(r[n]=t[n]);return r},mM=function e(t,i,r){if(!i)return t;if(typeof i!="object"){if(ro(t))t.push(i);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!Cm.call(Object.prototype,i))&&(t[i]=!0);else return[t,i];return t}if(!t||typeof t!="object")return[t].concat(i);var n=t;return ro(t)&&!ro(i)&&(n=tE(t,r)),ro(t)&&ro(i)?(i.forEach(function(s,o){if(Cm.call(t,o)){var l=t[o];l&&typeof l=="object"&&s&&typeof s=="object"?t[o]=e(l,s,r):t.push(s)}else t[o]=s}),t):Object.keys(i).reduce(function(s,o){var l=i[o];return Cm.call(s,o)?s[o]=e(s[o],l,r):s[o]=l,s},n)},gM=function(t,i){return Object.keys(i).reduce(function(r,n){return r[n]=i[n],r},t)},yM=function(e,t,i){var r=e.replace(/\+/g," ");if(i==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},vM=function(t,i,r,n,s){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var l="",h=0;h<o.length;++h){var c=o.charCodeAt(h);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===fM.RFC1738&&(c===40||c===41)){l+=o.charAt(h);continue}if(c<128){l=l+Qr[c];continue}if(c<2048){l=l+(Qr[192|c>>6]+Qr[128|c&63]);continue}if(c<55296||c>=57344){l=l+(Qr[224|c>>12]+Qr[128|c>>6&63]+Qr[128|c&63]);continue}h+=1,c=65536+((c&1023)<<10|o.charCodeAt(h)&1023),l+=Qr[240|c>>18]+Qr[128|c>>12&63]+Qr[128|c>>6&63]+Qr[128|c&63]}return l},_M=function(t){for(var i=[{obj:{o:t},prop:"o"}],r=[],n=0;n<i.length;++n)for(var s=i[n],o=s.obj[s.prop],l=Object.keys(o),h=0;h<l.length;++h){var c=l[h],f=o[c];typeof f=="object"&&f!==null&&r.indexOf(f)===-1&&(i.push({obj:o,prop:c}),r.push(f))}return pM(i),t},xM=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},wM=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},SM=function(t,i){return[].concat(t,i)},bM=function(t,i){if(ro(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(i(t[n]));return r}return i(t)},eE={arrayToObject:tE,assign:gM,combine:SM,compact:_M,decode:yM,encode:vM,isBuffer:wM,isRegExp:xM,maybeMap:bM,merge:mM},iE=hM,Zc=eE,tu=Rv,EM=Object.prototype.hasOwnProperty,rw={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,i){return t+"["+i+"]"},repeat:function(t){return t}},Tn=Array.isArray,TM=Array.prototype.push,rE=function(e,t){TM.apply(e,Tn(t)?t:[t])},CM=Date.prototype.toISOString,nw=tu.default,Ke={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Zc.encode,encodeValuesOnly:!1,format:nw,formatter:tu.formatters[nw],indices:!1,serializeDate:function(t){return CM.call(t)},skipNulls:!1,strictNullHandling:!1},PM=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Pm={},AM=function e(t,i,r,n,s,o,l,h,c,f,m,p,v,_,E,T){for(var b=t,S=T,w=0,P=!1;(S=S.get(Pm))!==void 0&&!P;){var I=S.get(t);if(w+=1,typeof I<"u"){if(I===w)throw new RangeError("Cyclic object value");P=!0}typeof S.get(Pm)>"u"&&(w=0)}if(typeof h=="function"?b=h(i,b):b instanceof Date?b=m(b):r==="comma"&&Tn(b)&&(b=Zc.maybeMap(b,function(pt){return pt instanceof Date?m(pt):pt})),b===null){if(s)return l&&!_?l(i,Ke.encoder,E,"key",p):i;b=""}if(PM(b)||Zc.isBuffer(b)){if(l){var F=_?i:l(i,Ke.encoder,E,"key",p);return[v(F)+"="+v(l(b,Ke.encoder,E,"value",p))]}return[v(i)+"="+v(String(b))]}var O=[];if(typeof b>"u")return O;var k;if(r==="comma"&&Tn(b))_&&l&&(b=Zc.maybeMap(b,l)),k=[{value:b.length>0?b.join(",")||null:void 0}];else if(Tn(h))k=h;else{var X=Object.keys(b);k=c?X.sort(c):X}for(var j=n&&Tn(b)&&b.length===1?i+"[]":i,V=0;V<k.length;++V){var K=k[V],B=typeof K=="object"&&typeof K.value<"u"?K.value:b[K];if(!(o&&B===null)){var z=Tn(b)?typeof r=="function"?r(j,K):j:j+(f?"."+K:"["+K+"]");T.set(t,w);var gt=iE();gt.set(Pm,T),rE(O,e(B,z,r,n,s,o,r==="comma"&&_&&Tn(b)?null:l,h,c,f,m,p,v,_,E,gt))}}return O},IM=function(t){if(!t)return Ke;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var i=t.charset||Ke.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=tu.default;if(typeof t.format<"u"){if(!EM.call(tu.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=tu.formatters[r],s=Ke.filter;return(typeof t.filter=="function"||Tn(t.filter))&&(s=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ke.addQueryPrefix,allowDots:typeof t.allowDots>"u"?Ke.allowDots:!!t.allowDots,charset:i,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ke.charsetSentinel,delimiter:typeof t.delimiter>"u"?Ke.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ke.encode,encoder:typeof t.encoder=="function"?t.encoder:Ke.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ke.encodeValuesOnly,filter:s,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ke.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ke.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ke.strictNullHandling}},RM=function(e,t){var i=e,r=IM(t),n,s;typeof r.filter=="function"?(s=r.filter,i=s("",i)):Tn(r.filter)&&(s=r.filter,n=s);var o=[];if(typeof i!="object"||i===null)return"";var l;t&&t.arrayFormat in rw?l=t.arrayFormat:t&&"indices"in t?l=t.indices?"indices":"repeat":l="indices";var h=rw[l];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=h==="comma"&&t&&t.commaRoundTrip;n||(n=Object.keys(i)),r.sort&&n.sort(r.sort);for(var f=iE(),m=0;m<n.length;++m){var p=n[m];r.skipNulls&&i[p]===null||rE(o,AM(i[p],p,h,c,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,f))}var v=o.join(r.delimiter),_=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),v.length>0?_+v:""},Da=eE,Ug=Object.prototype.hasOwnProperty,MM=Array.isArray,Re={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Da.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},kM=function(e){return e.replace(/&#(\d+);/g,function(t,i){return String.fromCharCode(parseInt(i,10))})},nE=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},DM="utf8=%26%2310003%3B",OM="utf8=%E2%9C%93",NM=function(t,i){var r={__proto__:null},n=i.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=i.parameterLimit===1/0?void 0:i.parameterLimit,o=n.split(i.delimiter,s),l=-1,h,c=i.charset;if(i.charsetSentinel)for(h=0;h<o.length;++h)o[h].indexOf("utf8=")===0&&(o[h]===OM?c="utf-8":o[h]===DM&&(c="iso-8859-1"),l=h,h=o.length);for(h=0;h<o.length;++h)if(h!==l){var f=o[h],m=f.indexOf("]="),p=m===-1?f.indexOf("="):m+1,v,_;p===-1?(v=i.decoder(f,Re.decoder,c,"key"),_=i.strictNullHandling?null:""):(v=i.decoder(f.slice(0,p),Re.decoder,c,"key"),_=Da.maybeMap(nE(f.slice(p+1),i),function(E){return i.decoder(E,Re.decoder,c,"value")})),_&&i.interpretNumericEntities&&c==="iso-8859-1"&&(_=kM(_)),f.indexOf("[]=")>-1&&(_=MM(_)?[_]:_),Ug.call(r,v)?r[v]=Da.combine(r[v],_):r[v]=_}return r},FM=function(e,t,i,r){for(var n=r?t:nE(t,i),s=e.length-1;s>=0;--s){var o,l=e[s];if(l==="[]"&&i.parseArrays)o=[].concat(n);else{o=i.plainObjects?Object.create(null):{};var h=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,c=parseInt(h,10);!i.parseArrays&&h===""?o={0:n}:!isNaN(c)&&l!==h&&String(c)===h&&c>=0&&i.parseArrays&&c<=i.arrayLimit?(o=[],o[c]=n):h!=="__proto__"&&(o[h]=n)}n=o}return n},LM=function(t,i,r,n){if(t){var s=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,h=r.depth>0&&o.exec(s),c=h?s.slice(0,h.index):s,f=[];if(c){if(!r.plainObjects&&Ug.call(Object.prototype,c)&&!r.allowPrototypes)return;f.push(c)}for(var m=0;r.depth>0&&(h=l.exec(s))!==null&&m<r.depth;){if(m+=1,!r.plainObjects&&Ug.call(Object.prototype,h[1].slice(1,-1))&&!r.allowPrototypes)return;f.push(h[1])}return h&&f.push("["+s.slice(h.index)+"]"),FM(f,i,r,n)}},BM=function(t){if(!t)return Re;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=typeof t.charset>"u"?Re.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?Re.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Re.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Re.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Re.arrayLimit,charset:i,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Re.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Re.comma,decoder:typeof t.decoder=="function"?t.decoder:Re.decoder,delimiter:typeof t.delimiter=="string"||Da.isRegExp(t.delimiter)?t.delimiter:Re.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Re.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Re.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Re.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Re.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Re.strictNullHandling}},UM=function(e,t){var i=BM(t);if(e===""||e===null||typeof e>"u")return i.plainObjects?Object.create(null):{};for(var r=typeof e=="string"?NM(e,i):e,n=i.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var l=s[o],h=LM(l,r[l],i,typeof e=="string");n=Da.merge(n,h,i)}return i.allowSparse===!0?n:Da.compact(n)},zM=RM,HM=UM,GM=Rv,WM={formats:GM,parse:HM,stringify:zM},$M=Y2;function Mr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var jM=/^([a-z0-9.+-]+:)/i,VM=/:[0-9]*$/,XM=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,YM=["<",">",'"',"`"," ","\r",`
`,"	"],qM=["{","}","|","\\","^","`"].concat(YM),zg=["'"].concat(qM),sw=["%","/","?",";","#"].concat(zg),ow=["/","?","#"],QM=255,aw=/^[+a-z0-9A-Z_-]{0,63}$/,KM=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ZM={javascript:!0,"javascript:":!0},Hg={javascript:!0,"javascript:":!0},Sa={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Gg=WM;function vf(e,t,i){if(e&&typeof e=="object"&&e instanceof Mr)return e;var r=new Mr;return r.parse(e,t,i),r}Mr.prototype.parse=function(e,t,i){if(typeof e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),n=r!==-1&&r<e.indexOf("#")?"?":"#",s=e.split(n),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(n);var l=e;if(l=l.trim(),!i&&e.split("#").length===1){var h=XM.exec(l);if(h)return this.path=l,this.href=l,this.pathname=h[1],h[2]?(this.search=h[2],t?this.query=Gg.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=jM.exec(l);if(c){c=c[0];var f=c.toLowerCase();this.protocol=f,l=l.substr(c.length)}if(i||c||l.match(/^\/\/[^@/]+@[^@/]+/)){var m=l.substr(0,2)==="//";m&&!(c&&Hg[c])&&(l=l.substr(2),this.slashes=!0)}if(!Hg[c]&&(m||c&&!Sa[c])){for(var p=-1,v=0;v<ow.length;v++){var _=l.indexOf(ow[v]);_!==-1&&(p===-1||_<p)&&(p=_)}var E,T;p===-1?T=l.lastIndexOf("@"):T=l.lastIndexOf("@",p),T!==-1&&(E=l.slice(0,T),l=l.slice(T+1),this.auth=decodeURIComponent(E)),p=-1;for(var v=0;v<sw.length;v++){var _=l.indexOf(sw[v]);_!==-1&&(p===-1||_<p)&&(p=_)}p===-1&&(p=l.length),this.host=l.slice(0,p),l=l.slice(p),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var S=this.hostname.split(/\./),v=0,w=S.length;v<w;v++){var P=S[v];if(P&&!P.match(aw)){for(var I="",F=0,O=P.length;F<O;F++)P.charCodeAt(F)>127?I+="x":I+=P[F];if(!I.match(aw)){var k=S.slice(0,v),X=S.slice(v+1),j=P.match(KM);j&&(k.push(j[1]),X.unshift(j[2])),X.length&&(l="/"+X.join(".")+l),this.hostname=k.join(".");break}}}this.hostname.length>QM?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=$M.toASCII(this.hostname));var V=this.port?":"+this.port:"",K=this.hostname||"";this.host=K+V,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),l[0]!=="/"&&(l="/"+l))}if(!ZM[f])for(var v=0,w=zg.length;v<w;v++){var B=zg[v];if(l.indexOf(B)!==-1){var z=encodeURIComponent(B);z===B&&(z=escape(B)),l=l.split(B).join(z)}}var gt=l.indexOf("#");gt!==-1&&(this.hash=l.substr(gt),l=l.slice(0,gt));var pt=l.indexOf("?");if(pt!==-1?(this.search=l.substr(pt),this.query=l.substr(pt+1),t&&(this.query=Gg.parse(this.query)),l=l.slice(0,pt)):t&&(this.search="",this.query={}),l&&(this.pathname=l),Sa[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var V=this.pathname||"",et=this.search||"";this.path=V+et}return this.href=this.format(),this};function JM(e){return typeof e=="string"&&(e=vf(e)),e instanceof Mr?e.format():Mr.prototype.format.call(e)}Mr.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,s="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Gg.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Sa[t])&&n!==!1?(n="//"+(n||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):n||(n=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),i=i.replace(/[?#]/g,function(l){return encodeURIComponent(l)}),o=o.replace("#","%23"),t+n+i+o+r};function tk(e,t){return vf(e,!1,!0).resolve(t)}Mr.prototype.resolve=function(e){return this.resolveObject(vf(e,!1,!0)).format()};Mr.prototype.resolveObject=function(e){if(typeof e=="string"){var t=new Mr;t.parse(e,!1,!0),e=t}for(var i=new Mr,r=Object.keys(this),n=0;n<r.length;n++){var s=r[n];i[s]=this[s]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),l=0;l<o.length;l++){var h=o[l];h!=="protocol"&&(i[h]=e[h])}return Sa[i.protocol]&&i.hostname&&!i.pathname&&(i.pathname="/",i.path=i.pathname),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!Sa[e.protocol]){for(var c=Object.keys(e),f=0;f<c.length;f++){var m=c[f];i[m]=e[m]}return i.href=i.format(),i}if(i.protocol=e.protocol,!e.host&&!Hg[e.protocol]){for(var w=(e.pathname||"").split("/");w.length&&!(e.host=w.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),w[0]!==""&&w.unshift(""),w.length<2&&w.unshift(""),i.pathname=w.join("/")}else i.pathname=e.pathname;if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var p=i.pathname||"",v=i.search||"";i.path=p+v}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var _=i.pathname&&i.pathname.charAt(0)==="/",E=e.host||e.pathname&&e.pathname.charAt(0)==="/",T=E||_||i.host&&e.pathname,b=T,S=i.pathname&&i.pathname.split("/")||[],w=e.pathname&&e.pathname.split("/")||[],P=i.protocol&&!Sa[i.protocol];if(P&&(i.hostname="",i.port=null,i.host&&(S[0]===""?S[0]=i.host:S.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(w[0]===""?w[0]=e.host:w.unshift(e.host)),e.host=null),T=T&&(w[0]===""||S[0]==="")),E)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,S=w;else if(w.length)S||(S=[]),S.pop(),S=S.concat(w),i.search=e.search,i.query=e.query;else if(e.search!=null){if(P){i.host=S.shift(),i.hostname=i.host;var I=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;I&&(i.auth=I.shift(),i.hostname=I.shift(),i.host=i.hostname)}return i.search=e.search,i.query=e.query,(i.pathname!==null||i.search!==null)&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var F=S.slice(-1)[0],O=(i.host||e.host||S.length>1)&&(F==="."||F==="..")||F==="",k=0,X=S.length;X>=0;X--)F=S[X],F==="."?S.splice(X,1):F===".."?(S.splice(X,1),k++):k&&(S.splice(X,1),k--);if(!T&&!b)for(;k--;k)S.unshift("..");T&&S[0]!==""&&(!S[0]||S[0].charAt(0)!=="/")&&S.unshift(""),O&&S.join("/").substr(-1)!=="/"&&S.push("");var j=S[0]===""||S[0]&&S[0].charAt(0)==="/";if(P){i.hostname=j?"":S.length?S.shift():"",i.host=i.hostname;var I=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;I&&(i.auth=I.shift(),i.hostname=I.shift(),i.host=i.hostname)}return T=T||i.host&&S.length,T&&!j&&S.unshift(""),S.length>0?i.pathname=S.join("/"):(i.pathname=null,i.path=null),(i.pathname!==null||i.search!==null)&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i};Mr.prototype.parseHost=function(){var e=this.host,t=VM.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var ek=vf,ik=tk,rk=JM;const sE={parse:ek,format:rk,resolve:ik};function gr(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Cl(e){return e.split("?")[0].split("#")[0]}function nk(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sk(e,t,i){return e.replace(new RegExp(nk(t),"g"),i)}function ok(e,t){let i="",r=0,n=-1,s=0,o=-1;for(let l=0;l<=e.length;++l){if(l<e.length)o=e.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(n===l-1||s===1))if(n!==l-1&&s===2){if(i.length<2||r!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const h=i.lastIndexOf("/");if(h!==i.length-1){h===-1?(i="",r=0):(i=i.slice(0,h),r=i.length-1-i.lastIndexOf("/")),n=l,s=0;continue}}else if(i.length===2||i.length===1){i="",r=0,n=l,s=0;continue}}t&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+=`/${e.slice(n+1,l)}`:i=e.slice(n+1,l),r=l-n-1;n=l,s=0}else o===46&&s!==-1?++s:s=-1}return i}const ye={toPosix(e){return sk(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){gr(e),e=this.toPosix(e);let t="";const i=/^file:\/\/\//.exec(e),r=/^[^/:]+:\/\//.exec(e),n=/^[^/:]+:\//.exec(e);if(i||r||n){const s=(i==null?void 0:i[0])||(r==null?void 0:r[0])||(n==null?void 0:n[0]);t=s,e=e.slice(s.length)}return t},toAbsolute(e,t,i){if(this.isDataUrl(e))return e;const r=Cl(this.toPosix(t??nt.ADAPTER.getBaseUrl())),n=Cl(this.toPosix(i??this.rootname(r)));return gr(e),e=this.toPosix(e),e.startsWith("/")?ye.join(n,e.slice(1)):this.isAbsolute(e)?e:this.join(r,e)},normalize(e){if(e=this.toPosix(e),gr(e),e.length===0)return".";let t="";const i=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const r=e.endsWith("/");return e=ok(e,!1),e.length>0&&r&&(e+="/"),i?`/${e}`:t+e},isAbsolute(e){return gr(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const r=e[i];if(gr(r),r.length>0)if(t===void 0)t=r;else{const n=e[i-1]??"";this.extname(n)?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(gr(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const i=t===47;let r=-1,n=!0;const s=this.getProtocol(e),o=e;e=e.slice(s.length);for(let l=e.length-1;l>=1;--l)if(t=e.charCodeAt(l),t===47){if(!n){r=l;break}}else n=!1;return r===-1?i?"/":this.isUrl(o)?s+e:s:i&&r===1?"//":s+e.slice(0,r)},rootname(e){gr(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const i=e.indexOf("/",t.length);i!==-1?t=e.slice(0,i):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){gr(e),t&&gr(t),e=Cl(this.toPosix(e));let i=0,r=-1,n=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,l=-1;for(s=e.length-1;s>=0;--s){const h=e.charCodeAt(s);if(h===47){if(!n){i=s+1;break}}else l===-1&&(n=!1,l=s+1),o>=0&&(h===t.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=l))}return i===r?r=l:r===-1&&(r=e.length),e.slice(i,r)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!n){i=s+1;break}}else r===-1&&(n=!1,r=s+1);return r===-1?"":e.slice(i,r)},extname(e){gr(e),e=Cl(this.toPosix(e));let t=-1,i=0,r=-1,n=!0,s=0;for(let o=e.length-1;o>=0;--o){const l=e.charCodeAt(o);if(l===47){if(!n){i=o+1;break}continue}r===-1&&(n=!1,r=o+1),l===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||r===-1||s===0||s===1&&t===r-1&&t===i+1?"":e.slice(t,r)},parse(e){gr(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Cl(this.toPosix(e));let i=e.charCodeAt(0);const r=this.isAbsolute(e);let n;t.root=this.rootname(e),r||this.hasProtocol(e)?n=1:n=0;let s=-1,o=0,l=-1,h=!0,c=e.length-1,f=0;for(;c>=n;--c){if(i=e.charCodeAt(c),i===47){if(!h){o=c+1;break}continue}l===-1&&(h=!1,l=c+1),i===46?s===-1?s=c:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||l===-1||f===0||f===1&&s===l-1&&s===o+1?l!==-1&&(o===0&&r?t.base=t.name=e.slice(1,l):t.base=t.name=e.slice(o,l)):(o===0&&r?(t.name=e.slice(1,s),t.base=e.slice(1,l)):(t.name=e.slice(o,s),t.base=e.slice(o,l)),t.ext=e.slice(s,l)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},lw={};function xt(e,t,i=3){if(lw[t])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(r=r.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(r))),lw[t]=!0}function ak(){xt("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function lk(){xt("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let Am;function oE(){return typeof Am>"u"&&(Am=function(){var i;const t={stencil:!0,failIfMajorPerformanceCaveat:nt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!nt.ADAPTER.getWebGLRenderingContext())return!1;const r=nt.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const s=!!((i=n==null?void 0:n.getContextAttributes())!=null&&i.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,s}catch{return!1}}()),Am}var uk={grad:.9,turn:360,rad:360/(2*Math.PI)},wn=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},ke=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},tr=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),e>i?i:e>t?e:t},aE=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},uw=function(e){return{r:tr(e.r,0,255),g:tr(e.g,0,255),b:tr(e.b,0,255),a:tr(e.a)}},Im=function(e){return{r:ke(e.r),g:ke(e.g),b:ke(e.b),a:ke(e.a,3)}},hk=/^#([0-9a-f]{3,8})$/i,dc=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},lE=function(e){var t=e.r,i=e.g,r=e.b,n=e.a,s=Math.max(t,i,r),o=s-Math.min(t,i,r),l=o?s===t?(i-r)/o:s===i?2+(r-t)/o:4+(t-i)/o:0;return{h:60*(l<0?l+6:l),s:s?o/s*100:0,v:s/255*100,a:n}},uE=function(e){var t=e.h,i=e.s,r=e.v,n=e.a;t=t/360*6,i/=100,r/=100;var s=Math.floor(t),o=r*(1-i),l=r*(1-(t-s)*i),h=r*(1-(1-t+s)*i),c=s%6;return{r:255*[r,l,o,o,h,r][c],g:255*[h,r,r,l,o,o][c],b:255*[o,o,h,r,r,l][c],a:n}},hw=function(e){return{h:aE(e.h),s:tr(e.s,0,100),l:tr(e.l,0,100),a:tr(e.a)}},cw=function(e){return{h:ke(e.h),s:ke(e.s),l:ke(e.l),a:ke(e.a,3)}},dw=function(e){return uE((i=(t=e).s,{h:t.h,s:(i*=((r=t.l)<50?r:100-r)/100)>0?2*i/(r+i)*100:0,v:r+i,a:t.a}));var t,i,r},eu=function(e){return{h:(t=lE(e)).h,s:(n=(200-(i=t.s))*(r=t.v)/100)>0&&n<200?i*r/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,i,r,n},ck=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wg={string:[[function(e){var t=hk.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?ke(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?ke(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=fk.exec(e)||pk.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:uw({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=ck.exec(e)||dk.exec(e);if(!t)return null;var i,r,n=hw({h:(i=t[1],r=t[2],r===void 0&&(r="deg"),Number(i)*(uk[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return dw(n)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,r=e.b,n=e.a,s=n===void 0?1:n;return wn(t)&&wn(i)&&wn(r)?uw({r:Number(t),g:Number(i),b:Number(r),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,i=e.s,r=e.l,n=e.a,s=n===void 0?1:n;if(!wn(t)||!wn(i)||!wn(r))return null;var o=hw({h:Number(t),s:Number(i),l:Number(r),a:Number(s)});return dw(o)},"hsl"],[function(e){var t=e.h,i=e.s,r=e.v,n=e.a,s=n===void 0?1:n;if(!wn(t)||!wn(i)||!wn(r))return null;var o=function(l){return{h:aE(l.h),s:tr(l.s,0,100),v:tr(l.v,0,100),a:tr(l.a)}}({h:Number(t),s:Number(i),v:Number(r),a:Number(s)});return uE(o)},"hsv"]]},fw=function(e,t){for(var i=0;i<t.length;i++){var r=t[i][0](e);if(r)return[r,t[i][1]]}return[null,void 0]},mk=function(e){return typeof e=="string"?fw(e.trim(),Wg.string):typeof e=="object"&&e!==null?fw(e,Wg.object):[null,void 0]},Rm=function(e,t){var i=eu(e);return{h:i.h,s:tr(i.s+100*t,0,100),l:i.l,a:i.a}},Mm=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},pw=function(e,t){var i=eu(e);return{h:i.h,s:i.s,l:tr(i.l+100*t,0,100),a:i.a}},$g=function(){function e(t){this.parsed=mk(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return ke(Mm(this.rgba),2)},e.prototype.isDark=function(){return Mm(this.rgba)<.5},e.prototype.isLight=function(){return Mm(this.rgba)>=.5},e.prototype.toHex=function(){return t=Im(this.rgba),i=t.r,r=t.g,n=t.b,o=(s=t.a)<1?dc(ke(255*s)):"","#"+dc(i)+dc(r)+dc(n)+o;var t,i,r,n,s,o},e.prototype.toRgb=function(){return Im(this.rgba)},e.prototype.toRgbString=function(){return t=Im(this.rgba),i=t.r,r=t.g,n=t.b,(s=t.a)<1?"rgba("+i+", "+r+", "+n+", "+s+")":"rgb("+i+", "+r+", "+n+")";var t,i,r,n,s},e.prototype.toHsl=function(){return cw(eu(this.rgba))},e.prototype.toHslString=function(){return t=cw(eu(this.rgba)),i=t.h,r=t.s,n=t.l,(s=t.a)<1?"hsla("+i+", "+r+"%, "+n+"%, "+s+")":"hsl("+i+", "+r+"%, "+n+"%)";var t,i,r,n,s},e.prototype.toHsv=function(){return t=lE(this.rgba),{h:ke(t.h),s:ke(t.s),v:ke(t.v),a:ke(t.a,3)};var t},e.prototype.invert=function(){return Zr({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Zr(Rm(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Zr(Rm(this.rgba,-t))},e.prototype.grayscale=function(){return Zr(Rm(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Zr(pw(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Zr(pw(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Zr({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):ke(this.rgba.a,3);var i},e.prototype.hue=function(t){var i=eu(this.rgba);return typeof t=="number"?Zr({h:t,s:i.s,l:i.l,a:i.a}):ke(i.h)},e.prototype.isEqual=function(t){return this.toHex()===Zr(t).toHex()},e}(),Zr=function(e){return e instanceof $g?e:new $g(e)},mw=[],gk=function(e){e.forEach(function(t){mw.indexOf(t)<0&&(t($g,Wg),mw.push(t))})};function yk(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var n in i)r[i[n]]=n;var s={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,h,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var f=this.toRgb(),m=1/0,p="black";if(!s.length)for(var v in i)s[v]=new e(i[v]).toRgb();for(var _ in i){var E=(l=f,h=s[_],Math.pow(l.r-h.r,2)+Math.pow(l.g-h.g,2)+Math.pow(l.b-h.b,2));E<m&&(m=E,p=_)}return p}},t.string.push([function(o){var l=o.toLowerCase(),h=l==="transparent"?"#0000":i[l];return h?new e(h).toRgb():null},"name"])}gk([yk]);const ba=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof ba)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,s)=>n===t[s]);if(e!==null&&t!==null){const n=Object.keys(e),s=Object.keys(t);return n.length!==s.length?!1:n.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,i,r]=this._components;return{r:e,g:t,b:i,a:r}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,r]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(r*255),e}toRgbArray(e){e=e??[];const[t,i,r]=this._components;return e[0]=t,e[1]=i,e[2]=r,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,r,n]=ba.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=r,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,n=this._int&255;return t&&(i=i*e+.5|0,r=r*e+.5|0,n=n*e+.5|0),(e*255<<24)+(i<<16)+(r<<8)+n}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,r]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(r*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,r,n]=this._components;return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e}normalize(e){let t,i,r,n;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const s=e;t=(s>>16&255)/255,i=(s>>8&255)/255,r=(s&255)/255,n=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,i,r,n=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,i,r,n=255]=e,t/=255,i/=255,r/=255,n/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=ba.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const s=Zr(e);s.isValid()&&({r:t,g:i,b:r,a:n}=s.rgba,t/=255,i/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=i,this._components[2]=r,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((r,n)=>{e[n]=Math.min(Math.max(r,t),i)}),e)}};let It=ba;It.shared=new ba;It.temp=new ba;It.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function vk(e,t=[]){return xt("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),It.shared.setValue(e).toRgbArray(t)}function hE(e){return xt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),It.shared.setValue(e).toHex()}function _k(e){return xt("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),It.shared.setValue(e).toNumber()}function cE(e){return xt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),It.shared.setValue(e).toNumber()}function xk(){const e=[],t=[];for(let r=0;r<32;r++)e[r]=r,t[r]=r;e[ft.NORMAL_NPM]=ft.NORMAL,e[ft.ADD_NPM]=ft.ADD,e[ft.SCREEN_NPM]=ft.SCREEN,t[ft.NORMAL]=ft.NORMAL_NPM,t[ft.ADD]=ft.ADD_NPM,t[ft.SCREEN]=ft.SCREEN_NPM;const i=[];return i.push(t),i.push(e),i}const Mv=xk();function kv(e,t){return Mv[t?1:0][e]}function wk(e,t,i,r=!0){return xt("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),It.shared.setValue(e).premultiply(t,r).toArray(i??new Float32Array(4))}function Sk(e,t){return xt("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),It.shared.setValue(e).toPremultiplied(t)}function bk(e,t,i,r=!0){return xt("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),It.shared.setValue(e).premultiply(t,r).toArray(i??new Float32Array(4))}const dE=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function fE(e,t=null){const i=e*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let r=0,n=0;r<i;r+=6,n+=4)t[r+0]=n+0,t[r+1]=n+1,t[r+2]=n+2,t[r+3]=n+0,t[r+4]=n+2,t[r+5]=n+3;return t}function _f(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}const Ek={Float32Array,Uint32Array,Int32Array,Uint8Array};function Tk(e,t){let i=0,r=0;const n={};for(let h=0;h<e.length;h++)r+=t[h],i+=e[h].length;const s=new ArrayBuffer(i*4);let o=null,l=0;for(let h=0;h<e.length;h++){const c=t[h],f=e[h],m=_f(f);n[m]||(n[m]=new Ek[m](s)),o=n[m];for(let p=0;p<f.length;p++){const v=(p/c|0)*r+l,_=p%c;o[v+_]=f[p]}l+=c}return new Float32Array(s)}function mu(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function jg(e){return!(e&e-1)&&!!e}function Vg(e){let t=(e>65535?1:0)<<4;e>>>=t;let i=(e>255?1:0)<<3;return e>>>=i,t|=i,i=(e>15?1:0)<<2,e>>>=i,t|=i,i=(e>3?1:0)<<1,e>>>=i,t|=i,t|e>>1}function co(e,t,i){const r=e.length;let n;if(t>=r||i===0)return;i=t+i>r?r-t:i;const s=r-i;for(n=t;n<s;++n)e[n]=e[n+i];e.length=s}function Pn(e){return e===0?0:e<0?-1:1}let Ck=0;function Es(){return++Ck}const pE=class{constructor(e,t,i,r){this.left=e,this.top=t,this.right=i,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let bd=pE;bd.EMPTY=new pE(0,0,0,0);const Xg={},ri=Object.create(null),Ti=Object.create(null);function Pk(){let e;for(e in ri)ri[e].destroy();for(e in Ti)Ti[e].destroy()}function Ak(){let e;for(e in ri)delete ri[e];for(e in Ti)delete Ti[e]}class mE{constructor(t,i,r){this._canvas=nt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||nt.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function gw(e,t,i){for(let r=0,n=4*i*t;r<t;++r,n+=4)if(e[n+3]!==0)return!1;return!0}function yw(e,t,i,r,n){const s=4*t;for(let o=r,l=r*s+4*i;o<=n;++o,l+=s)if(e[l+3]!==0)return!1;return!0}function gE(e){const{width:t,height:i}=e,r=e.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const s=r.getImageData(0,0,t,i).data;let o=0,l=0,h=t-1,c=i-1;for(;l<i&&gw(s,t,l);)++l;if(l===i)return bd.EMPTY;for(;gw(s,t,c);)--c;for(;yw(s,t,o,l,c);)++o;for(;yw(s,t,h,l,c);)--h;return++h,++c,new bd(o,l,h,c)}function yE(e){const t=gE(e),{width:i,height:r}=t;let n=null;if(!t.isEmpty()){const s=e.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");n=s.getImageData(t.left,t.top,i,r)}return{width:i,height:r,data:n}}function Ik(e){const t=dE.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}let fc;function vE(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,fc||(fc=document.createElement("a")),fc.href=e;const i=sE.parse(fc.href),r=!i.port&&t.port===""||i.port===t.port;return i.hostname!==t.hostname||!r||i.protocol!==t.protocol?"anonymous":""}function Nn(e,t=1){var r;const i=(r=nt.RETINA_PREFIX)==null?void 0:r.exec(e);return i?parseFloat(i[1]):t}const Rk=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:Ti,BoundingBox:bd,CanvasRenderTarget:mE,DATA_URI:dE,EventEmitter:Ur,ProgramCache:Xg,TextureCache:ri,clearTextureCache:Ak,correctBlendMode:kv,createIndicesForQuads:fE,decomposeDataUri:Ik,deprecation:xt,destroyTextureCache:Pk,determineCrossOrigin:vE,earcut:Wb,getBufferType:_f,getCanvasBoundingBox:gE,getResolutionOfUrl:Nn,hex2rgb:vk,hex2string:hE,interleaveTypedArrays:Tk,isMobile:Cr,isPow2:jg,isWebGLSupported:oE,log2:Vg,nextPow2:mu,path:ye,premultiplyBlendMode:Mv,premultiplyRgba:wk,premultiplyTint:Sk,premultiplyTintToRgba:bk,removeItems:co,rgb2hex:cE,sayHello:lk,sign:Pn,skipHello:ak,string2hex:_k,trimCanvas:yE,uid:Es,url:sE},Symbol.toStringTag,{value:"Module"}));var st=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(st||{});const Yg=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},vw=(e,t)=>Yg(e).priority??t,dt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Yg).forEach(t=>{t.type.forEach(i=>{var r,n;return(n=(r=this._removeHandlers)[i])==null?void 0:n.call(r,t)})}),this},add(...e){return e.map(Yg).forEach(t=>{t.type.forEach(i=>{const r=this._addHandlers,n=this._queue;r[i]?r[i](t):(n[i]=n[i]||[],n[i].push(t))})}),this},handle(e,t,i){const r=this._addHandlers,n=this._removeHandlers;if(r[e]||n[e])throw new Error(`Extension type ${e} already has a handler`);r[e]=t,n[e]=i;const s=this._queue;return s[e]&&(s[e].forEach(o=>t(o)),delete s[e]),this},handleByMap(e,t){return this.handle(e,i=>{t[i.name]=i.ref},i=>{delete t[i.name]})},handleByList(e,t,i=-1){return this.handle(e,r=>{t.includes(r.ref)||(t.push(r.ref),t.sort((n,s)=>vw(s,i)-vw(n,i)))},r=>{const n=t.indexOf(r.ref);n!==-1&&t.splice(n,1)})}};class Ed{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Mk=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function kk(e){let t="";for(let i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function _E(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const r=Mk.replace(/%forloop%/gi,kk(e));if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))e=e/2|0;else break}return e}const km=0,Dm=1,Om=2,Nm=3,Fm=4,Lm=5;class pn{constructor(){this.data=0,this.blendMode=ft.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<km)}set blend(t){!!(this.data&1<<km)!==t&&(this.data^=1<<km)}get offsets(){return!!(this.data&1<<Dm)}set offsets(t){!!(this.data&1<<Dm)!==t&&(this.data^=1<<Dm)}get culling(){return!!(this.data&1<<Om)}set culling(t){!!(this.data&1<<Om)!==t&&(this.data^=1<<Om)}get depthTest(){return!!(this.data&1<<Nm)}set depthTest(t){!!(this.data&1<<Nm)!==t&&(this.data^=1<<Nm)}get depthMask(){return!!(this.data&1<<Lm)}set depthMask(t){!!(this.data&1<<Lm)!==t&&(this.data^=1<<Lm)}get clockwiseFrontFace(){return!!(this.data&1<<Fm)}set clockwiseFrontFace(t){!!(this.data&1<<Fm)!==t&&(this.data^=1<<Fm)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ft.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new pn;return t.depthTest=!1,t.blend=!0,t}}const Td=[];function Dv(e,t){if(!e)return null;let i="";if(typeof e=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(i=r[1].toLowerCase())}for(let r=Td.length-1;r>=0;--r){const n=Td[r];if(n.test&&n.test(e,i))return new n(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ii{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,r,n,s,o,l,h){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:f}=this;this._aliasCount++;for(let m=0,p=f.length;m<p;m++)f[m][c](t,i,r,n,s,o,l,h);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ii.prototype,{dispatch:{value:Ii.prototype.emit},run:{value:Ii.prototype.emit}});class Oa{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new Ii("setRealSize"),this.onUpdate=new Ii("update"),this.onError=new Ii("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class Za extends Oa{constructor(t,i){const{width:r,height:n}=i||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=t}upload(t,i,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ar.UNPACK);const s=i.realWidth,o=i.realHeight;return r.width===s&&r.height===o?n.texSubImage2D(i.target,0,0,0,s,o,i.format,r.type,this.data):(r.width=s,r.height=o,n.texImage2D(i.target,0,r.internalFormat,s,o,0,i.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const Dk={scaleMode:nn.NEAREST,format:J.RGBA,alphaMode:ar.NPM},ta=class extends Ur{constructor(e=null,t=null){super(),t=Object.assign({},ta.defaultOptions,t);const{alphaMode:i,mipmap:r,anisotropicLevel:n,scaleMode:s,width:o,height:l,wrapMode:h,format:c,type:f,target:m,resolution:p,resourceOptions:v}=t;e&&!(e instanceof Oa)&&(e=Dv(e,v),e.internal=!0),this.resolution=p||nt.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=n,this._wrapMode=h,this._scaleMode=s,this.format=c,this.type=f,this.target=m,this.alphaMode=i,this.uid=Es(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=jg(this.realWidth)&&jg(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ti[this.cacheId],delete ri[this.cacheId],this.cacheId=null),this.dispose(),ta.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=nt.STRICT_TEXTURE_CACHE){const r=typeof e=="string";let n=null;if(r)n=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${Es()}`}n=e._pixiId}let s=Ti[n];if(r&&i&&!s)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return s||(s=new ta(e,t),s.cacheId=n,ta.addToCache(s,n)),s}static fromBuffer(e,t,i,r){e=e||new Float32Array(t*i*4);const n=new Za(e,{width:t,height:i}),s=e instanceof Float32Array?yt.FLOAT:yt.UNSIGNED_BYTE;return new ta(n,Object.assign({},Dk,{type:s},r))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Ti[t]&&Ti[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Ti[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Ti[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Ti[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Ti[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let _t=ta;_t.defaultOptions={mipmap:Nr.POW2,anisotropicLevel:0,scaleMode:nn.LINEAR,wrapMode:an.CLAMP,alphaMode:ar.UNPACK,target:lo.TEXTURE_2D,format:J.RGBA,type:yt.UNSIGNED_BYTE};_t._globalBatch=0;class Cd{constructor(){this.texArray=null,this.blend=0,this.type=Ji.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Ok=0;class ce{constructor(t,i=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=i,this.id=Ok++,this.disposeRunner=new Ii("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Rr.ELEMENT_ARRAY_BUFFER:Rr.ARRAY_BUFFER}get index(){return this.type===Rr.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ce(t)}}class gu{constructor(t,i=0,r=!1,n=yt.FLOAT,s,o,l,h=1){this.buffer=t,this.size=i,this.normalized=r,this.type=n,this.stride=s,this.start=o,this.instance=l,this.divisor=h}destroy(){this.buffer=null}static from(t,i,r,n,s){return new gu(t,i,r,n,s)}}const Nk={Float32Array,Uint32Array,Int32Array,Uint8Array};function Fk(e,t){let i=0,r=0;const n={};for(let h=0;h<e.length;h++)r+=t[h],i+=e[h].length;const s=new ArrayBuffer(i*4);let o=null,l=0;for(let h=0;h<e.length;h++){const c=t[h],f=e[h],m=_f(f);n[m]||(n[m]=new Nk[m](s)),o=n[m];for(let p=0;p<f.length;p++){const v=(p/c|0)*r+l,_=p%c;o[v+_]=f[p]}l+=c}return new Float32Array(s)}const _w={5126:4,5123:2,5121:1};let Lk=0;const Bk={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Fn{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=Lk++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ii("disposeGeometry"),this.refCount=0}addAttribute(t,i,r=0,n=!1,s,o,l,h=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof ce||(i instanceof Array&&(i=new Float32Array(i)),i=new ce(i));const c=t.split("|");if(c.length>1){for(let m=0;m<c.length;m++)this.addAttribute(c[m],i,r,n,s);return this}let f=this.buffers.indexOf(i);return f===-1&&(this.buffers.push(i),f=this.buffers.length-1),this.attributes[t]=new gu(f,r,n,s,o,l,h),this.instanced=this.instanced||h,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ce||(t instanceof Array&&(t=new Uint16Array(t)),t=new ce(t)),t.type=Rr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],r=new ce;let n;for(n in this.attributes){const s=this.attributes[n],o=this.buffers[s.buffer];t.push(o.data),i.push(s.size*_w[s.type]/4),s.buffer=0}for(r.data=Fk(t,i),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Fn;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new ce(this.buffers[i].data.slice(0));for(const i in this.attributes){const r=this.attributes[i];t.attributes[i]=new gu(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Rr.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new Fn,r=[],n=[],s=[];let o;for(let l=0;l<t.length;l++){o=t[l];for(let h=0;h<o.buffers.length;h++)n[h]=n[h]||0,n[h]+=o.buffers[h].data.length,s[h]=0}for(let l=0;l<o.buffers.length;l++)r[l]=new Bk[_f(o.buffers[l].data)](n[l]),i.buffers[l]=new ce(r[l]);for(let l=0;l<t.length;l++){o=t[l];for(let h=0;h<o.buffers.length;h++)r[h].set(o.buffers[h].data,s[h]),s[h]+=o.buffers[h].data.length}if(i.attributes=o.attributes,o.indexBuffer){i.indexBuffer=i.buffers[o.buffers.indexOf(o.indexBuffer)],i.indexBuffer.type=Rr.ELEMENT_ARRAY_BUFFER;let l=0,h=0,c=0,f=0;for(let m=0;m<o.buffers.length;m++)if(o.buffers[m]!==o.indexBuffer){f=m;break}for(const m in o.attributes){const p=o.attributes[m];(p.buffer|0)===f&&(h+=p.size*_w[p.type]/4)}for(let m=0;m<t.length;m++){const p=t[m].indexBuffer.data;for(let v=0;v<p.length;v++)i.indexBuffer.data[v+c]+=l;l+=t[m].buffers[f].data.length/h,c+=p.length}}return i}}class Ov extends Fn{constructor(t=!1){super(),this._buffer=new ce(null,t,!1),this._indexBuffer=new ce(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,yt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,yt.FLOAT).addAttribute("aColor",this._buffer,4,!0,yt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,yt.FLOAT).addIndex(this._indexBuffer)}}const yu=Math.PI*2,xE=180/Math.PI,wE=Math.PI/180;var Ne=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Ne||{});class ct{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new ct(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const pc=[new ct,new ct,new ct,new ct];let St=class qg{constructor(t=0,i=0,r=0,n=0){this.x=Number(t),this.y=Number(i),this.width=Number(r),this.height=Number(n),this.type=Ne.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new qg(0,0,0,0)}clone(){return new qg(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const k=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=k)return!1;const j=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>j}const r=this.left,n=this.right,s=this.top,o=this.bottom;if(n<=r||o<=s)return!1;const l=pc[0].set(t.left,t.top),h=pc[1].set(t.left,t.bottom),c=pc[2].set(t.right,t.top),f=pc[3].set(t.right,t.bottom);if(c.x<=l.x||h.y<=l.y)return!1;const m=Math.sign(i.a*i.d-i.b*i.c);if(m===0||(i.apply(l,l),i.apply(h,h),i.apply(c,c),i.apply(f,f),Math.max(l.x,h.x,c.x,f.x)<=r||Math.min(l.x,h.x,c.x,f.x)>=n||Math.max(l.y,h.y,c.y,f.y)<=s||Math.min(l.y,h.y,c.y,f.y)>=o))return!1;const p=m*(h.y-l.y),v=m*(l.x-h.x),_=p*r+v*s,E=p*n+v*s,T=p*r+v*o,b=p*n+v*o;if(Math.max(_,E,T,b)<=p*l.x+v*l.y||Math.min(_,E,T,b)>=p*f.x+v*f.y)return!1;const S=m*(l.y-c.y),w=m*(c.x-l.x),P=S*r+w*s,I=S*n+w*s,F=S*r+w*o,O=S*n+w*o;return!(Math.max(P,I,F,O)<=S*l.x+w*l.y||Math.min(P,I,F,O)>=S*f.x+w*f.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(r-i,0),this.y=n,this.height=Math.max(s-n,0),this}ceil(t=1,i=.001){const r=Math.ceil((this.x+this.width-i)*t)/t,n=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=r-i,this.y=n,this.height=s-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};class xf{constructor(t=0,i=0,r=0){this.x=t,this.y=i,this.radius=r,this.type=Ne.CIRC}clone(){return new xf(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,s=this.y-i;return n*=n,s*=s,n+s<=r}getBounds(){return new St(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class wf{constructor(t=0,i=0,r=0,n=0){this.x=t,this.y=i,this.width=r,this.height=n,this.type=Ne.ELIP}clone(){return new wf(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let r=(t-this.x)/this.width,n=(i-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new St(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class fo{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const r=[];for(let n=0,s=i.length;n<s;n++)r.push(i[n].x,i[n].y);i=r}this.points=i,this.type=Ne.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new fo(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let r=!1;const n=this.points.length/2;for(let s=0,o=n-1;s<n;o=s++){const l=this.points[s*2],h=this.points[s*2+1],c=this.points[o*2],f=this.points[o*2+1];h>i!=f>i&&t<(c-l)*((i-h)/(f-h))+l&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}}class Sf{constructor(t=0,i=0,r=0,n=0,s=20){this.x=t,this.y=i,this.width=r,this.height=n,this.radius=s,this.type=Ne.RREC}clone(){return new Sf(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+r&&i<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),s=i-(this.y+r);const o=r*r;if(n*n+s*s<=o||(n=t-(this.x+this.width-r),n*n+s*s<=o)||(s=i-(this.y+this.height-r),n*n+s*s<=o)||(n=t-(this.x+r),n*n+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Yt{constructor(t=1,i=0,r=0,n=1,s=0,o=0){this.array=null,this.a=t,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,r,n,s,o){return this.a=t,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=o,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const r=i||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,i){i=i||new ct;const r=t.x,n=t.y;return i.x=this.a*r+this.c*n+this.tx,i.y=this.b*r+this.d*n+this.ty,i}applyInverse(t,i){i=i||new ct;const r=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return i.x=this.d*r*n+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,i.y=this.a*r*s+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),r=Math.sin(t),n=this.a,s=this.c,o=this.tx;return this.a=n*i-this.b*r,this.b=n*r+this.b*i,this.c=s*i-this.d*r,this.d=s*r+this.d*i,this.tx=o*i-this.ty*r,this.ty=o*r+this.ty*i,this}append(t){const i=this.a,r=this.b,n=this.c,s=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*r+t.b*s,this.c=t.c*i+t.d*n,this.d=t.c*r+t.d*s,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*s+this.ty,this}setTransform(t,i,r,n,s,o,l,h,c){return this.a=Math.cos(l+c)*s,this.b=Math.sin(l+c)*s,this.c=-Math.sin(l-h)*o,this.d=Math.cos(l-h)*o,this.tx=t-(r*this.a+n*this.c),this.ty=i-(r*this.b+n*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,r=this.b,n=this.c,s=this.d,o=t.pivot,l=-Math.atan2(-n,s),h=Math.atan2(r,i),c=Math.abs(l+h);return c<1e-5||Math.abs(yu-c)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=l,t.skew.y=h),t.scale.x=Math.sqrt(i*i+r*r),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*i+o.y*n),t.position.y=this.ty+(o.x*r+o.y*s),t}invert(){const t=this.a,i=this.b,r=this.c,n=this.d,s=this.tx,o=t*n-i*r;return this.a=n/o,this.b=-i/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*s)/o,this.ty=-(t*this.ty-i*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Yt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Yt}static get TEMP_MATRIX(){return new Yt}}const Qs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ks=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Zs=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Js=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Qg=[],SE=[],mc=Math.sign;function Uk(){for(let e=0;e<16;e++){const t=[];Qg.push(t);for(let i=0;i<16;i++){const r=mc(Qs[e]*Qs[i]+Zs[e]*Ks[i]),n=mc(Ks[e]*Qs[i]+Js[e]*Ks[i]),s=mc(Qs[e]*Zs[i]+Zs[e]*Js[i]),o=mc(Ks[e]*Zs[i]+Js[e]*Js[i]);for(let l=0;l<16;l++)if(Qs[l]===r&&Ks[l]===n&&Zs[l]===s&&Js[l]===o){t.push(l);break}}}for(let e=0;e<16;e++){const t=new Yt;t.set(Qs[e],Ks[e],Zs[e],Js[e],0,0),SE.push(t)}}Uk();const Jt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Qs[e],uY:e=>Ks[e],vX:e=>Zs[e],vY:e=>Js[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Qg[e][t],sub:(e,t)=>Qg[e][Jt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?Jt.S:Jt.N:Math.abs(t)*2<=Math.abs(e)?e>0?Jt.E:Jt.W:t>0?e>0?Jt.SE:Jt.SW:e>0?Jt.NE:Jt.NW,matrixAppendRotationInv:(e,t,i=0,r=0)=>{const n=SE[Jt.inv(t)];n.tx=i,n.ty=r,e.append(n)}};class sn{constructor(t,i,r=0,n=0){this._x=r,this._y=n,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new sn(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const bE=class{constructor(){this.worldTransform=new Yt,this.localTransform=new Yt,this.position=new sn(this.onChange,this,0,0),this.scale=new sn(this.onChange,this,1,1),this.pivot=new sn(this.onChange,this,0,0),this.skew=new sn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const i=e.worldTransform,r=this.worldTransform;r.a=t.a*i.a+t.b*i.c,r.b=t.a*i.b+t.b*i.d,r.c=t.c*i.a+t.d*i.c,r.d=t.c*i.b+t.d*i.d,r.tx=t.tx*i.a+t.ty*i.c+i.tx,r.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Zu=bE;Zu.IDENTITY=new bE;var zk=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Hk=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function xw(e,t,i){const r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}function Bm(e){const t=new Array(e);for(let i=0;i<t.length;i++)t[i]=!1;return t}function EE(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Bm(2*t);case"bvec3":return Bm(3*t);case"bvec4":return Bm(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const po=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],Gk={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Wk={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function $k(e,t){var r;const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in e.uniforms){const s=t[n];if(!s){(r=e.uniforms[n])!=null&&r.group&&(e.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=e.uniforms[n];let l=!1;for(let h=0;h<po.length;h++)if(po[h].test(s,o)){i.push(po[h].code(n,o)),l=!0;break}if(!l){const c=(s.size===1&&!s.isArray?Gk:Wk)[s.type].replace("location",`ud["${n}"].location`);i.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const TE={};let Yo=TE;function CE(){if(Yo===TE||Yo!=null&&Yo.isContextLost()){const e=nt.ADAPTER.createCanvas();let t;nt.PREFER_ENV>=As.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Yo=t}return Yo}let gc;function jk(){if(!gc){gc=Pi.MEDIUM;const e=CE();e&&e.getShaderPrecisionFormat&&(gc=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?Pi.HIGH:Pi.MEDIUM)}return gc}function ww(e,t){const i=e.getShaderSource(t).split(`
`).map((c,f)=>`${f}: ${c}`),r=e.getShaderInfoLog(t),n=r.split(`
`),s={},o=n.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),l=[""];o.forEach(c=>{i[c-1]=`%c${i[c-1]}%c`,l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=i.join(`
`);l[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...l),console.groupEnd()}function Vk(e,t,i,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||ww(e,i),e.getShaderParameter(r,e.COMPILE_STATUS)||ww(e,r),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const Xk={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function PE(e){return Xk[e]}let yc=null;const Sw={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function AE(e,t){if(!yc){const i=Object.keys(Sw);yc={};for(let r=0;r<i.length;++r){const n=i[r];yc[e[n]]=Sw[n]}}return yc[t]}function bw(e,t,i){if(e.substring(0,9)!=="precision"){let r=t;return t===Pi.HIGH&&i!==Pi.HIGH&&(r=Pi.MEDIUM),`precision ${r} float;
${e}`}else if(i!==Pi.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let Pl;function IE(){if(typeof Pl=="boolean")return Pl;try{Pl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Pl=!1}return Pl}let Yk=0;const vc={},ea=class{constructor(e,t,i="pixi-shader",r={}){this.extra={},this.id=Yk++,this.vertexSrc=e||ea.defaultVertexSrc,this.fragmentSrc=t||ea.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),vc[i]?(vc[i]++,i+=`-${vc[i]}`):vc[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=bw(this.vertexSrc,ea.defaultVertexPrecision,Pi.HIGH),this.fragmentSrc=bw(this.fragmentSrc,ea.defaultFragmentPrecision,jk())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Hk}static get defaultFragmentSrc(){return zk}static from(e,t,i){const r=e+t;let n=Xg[r];return n||(Xg[r]=n=new ea(e,t,i)),n}};let er=ea;er.defaultVertexPrecision=Pi.HIGH;er.defaultFragmentPrecision=Cr.apple.device?Pi.HIGH:Pi.MEDIUM;let qk=0;class rr{constructor(t,i,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=qk++,this.static=!!i,this.ubo=!!r,t instanceof ce?(this.buffer=t,this.buffer.type=Rr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ce(new Float32Array(1)),this.buffer.type=Rr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,r){if(!this.ubo)this.uniforms[t]=new rr(i,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,r){return new rr(t,i,r)}static uboFrom(t,i){return new rr(t,i??!0,!0)}}class kr{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof rr?this.uniformGroup=i:this.uniformGroup=new rr(i):this.uniformGroup=new rr({}),this.disposeRunner=new Ii("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const r in i.uniforms){const n=i.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,r){const n=er.from(t,i);return new kr(n,r)}}class RE{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const r=new Int32Array(t);for(let s=0;s<t;s++)r[s]=s;this.defaultGroupCache[t]=rr.from({uSamplers:r},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new er(this.vertexSrc,n)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Yt,default:this.defaultGroupCache[t]};return new kr(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let r=0;r<t;r++)r>0&&(i+=`
else `),r<t-1&&(i+=`if(vTextureId < ${r}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class Pd{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function Qk(){return!Cr.apple.device}function Kk(e){let t=!0;const i=nt.ADAPTER.getNavigator();if(Cr.tablet||Cr.phone){if(Cr.apple.device){const r=i.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(t=!1)}if(Cr.android.device){const r=i.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(t=!1)}}return t?e:4}class Ju{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var Zk=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Jk=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _r=class extends Ju{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Ov,this.vertexSize=6,this.state=pn.for2d(),this.size=_r.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??Kk(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??Qk(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return xt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Jk}static get defaultFragmentTemplate(){return Zk}setShaderGenerator({vertex:e=_r.defaultVertexSrc,fragment:t=_r.defaultFragmentTemplate}={}){this.shaderGenerator=new RE(e,t)}contextChange(){const e=this.renderer.gl;nt.PREFER_ENV===As.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),_r.defaultMaxTextures),this.maxTextures=_E(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=_r,i=this.size/4,r=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new Cd);for(;t.length<r;)t.push(new Pd);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=_r._textureArrayPool,r=this.renderer.batch,n=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++_t._globalBatch,l=0,h=i[0],c=0;r.copyBoundTextures(n,t);for(let f=0;f<this._bufferSize;++f){const m=e[f];e[f]=null,m._batchEnabled!==o&&(h.count>=t&&(r.boundArray(h,n,o,t),this.buildDrawCalls(h,c,f),c=f,h=i[++l],++o),m._batchEnabled=o,m.touched=s,h.elements[h.count++]=m)}h.count>0&&(r.boundArray(h,n,o,t),this.buildDrawCalls(h,c,this._bufferSize),++l,++o);for(let f=0;f<n.length;f++)n[f]=null;_t._globalBatch=o}buildDrawCalls(e,t,i){const{_bufferedElements:r,_attributeBuffer:n,_indexBuffer:s,vertexSize:o}=this,l=_r._drawCallPool;let h=this._dcIndex,c=this._aIndex,f=this._iIndex,m=l[h];m.start=this._iIndex,m.texArray=e;for(let p=t;p<i;++p){const v=r[p],_=v._texture.baseTexture,E=Mv[_.alphaMode?1:0][v.blendMode];r[p]=null,t<p&&m.blend!==E&&(m.size=f-m.start,t=p,m=l[++h],m.texArray=e,m.start=f),this.packInterleavedGeometry(v,n,s,c,f),c+=v.vertexData.length/2*o,f+=v.indices.length,m.blend=E}t<i&&(m.size=f-m.start,++h),this._dcIndex=h,this._aIndex=c,this._iIndex=f}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;_r.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,r=_r._drawCallPool;let n=null;for(let s=0;s<e;s++){const{texArray:o,type:l,size:h,start:c,blend:f}=r[s];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=f,i.set(this.state),t.drawElements(l,h,t.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),_r.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=mu(Math.ceil(e/8)),i=Vg(t),r=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new Ed(r*this.vertexSize*4)),n}getIndexBuffer(e){const t=mu(Math.ceil(e/12)),i=Vg(t),r=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n}packInterleavedGeometry(e,t,i,r,n){const{uint32View:s,float32View:o}=t,l=r/this.vertexSize,h=e.uvs,c=e.indices,f=e.vertexData,m=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),v=It.shared.setValue(e._tintRGB).toPremultiplied(p,e._texture.baseTexture.alphaMode>0);for(let _=0;_<f.length;_+=2)o[r++]=f[_],o[r++]=f[_+1],o[r++]=h[_],o[r++]=h[_+1],s[r++]=v,o[r++]=m;for(let _=0;_<c.length;_++)i[n++]=l+c[_]}};let qi=_r;qi.defaultBatchSize=4096;qi.extension={name:"batch",type:st.RendererPlugin};qi._drawCallPool=[];qi._textureArrayPool=[];dt.add(qi);var tD=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,eD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const zl=class extends kr{constructor(e,t,i){const r=er.from(e||zl.defaultVertexSrc,t||zl.defaultFragmentSrc);super(r,i),this.padding=0,this.resolution=zl.defaultResolution,this.multisample=zl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new pn}apply(e,t,i,r,n){e.applyFilter(this,t,i,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return eD}static get defaultFragmentSrc(){return tD}};let Fe=zl;Fe.defaultResolution=1;Fe.defaultMultisample=me.NONE;class th{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new It(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:i,background:r,backgroundAlpha:n}=t,s=r??i;s!==void 0&&(this.color=s),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}th.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};th.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"background"};dt.add(th);class Nv{constructor(t){this.renderer=t,this.emptyRenderer=new Ju(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:r}=this.renderer.texture;for(let n=i-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,i,r,n){const{elements:s,ids:o,count:l}=t;let h=0;for(let c=0;c<l;c++){const f=s[c],m=f._batchLocation;if(m>=0&&m<n&&i[m]===f){o[c]=m;continue}for(;h<n;){const p=i[h];if(p&&p._batchEnabled===r&&p._batchLocation===h){h++;continue}o[c]=h,f._batchLocation=h,i[h]=f;break}}}destroy(){this.renderer=null}}Nv.extension={type:st.RendererSystem,name:"batch"};dt.add(Nv);let Ew=0;class eh{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Ew++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,r=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Ew++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let r;if(nt.PREFER_ENV>=As.WEBGL2&&(r=t.getContext("webgl2",i)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}eh.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};eh.extension={type:st.RendererSystem,name:"context"};dt.add(eh);class iD extends Za{upload(t,i,r){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ar.UNPACK);const s=i.realWidth,o=i.realHeight;return r.width===s&&r.height===o?n.texSubImage2D(i.target,0,0,0,s,o,i.format,r.type,this.data):(r.width=s,r.height=o,n.texImage2D(i.target,0,r.internalFormat,s,o,0,i.format,r.type,this.data)),!0}}class Ad{constructor(t,i){this.width=Math.round(t||100),this.height=Math.round(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ii("disposeFramebuffer"),this.multisample=me.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new _t(null,{scaleMode:nn.NEAREST,resolution:1,mipmap:Nr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new _t(new iD(null,{width:this.width,height:this.height}),{scaleMode:nn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Nr.OFF,format:J.DEPTH_COMPONENT,type:yt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],s=n.resolution;n.setSize(t/s,i/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,i/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Fv extends _t{constructor(t={}){if(typeof t=="number"){const i=arguments[0],r=arguments[1],n=arguments[2],s=arguments[3];t={width:i,height:r,scaleMode:n,resolution:s}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=me.NONE),super(null,t),this.mipmap=Nr.OFF,this.valid=!0,this._clear=new It([0,0,0,0]),this.framebuffer=new Ad(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ln extends Oa{constructor(t){const i=t,r=i.naturalWidth||i.videoWidth||i.width,n=i.naturalHeight||i.videoHeight||i.height;super(r,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,r){r===void 0&&!i.startsWith("data:")?t.crossOrigin=vE(i):r!==!1&&(t.crossOrigin=typeof r=="string"?r:"anonymous")}upload(t,i,r,n){const s=t.gl,o=i.realWidth,l=i.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ar.UNPACK),!this.noSubImage&&i.target===s.TEXTURE_2D&&r.width===o&&r.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,i.format,r.type,n):(r.width=o,r.height=l,s.texImage2D(i.target,0,r.internalFormat,i.format,r.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(i,r),super.update()}dispose(){this.source=null}}class Lv extends Ln{constructor(t,i){if(i=i||{},typeof t=="string"){const r=new Image;Ln.crossOrigin(r,t,i.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??nt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,r)=>{const n=this.source;this.url=n.src;const s=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?i(this.process()):i(this))};n.complete&&n.src?s():(n.onload=s,n.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,r=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then(n=>n.blob()).then(n=>i(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ar.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,r){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,r,this.bitmap),!this.preserveBitmap){let n=!0;const s=i._glTextures;for(const o in s){const l=s[o];if(l!==r&&l.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Bv{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,r){const n=i.width,s=i.height;if(r){const o=t.width/2/n,l=t.height/2/s,h=t.x/n+o,c=t.y/s+l;r=Jt.add(r,Jt.NW),this.x0=h+o*Jt.uX(r),this.y0=c+l*Jt.uY(r),r=Jt.add(r,2),this.x1=h+o*Jt.uX(r),this.y1=c+l*Jt.uY(r),r=Jt.add(r,2),this.x2=h+o*Jt.uX(r),this.y2=c+l*Jt.uY(r),r=Jt.add(r,2),this.x3=h+o*Jt.uX(r),this.y3=c+l*Jt.uY(r)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Tw=new Bv;function _c(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class tt extends Ur{constructor(t,i,r,n,s,o,l){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new St(0,0,1,1)),t instanceof tt&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=n,this.valid=!1,this._uvs=Tw,this.uvMatrix=null,this.orig=r||i,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ct(o.x,o.y):new ct(0,0),this.defaultBorders=l,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i!=null&&i.url&&ri[i.url]&&tt.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,tt.removeFromCache(this),this.textureCacheIds=null}clone(){var n;const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),r=new tt(this.baseTexture,!this.noFrame&&t,i,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===Tw&&(this._uvs=new Bv),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},r=nt.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let s=null;if(n)s=t;else if(t instanceof _t){if(!t.cacheId){const l=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t.cacheId=`${l}-${Es()}`,_t.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const l=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t._pixiId=`${l}_${Es()}`}s=t._pixiId}let o=ri[s];if(n&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof _t)?(i.resolution||(i.resolution=Nn(t)),o=new tt(new _t(t,i)),o.baseTexture.cacheId=s,_t.addToCache(o.baseTexture,s),tt.addToCache(o,s)):!o&&t instanceof _t&&(o=new tt(t),tt.addToCache(o,s)),o}static fromURL(t,i){const r=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),n=tt.from(t,Object.assign({resourceOptions:r},i),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(()=>Promise.resolve(n))}static fromBuffer(t,i,r,n){return new tt(_t.fromBuffer(t,i,r,n))}static fromLoader(t,i,r,n){const s=new _t(t,Object.assign({scaleMode:_t.defaultOptions.scaleMode,resolution:Nn(i)},n)),{resource:o}=s;o instanceof Lv&&(o.url=i);const l=new tt(s);return r||(r=i),_t.addToCache(l.baseTexture,r),tt.addToCache(l,r),r!==i&&(_t.addToCache(l.baseTexture,i),tt.addToCache(l,i)),l.baseTexture.valid?Promise.resolve(l):new Promise(h=>{l.baseTexture.once("loaded",()=>h(l))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),ri[i]&&ri[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),ri[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=ri[t];if(i){const r=i.textureCacheIds.indexOf(t);return r>-1&&i.textureCacheIds.splice(r,1),delete ri[t],i}}else if(t!=null&&t.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)ri[t.textureCacheIds[i]]===t&&delete ri[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:r,width:n,height:s}=t,o=i+n>this.baseTexture.width,l=r+s>this.baseTexture.height;if(o||l){const h=o&&l?"and":"or",c=`X: ${i} + ${n} = ${i+n} > ${this.baseTexture.width}`,f=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${h} ${f}`)}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return tt._EMPTY||(tt._EMPTY=new tt(new _t),_c(tt._EMPTY),_c(tt._EMPTY.baseTexture)),tt._EMPTY}static get WHITE(){if(!tt._WHITE){const t=nt.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),tt._WHITE=new tt(_t.from(t)),_c(tt._WHITE),_c(tt._WHITE.baseTexture)}return tt._WHITE}}class Rs extends tt{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,r=!0){const n=this.baseTexture.resolution,s=Math.round(t*n)/n,o=Math.round(i*n)/n;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new Rs(new Fv(t))}}class Uv{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,r=me.NONE){const n=new Fv(Object.assign({width:t,height:i,resolution:1,multisample:r},this.textureOptions));return new Rs(n)}getOptimalTexture(t,i,r=1,n=me.NONE){let s;t=Math.ceil(t*r-1e-6),i=Math.ceil(i*r-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=mu(t),i=mu(i),s=((t&65535)<<16|i&65535)>>>0,n>1&&(s+=n*4294967296)):s=n>1?-n:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,i,n)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(t,i,r){const n=this.getOptimalTexture(t.width,t.height,i||t.resolution,r||me.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const r=this.texturePool[i];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const r=this.texturePool[i];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Uv.SCREEN_KEY=-1;class ME extends Fn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class zv extends Fn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ce(this.vertices),this.uvBuffer=new ce(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+i.width/t.width,this.uvs[3]=n,this.uvs[4]=r+i.width/t.width,this.uvs[5]=n+i.height/t.height,this.uvs[6]=r,this.uvs[7]=n+i.height/t.height,r=i.x,n=i.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+i.width,this.vertices[3]=n,this.vertices[4]=r+i.width,this.vertices[5]=n+i.height,this.vertices[6]=r,this.vertices[7]=n+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class kE{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=me.NONE,this.sourceFrame=new St,this.destinationFrame=new St,this.bindingSourceFrame=new St,this.bindingDestinationFrame=new St,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const xc=[new ct,new ct,new ct,new ct],Um=new Yt;class Hv{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Uv,this.statePool=[],this.quad=new ME,this.quadUv=new zv,this.tempRect=new St,this.activeState={},this.globalUniforms=new rr({outputFrame:new St,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const r=this.renderer,n=this.defaultFilterStack,s=this.statePool.pop()||new kE,o=this.renderer.renderTexture;let l=i[0].resolution,h=i[0].multisample,c=i[0].padding,f=i[0].autoFit,m=i[0].legacy??!0;for(let _=1;_<i.length;_++){const E=i[_];l=Math.min(l,E.resolution),h=Math.min(h,E.multisample),c=this.useMaxPadding?Math.max(c,E.padding):c+E.padding,f=f&&E.autoFit,m=m||(E.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(s),s.resolution=l,s.multisample=h,s.legacy=m,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(c);const p=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(Um.copyFrom(r.projection.transform).invert(),p),f?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,h),s.filters=i,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,v),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),r=i.filters;this.activeState=i;const n=this.globalUniforms.uniforms;n.outputFrame=i.sourceFrame,n.resolution=i.resolution;const s=n.inputSize,o=n.inputPixel,l=n.inputClamp;if(s[0]=i.destinationFrame.width,s[1]=i.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*i.resolution),o[1]=Math.round(s[1]*i.resolution),o[2]=1/o[0],o[3]=1/o[1],l[0]=.5*o[2],l[1]=.5*o[3],l[2]=i.sourceFrame.width*s[2]-.5*o[2],l[3]=i.sourceFrame.height*s[3]-.5*o[3],i.legacy){const c=n.filterArea;c[0]=i.destinationFrame.width,c[1]=i.destinationFrame.height,c[2]=i.sourceFrame.x,c[3]=i.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const h=t[t.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,i.renderTexture,h.renderTexture,br.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let c=i.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,i.resolution);f.filterFrame=c.filterFrame;let m=0;for(m=0;m<r.length-1;++m){m===1&&i.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,i.resolution),f.filterFrame=c.filterFrame),r[m].apply(this,c,f,br.CLEAR,i);const p=c;c=f,f=p}r[m].apply(this,c,h.renderTexture,br.BLEND,i),m>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=br.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,r.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=n.stateId&1||this.forceClear;(i===br.CLEAR||i===br.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,r,n){const s=this.renderer;s.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Ji.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Ji.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:s}=i._texture,o=t.set(n.width,0,0,n.height,r.x,r.y),l=i.worldTransform.copyTo(Yt.TEMP_MATRIX);return l.invert(),o.prepend(l),o.scale(1/s.width,1/s.height),o.translate(i.anchor.x,i.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,r=1,n=me.NONE){return this.texturePool.getOptimalTexture(t,i,r,n)}getFilterTexture(t,i,r){if(typeof t=="number"){const s=t;t=i,i=s}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,r||me.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const r=xc[0],n=xc[1],s=xc[2],o=xc[3];r.set(i.left,i.top),n.set(i.left,i.bottom),s.set(i.right,i.top),o.set(i.right,i.bottom),t.apply(r,r),t.apply(n,n),t.apply(s,s),t.apply(o,o);const l=Math.min(r.x,n.x,s.x,o.x),h=Math.min(r.y,n.y,s.y,o.y),c=Math.max(r.x,n.x,s.x,o.x),f=Math.max(r.y,n.y,s.y,o.y);i.x=l,i.y=h,i.width=c-l,i.height=f-h}roundFrame(t,i,r,n,s){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:l,c:h,d:c}=s;if((Math.abs(l)>1e-4||Math.abs(h)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?Um.copyFrom(s):Um.identity(),s.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(s,t),t.ceil(i),this.transformAABB(s.invert(),t)}}}Hv.extension={type:st.RendererSystem,name:"filter"};dt.add(Hv);class DE{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=me.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const rD=new St;class Gv{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ad(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new St,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;nt.PREFER_ENV===As.WEBGL_LEGACY&&(i=null,r=null),i?t.drawBuffers=n=>i.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,r=0){const{gl:n}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=r),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const l=t.colorTextures[o];this.renderer.texture.unbind(l.parentTextureArray||l)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const o=i.width>>r,l=i.height>>r,h=o/i.width;this.setViewport(i.x*h,i.y*h,o,l)}else{const o=t.width>>r,l=t.height>>r;this.setViewport(0,0,o,l)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,r,n){const s=this.viewport;t=Math.round(t),i=Math.round(i),r=Math.round(r),n=Math.round(n),(s.width!==r||s.height!==n||s.x!==t||s.y!==i)&&(s.x=t,s.y=i,s.width=r,s.height=n,this.gl.viewport(t,i,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,r,n,s=gd.COLOR|gd.DEPTH){const{gl:o}=this;o.clearColor(t,i,r,n),o.clear(s)}initFramebuffer(t){const{gl:i}=this,r=new DE(i.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:i}=this,r=t.glFramebuffers[this.CONTEXT_UID];r.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let s=n.length;i.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const l=n[o],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),o===0&&r.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const l=[];for(let h=0;h<o;h++){const c=s[h],f=c.parentTextureArray||c;this.renderer.texture.bind(f,0),h===0&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+h,c.target,f._glTextures[this.CONTEXT_UID].texture,i),l.push(r.COLOR_ATTACHMENT0+h))}if(l.length>1&&r.drawBuffers(l),t.depthTexture&&this.writeDepthTexture){const c=t.depthTexture;this.renderer.texture.bind(c,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,i)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil)):n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let r=me.NONE;if(t<=1||i===null)return r;for(let n=0;n<i.length;n++)if(i[n]<=t){r=i[n];break}return r===1&&(r=me.NONE),r}blit(t,i,r){const{current:n,renderer:s,gl:o,CONTEXT_UID:l}=this;if(s.context.webGLVersion!==2||!n)return;const h=n.glFramebuffers[l];if(!h)return;if(!t){if(!h.msaaBuffer)return;const f=n.colorTextures[0];if(!f)return;h.blitFramebuffer||(h.blitFramebuffer=new Ad(n.width,n.height),h.blitFramebuffer.addColorTexture(0,f)),t=h.blitFramebuffer,t.colorTextures[0]!==f&&(t.colorTextures[0]=f,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}i||(i=rD,i.width=n.width,i.height=n.height),r||(r=i);const c=i.width===r.width&&i.height===r.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(i.left,i.top,i.right,i.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,i){const r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),i||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,i)}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<i.length;r++)this.disposeFramebuffer(i[r],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil)return;t.stencil=!0;const r=t.width,n=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),i.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,i.multisample,s.DEPTH24_STENCIL8,r,n):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,r,n),i.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new St}destroy(){this.renderer=null}}Gv.extension={type:st.RendererSystem,name:"framebuffer"};dt.add(Gv);const zm={5126:4,5123:2,5121:1};class Wv{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;nt.PREFER_ENV===As.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=()=>r.createVertexArrayOES(),t.bindVertexArray=n=>r.bindVertexArrayOES(n),t.deleteVertexArray=n=>r.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const r=t.getExtension("ANGLE_instanced_arrays");r?(t.vertexAttribDivisor=(n,s)=>r.vertexAttribDivisorANGLE(n,s),t.drawElementsInstanced=(n,s,o,l,h)=>r.drawElementsInstancedANGLE(n,s,o,l,h),t.drawArraysInstanced=(n,s,o,l)=>r.drawArraysInstancedANGLE(n,s,o,l)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:r}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},s=!0);const o=n[i.program.id]||this.initGeometryVao(t,i,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];i.update(n)}}checkCompatibility(t,i){const r=t.attributes,n=i.attributeData;for(const s in n)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,i){const r=t.attributes,n=i.attributeData,s=["g",t.id];for(const o in r)n[o]&&s.push(o,n[o].location);return s.join("-")}initGeometryVao(t,i,r=!0){const n=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,l=i.program;l.glPrograms[s]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,l);const h=this.getSignature(t,l),c=t.glVertexArrayObjects[this.CONTEXT_UID];let f=c[h];if(f)return c[l.id]=f,f;const m=t.buffers,p=t.attributes,v={},_={};for(const E in m)v[E]=0,_[E]=0;for(const E in p)!p[E].size&&l.attributeData[E]?p[E].size=l.attributeData[E].size:p[E].size||console.warn(`PIXI Geometry attribute '${E}' size cannot be determined (likely the bound shader does not have the attribute)`),v[p[E].buffer]+=p[E].size*zm[p[E].type];for(const E in p){const T=p[E],b=T.size;T.stride===void 0&&(v[T.buffer]===b*zm[T.type]?T.stride=0:T.stride=v[T.buffer]),T.start===void 0&&(T.start=_[T.buffer],_[T.buffer]+=b*zm[T.type])}f=n.createVertexArray(),n.bindVertexArray(f);for(let E=0;E<m.length;E++){const T=m[E];o.bind(T),r&&T._glBuffers[s].refCount++}return this.activateVao(t,l),c[l.id]=f,c[h]=f,n.bindVertexArray(null),o.unbind(Rr.ARRAY_BUFFER),f}disposeGeometry(t,i){var l;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,o=(l=this.renderer)==null?void 0:l.buffer;if(t.disposeRunner.remove(this),!!r){if(o)for(let h=0;h<s.length;h++){const c=s[h]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!i&&o.dispose(s[h],i))}if(!i){for(const h in r)if(h[0]==="g"){const c=r[h];this._activeVao===c&&this.unbind(),n.deleteVertexArray(c)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let r=0;r<i.length;r++)this.disposeGeometry(this.managedGeometries[i[r]],t)}activateVao(t,i){const r=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,l=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let h=null;for(const c in l){const f=l[c],m=o[f.buffer],p=m._glBuffers[n];if(i.attributeData[c]){h!==p&&(s.bind(m),h=p);const v=i.attributeData[c].location;if(r.enableVertexAttribArray(v),r.vertexAttribPointer(v,f.size,f.type||r.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)r.vertexAttribDivisor(v,f.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,r,n){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const l=o.indexBuffer.data.BYTES_PER_ELEMENT,h=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,i||o.indexBuffer.data.length,h,(r||0)*l,n||1):s.drawElements(t,i||o.indexBuffer.data.length,h,(r||0)*l):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,r,i||o.getSize(),n||1):s.drawArrays(t,r,i||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Wv.extension={type:st.RendererSystem,name:"geometry"};dt.add(Wv);const Cw=new Yt;class bf{constructor(t,i){this._texture=t,this.mapCoord=new Yt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const s=t[n],o=t[n+1];i[n]=s*r.a+o*r.c+r.tx,i[n+1]=s*r.b+o*r.d+r.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const r=i._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=i.orig,s=i.trim;s&&(Cw.set(n.width/s.width,0,0,n.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Cw));const o=i.baseTexture,l=this.uClampFrame,h=this.clampMargin/o.resolution,c=this.clampOffset;return l[0]=(i._frame.x+h+c)/o.width,l[1]=(i._frame.y+h+c)/o.height,l[2]=(i._frame.x+i._frame.width-h+c)/o.width,l[3]=(i._frame.y+i._frame.height-h+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=i._frame.width===o.width&&i._frame.height===o.height&&i.rotate===0,!0}}var nD=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,sD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class OE extends Fe{constructor(t,i,r){let n=null;typeof t!="string"&&i===void 0&&r===void 0&&(n=t,t=void 0,i=void 0,r=void 0),super(t||sD,i||nD,r),this.maskSprite=n,this.maskMatrix=new Yt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,r,n){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new bf(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,i,r,n))}}class NE{constructor(t=null){this.type=_e.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Fe.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=_e.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class $v{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let r=i;if(!r.isMaskData){const s=this.maskDataPool.pop()||new NE;s.pooled=!0,s.maskObject=i,r=s}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==_e.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case _e.SCISSOR:this.renderer.scissor.push(r);break;case _e.STENCIL:this.renderer.stencil.push(r);break;case _e.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case _e.COLOR:this.pushColorMask(r);break}r.type===_e.SPRITE&&this.maskStack.push(r)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case _e.SCISSOR:this.renderer.scissor.pop(i);break;case _e.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case _e.SPRITE:this.popSpriteMask(i);break;case _e.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===_e.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=_e.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=_e.SCISSOR:t.type=_e.STENCIL:t.type=_e.COLOR}pushSpriteMask(t){const{maskObject:i}=t,r=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new OE]));const s=this.renderer,o=s.renderTexture;let l,h;if(o.current){const f=o.current;l=t.resolution||f.resolution,h=t.multisample??f.multisample}else l=t.resolution||s.resolution,h=t.multisample??s.multisample;n[0].resolution=l,n[0].multisample=h,n[0].maskSprite=i;const c=r.filterArea;r.filterArea=i.getBounds(!0),s.filter.push(r,n),r.filterArea=c,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,r=t._colorMask=i&t.colorMask;r!==i&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(t){const i=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==i&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}$v.extension={type:st.RendererSystem,name:"mask"};dt.add($v);class FE{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,r=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==r&&(n===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Pw=new Yt,Aw=[],Jc=class extends FE{constructor(e){super(e),this.glConst=nt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:r}=this,n=r.renderTexture,s=i.getBounds(!0,Aw.pop()??new St);this.roundFrameToPixels(s,n.current?n.current.resolution:r.resolution,n.sourceFrame,n.destinationFrame,r.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:r,d:n}=e;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Jc.isMatrixRotated(t.worldTransform)||Jc.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,r,n){Jc.isMatrixRotated(n)||(n=n?Pw.copyFrom(n):Pw.identity(),n.translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.renderer.filter.transformAABB(n,e),e.fit(r),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Aw.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let jv=Jc;jv.extension={type:st.RendererSystem,name:"scissor"};dt.add(jv);class Vv extends FE{constructor(t){super(t),this.glConst=nt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:r}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,s!==0&&(t._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;n!==0&&(r._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(r._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Vv.extension={type:st.RendererSystem,name:"stencil"};dt.add(Vv);class Xv{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return xt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return xt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return xt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}Xv.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"_plugin"};dt.add(Xv);class Yv{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Yt,this.transform=null}update(t,i,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,i,r,n){const s=this.projectionMatrix,o=n?-1:1;s.identity(),s.a=1/i.width*2,s.d=o*(1/i.height*2),s.tx=-1-i.x*s.a,s.ty=-o-i.y*s.d}setTransform(t){}destroy(){this.renderer=null}}Yv.extension={type:st.RendererSystem,name:"projection"};dt.add(Yv);const oD=new Zu;class qv{constructor(t){this.renderer=t,this._tempMatrix=new Yt}generateTexture(t,i){const{region:r,...n}=i||{},s=r||t.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Rs.create({width:s.width,height:s.height,...n});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=t.transform;return t.transform=oD,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,o}destroy(){}}qv.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"textureGenerator"};dt.add(qv);const Vs=new St,Al=new St;class Qv{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new St,this.destinationFrame=new St,this.viewportFrame=new St}contextChange(){var i;const t=(i=this.renderer)==null?void 0:i.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,i,r){const n=this.renderer;this.current=t;let s,o,l;t?(s=t.baseTexture,l=s.resolution,i||(Vs.width=t.frame.width,Vs.height=t.frame.height,i=Vs),r||(Al.x=t.frame.x,Al.y=t.frame.y,Al.width=i.width,Al.height=i.height,r=Al),o=s.framebuffer):(l=n.resolution,i||(Vs.width=n._view.screen.width,Vs.height=n._view.screen.height,i=Vs),r||(r=Vs,r.width=i.width,r.height=i.height));const h=this.viewportFrame;h.x=r.x*l,h.y=r.y*l,h.width=r.width*l,h.height=r.height*l,t||(h.y=n.view.height-(h.y+h.height)),h.ceil(),this.renderer.framebuffer.bind(o,h),this.renderer.projection.update(r,i,l,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(r)}clear(t,i){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=It.shared.setValue(t||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,l=s.width!==o.width||s.height!==o.height;if(l){let{x:h,y:c,width:f,height:m}=this.viewportFrame;h=Math.round(h),c=Math.round(c),f=Math.round(f),m=Math.round(m),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(h,c,f,m)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,i),l&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Qv.extension={type:st.RendererSystem,name:"renderTexture"};dt.add(Qv);class aD{}class LE{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function lD(e,t){const i={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<r;n++){const s=t.getActiveAttrib(e,n);if(s.name.startsWith("gl_"))continue;const o=AE(t,s.type),l={type:o,name:s.name,size:PE(o),location:t.getAttribLocation(e,s.name)};i[s.name]=l}return i}function uD(e,t){const i={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let n=0;n<r;n++){const s=t.getActiveUniform(e,n),o=s.name.replace(/\[.*?\]$/,""),l=!!s.name.match(/\[.*?\]$/),h=AE(t,s.type);i[o]={name:o,index:n,type:h,size:s.size,isArray:l,value:EE(h,s.size)}}return i}function BE(e,t){var h;const i=xw(e,e.VERTEX_SHADER,t.vertexSrc),r=xw(e,e.FRAGMENT_SHADER,t.fragmentSrc),n=e.createProgram();e.attachShader(n,i),e.attachShader(n,r);const s=(h=t.extra)==null?void 0:h.transformFeedbackVaryings;if(s&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(n,s.names,s.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||Vk(e,n,i,r),t.attributeData=lD(n,e),t.uniformData=uD(n,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const c=Object.keys(t.attributeData);c.sort((f,m)=>f>m?1:-1);for(let f=0;f<c.length;f++)t.attributeData[c[f]].location=f,e.bindAttribLocation(n,f,c[f]);e.linkProgram(n)}e.deleteShader(i),e.deleteShader(r);const o={};for(const c in t.uniformData){const f=t.uniformData[c];o[c]={location:e.getUniformLocation(n,c),value:EE(f.type,f.size)}}return new LE(n,o)}function hD(e,t,i,r,n){i.buffer.update(n)}const cD={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},UE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function zE(e){const t=e.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let i=0,r=0,n=0;for(let s=0;s<t.length;s++){const o=t[s];if(i=UE[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,r%i!==0&&r<16){const l=r%i%16;r+=l,n+=l}r+i>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=i,r=i):(o.offset=n,r+=i,n+=i)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function HE(e,t){const i=[];for(const r in e)t[r]&&i.push(t[r]);return i.sort((r,n)=>r.index-n.index),i}function GE(e,t){if(!e.autoManage)return{size:0,syncFunc:hD};const i=HE(e.uniforms,t),{uboElements:r,size:n}=zE(i),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const l=r[o],h=e.uniforms[l.data.name],c=l.data.name;let f=!1;for(let m=0;m<po.length;m++){const p=po[m];if(p.codeUbo&&p.test(l.data,h)){s.push(`offset = ${l.offset/4};`,po[m].codeUbo(l.data.name,h)),f=!0;break}}if(!f)if(l.data.size>1){const m=PE(l.data.type),p=Math.max(UE[l.data.type]/16,1),v=m/p,_=(4-v%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};

                t = 0;

                for(var i=0; i < ${l.data.size*p}; i++)
                {
                    for(var j = 0; j < ${v}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${_};
                }

                `)}else{const m=cD[l.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};
                ${m};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let dD=0;const wc={textureCount:0,uboCount:0};class Kv{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=dD++}systemCheck(){if(!IE())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),i||(wc.textureCount=0,wc.uboCount=0,this.syncUniformGroup(t.uniformGroup,wc)),n}setUniforms(t){const i=this.shader.program,r=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,i){const r=this.getGlProgram();(!t.static||t.dirtyId!==r.uniformDirtyGroups[t.id])&&(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,i))}syncUniforms(t,i,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=$k(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const r=this.getGlProgram();if(!t.static||t.dirtyId!==0||!r.uniformGroups[t.id]){t.dirtyId=0;const n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,i);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,wc,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[i])}createSyncBufferGroup(t,i,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(i.program,r);i.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(i.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let l=this._uboCache[o];if(l||(l=this._uboCache[o]=GE(t,this.shader.program.uniformData)),t.autoManage){const h=new Float32Array(l.size/4);t.buffer.update(h)}return i.uniformGroups[t.id]=l.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,r){const n=t.uniforms,s=[`${r}-`];for(const o in n)s.push(o),i[o]&&s.push(i[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,r=t.program,n=BE(i,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Kv.extension={type:st.RendererSystem,name:"shader"};dt.add(Kv);class ih{constructor(t){this.renderer=t}run(t){const{renderer:i}=this;i.runners.init.emit(i.options),t.hello&&console.log(`PixiJS 7.2.4 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}ih.defaultOptions={hello:!1};ih.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"startup"};dt.add(ih);function fD(e,t=[]){return t[ft.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.ADD]=[e.ONE,e.ONE],t[ft.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.NONE]=[0,0],t[ft.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[ft.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[ft.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[ft.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[ft.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ft.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[ft.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[ft.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[ft.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[ft.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[ft.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const pD=0,mD=1,gD=2,yD=3,vD=4,_D=5,Kg=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ft.NONE,this._blendEq=!1,this.map=[],this.map[pD]=this.setBlend,this.map[mD]=this.setOffset,this.map[gD]=this.setCullFace,this.map[yD]=this.setDepthTest,this.map[vD]=this.setFrontFace,this.map[_D]=this.setDepthMask,this.checks=[],this.defaultState=new pn,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=fD(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Kg.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Kg.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let Zv=Kg;Zv.extension={type:st.RendererSystem,name:"state"};dt.add(Zv);class WE extends Ur{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(n=>t.systems[n]),r=[...i,...Object.keys(t.systems).filter(n=>!i.includes(n))];for(const n of r)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(i=>{this.runners[i]=new Ii(i)})}addSystem(t,i){const r=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=r,this._systemsHash[i]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(t,i){const r=Object.keys(this._systemsHash);t.items.forEach(n=>{const s=r.find(o=>this._systemsHash[o]===n);n[t.name](i[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const td=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=td.defaultMaxIdle,this.checkCountMax=td.defaultCheckCountMax,this.mode=td.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==mf.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let r=0;r<t.length;r++){const n=t[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[r]=null,i=!0)}if(i){let r=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[r++]=t[n]);t.length=r}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}destroy(){this.renderer=null}};let Qi=td;Qi.defaultMode=mf.AUTO;Qi.defaultMaxIdle=60*60;Qi.defaultCheckCountMax=60*10;Qi.extension={type:st.RendererSystem,name:"textureGC"};dt.add(Qi);class ed{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=yt.UNSIGNED_BYTE,this.internalFormat=J.RGBA,this.samplerType=0}}function xD(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[yt.UNSIGNED_BYTE]:{[J.RGBA]:e.RGBA8,[J.RGB]:e.RGB8,[J.RG]:e.RG8,[J.RED]:e.R8,[J.RGBA_INTEGER]:e.RGBA8UI,[J.RGB_INTEGER]:e.RGB8UI,[J.RG_INTEGER]:e.RG8UI,[J.RED_INTEGER]:e.R8UI,[J.ALPHA]:e.ALPHA,[J.LUMINANCE]:e.LUMINANCE,[J.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[yt.BYTE]:{[J.RGBA]:e.RGBA8_SNORM,[J.RGB]:e.RGB8_SNORM,[J.RG]:e.RG8_SNORM,[J.RED]:e.R8_SNORM,[J.RGBA_INTEGER]:e.RGBA8I,[J.RGB_INTEGER]:e.RGB8I,[J.RG_INTEGER]:e.RG8I,[J.RED_INTEGER]:e.R8I},[yt.UNSIGNED_SHORT]:{[J.RGBA_INTEGER]:e.RGBA16UI,[J.RGB_INTEGER]:e.RGB16UI,[J.RG_INTEGER]:e.RG16UI,[J.RED_INTEGER]:e.R16UI,[J.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[yt.SHORT]:{[J.RGBA_INTEGER]:e.RGBA16I,[J.RGB_INTEGER]:e.RGB16I,[J.RG_INTEGER]:e.RG16I,[J.RED_INTEGER]:e.R16I},[yt.UNSIGNED_INT]:{[J.RGBA_INTEGER]:e.RGBA32UI,[J.RGB_INTEGER]:e.RGB32UI,[J.RG_INTEGER]:e.RG32UI,[J.RED_INTEGER]:e.R32UI,[J.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[yt.INT]:{[J.RGBA_INTEGER]:e.RGBA32I,[J.RGB_INTEGER]:e.RGB32I,[J.RG_INTEGER]:e.RG32I,[J.RED_INTEGER]:e.R32I},[yt.FLOAT]:{[J.RGBA]:e.RGBA32F,[J.RGB]:e.RGB32F,[J.RG]:e.RG32F,[J.RED]:e.R32F,[J.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[yt.HALF_FLOAT]:{[J.RGBA]:e.RGBA16F,[J.RGB]:e.RGB16F,[J.RG]:e.RG16F,[J.RED]:e.R16F},[yt.UNSIGNED_SHORT_5_6_5]:{[J.RGB]:e.RGB565},[yt.UNSIGNED_SHORT_4_4_4_4]:{[J.RGBA]:e.RGBA4},[yt.UNSIGNED_SHORT_5_5_5_1]:{[J.RGBA]:e.RGB5_A1},[yt.UNSIGNED_INT_2_10_10_10_REV]:{[J.RGBA]:e.RGB10_A2,[J.RGBA_INTEGER]:e.RGB10_A2UI},[yt.UNSIGNED_INT_10F_11F_11F_REV]:{[J.RGB]:e.R11F_G11F_B10F},[yt.UNSIGNED_INT_5_9_9_9_REV]:{[J.RGB]:e.RGB9_E5},[yt.UNSIGNED_INT_24_8]:{[J.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[yt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[J.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[yt.UNSIGNED_BYTE]:{[J.RGBA]:e.RGBA,[J.RGB]:e.RGB,[J.ALPHA]:e.ALPHA,[J.LUMINANCE]:e.LUMINANCE,[J.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[yt.UNSIGNED_SHORT_5_6_5]:{[J.RGB]:e.RGB},[yt.UNSIGNED_SHORT_4_4_4_4]:{[J.RGBA]:e.RGBA},[yt.UNSIGNED_SHORT_5_5_5_1]:{[J.RGBA]:e.RGBA}},t}class Jv{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new _t,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=xD(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new ed(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ed(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,i=0){const{gl:r}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,r.activeTexture(r.TEXTURE0+i)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,r.activeTexture(r.TEXTURE0+i)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,r.activeTexture(r.TEXTURE0+i)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<r.length;n++)r[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(i.activeTexture(i.TEXTURE0+n),this.currentLocation=n),i.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let s=t-1;s>=0;--s){const o=i[s];o&&o._glTextures[n].samplerType!==yd.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const i=new ed(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){var r;i.internalFormat=((r=this.internalFormats[t.type])==null?void 0:r[t.format])??t.format,this.webGLVersion===2&&t.type===yt.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){var n;const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const r=this.renderer;if(this.initTextureType(t,i),(n=t.resource)!=null&&n.upload(r,t,i))i.samplerType!==yd.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,o=t.realHeight,l=r.gl;(i.width!==s||i.height!==o||i.dirtyId<0)&&(i.width=s,i.height=o,l.texImage2D(t.target,0,i.internalFormat,s,o,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:r}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const n=this.managedTextures.indexOf(t);n!==-1&&co(this.managedTextures,n,1)}}updateTextureStyle(t){var r;const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===Nr.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=an.CLAMP:i.wrapMode=t.wrapMode,(r=t.resource)!=null&&r.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const r=this.gl;if(i.mipmap&&t.mipmap!==Nr.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,i.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===nn.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===nn.LINEAR){const s=Math.min(t.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===nn.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===nn.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Jv.extension={type:st.RendererSystem,name:"texture"};dt.add(Jv);class t0{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:r}=this,n=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:r,renderer:n}=this;i&&n.shader.bind(i),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:r,CONTEXT_UID:n}=this,s=i.createTransformFeedback();t._glTransformFeedbacks[n]=s,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const l=t.buffers[o];l&&(r.buffer.update(l),l._glBuffers[n].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,o,l._glBuffers[n].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,i){const r=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const l=t.buffers[o];if(!l)continue;const h=l._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!i&&s.dispose(l,i))}r&&(i||n.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}t0.extension={type:st.RendererSystem,name:"transformFeedback"};dt.add(t0);class rh{constructor(t){this.renderer=t}init(t){this.screen=new St(0,0,t.width,t.height),this.element=t.view||nt.ADAPTER.createCanvas(),this.resolution=t.resolution||nt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var i;t&&((i=this.element.parentNode)==null||i.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}rh.defaultOptions={width:800,height:600,resolution:nt.RESOLUTION,autoDensity:!1};rh.extension={type:[st.RendererSystem,st.CanvasRendererSystem],name:"_view"};dt.add(rh);nt.PREFER_ENV=As.WEBGL2;nt.STRICT_TEXTURE_CACHE=!1;nt.RENDER_OPTIONS={...eh.defaultOptions,...th.defaultOptions,...rh.defaultOptions,...ih.defaultOptions};Object.defineProperties(nt,{WRAP_MODE:{get(){return _t.defaultOptions.wrapMode},set(e){xt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),_t.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return _t.defaultOptions.scaleMode},set(e){xt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),_t.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return _t.defaultOptions.mipmap},set(e){xt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),_t.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return _t.defaultOptions.anisotropicLevel},set(e){xt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),_t.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return xt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Fe.defaultResolution},set(e){Fe.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return xt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Fe.defaultMultisample},set(e){Fe.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return qi.defaultMaxTextures},set(e){xt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),qi.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return qi.defaultBatchSize},set(e){xt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),qi.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return qi.canUploadSameBuffer},set(e){xt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),qi.canUploadSameBuffer=e}},GC_MODE:{get(){return Qi.defaultMode},set(e){xt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Qi.defaultMode=e}},GC_MAX_IDLE:{get(){return Qi.defaultMaxIdle},set(e){xt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Qi.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return Qi.defaultCheckCountMax},set(e){xt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Qi.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return er.defaultVertexPrecision},set(e){xt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),er.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return er.defaultFragmentPrecision},set(e){xt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),er.defaultFragmentPrecision=e}}});var Bn=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Bn||{});class Hm{constructor(t,i=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=r,this.once=n}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const Ei=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Hm(null,null,1/0),this.deltaMS=1/Ei.targetFPMS,this.elapsedMS=1/Ei.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Bn.NORMAL){return this._addListener(new Hm(e,t,i))}addOnce(e,t,i=Bn.NORMAL){return this._addListener(new Hm(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Ei.targetFPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Ei.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Ei._shared){const e=Ei._shared=new Ei;e.autoStart=!0,e._protected=!0}return Ei._shared}static get system(){if(!Ei._system){const e=Ei._system=new Ei;e.autoStart=!0,e._protected=!0}return Ei._system}};let zt=Ei;zt.targetFPMS=.06;Object.defineProperties(nt,{TARGET_FPMS:{get(){return zt.targetFPMS},set(e){xt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),zt.targetFPMS=e}}});class e0{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Bn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?zt.shared:new zt,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}e0.extension=st.Application;dt.add(e0);const $E=[];dt.handleByList(st.Renderer,$E);function jE(e){for(const t of $E)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var wD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,SD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const VE=wD,i0=SD;class r0{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}i>=me.HIGH?this.multisample=me.HIGH:i>=me.MEDIUM?this.multisample=me.MEDIUM:i>=me.LOW?this.multisample=me.LOW:this.multisample=me.NONE}destroy(){}}r0.extension={type:st.RendererSystem,name:"_multisample"};dt.add(r0);class bD{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class n0{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);i.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[i]!==t){const s=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[i]=t,r.bindBufferBase(r.UNIFORM_BUFFER,i,s.buffer)}}bindBufferRange(t,i,r){const{gl:n,CONTEXT_UID:s}=this;r=r||0;const o=t._glBuffers[s]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,i||0,o.buffer,r*256,256)}update(t){const{gl:i,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,i.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const s=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,s)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(i||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let r=0;r<i.length;r++)this.dispose(this.managedBuffers[i[r]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:r}=this;return t._glBuffers[i]=new bD(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}n0.extension={type:st.RendererSystem,name:"buffer"};dt.add(n0);class s0{constructor(t){this.renderer=t}render(t,i){const r=this.renderer;let n,s,o,l;if(i&&(n=i.renderTexture,s=i.clear,o=i.transform,l=i.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(n||(this.lastObjectRendered=t),!l){const h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),n&&(i.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}s0.extension={type:st.RendererSystem,name:"objectRenderer"};dt.add(s0);const Zg=class extends WE{constructor(e){super(),this.type=wv.WEBGL,e=Object.assign({},nt.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new rr({projectionMatrix:new Yt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Zg.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(xt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=Zg.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:oE()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return xt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return xt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return xt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return xt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){xt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return xt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){xt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return xt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Po=Zg;Po.extension={type:st.Renderer,priority:1};Po.__plugins={};Po.__systems={};dt.handleByMap(st.RendererPlugin,Po.__plugins);dt.handleByMap(st.RendererSystem,Po.__systems);dt.add(Po);class o0 extends Oa{constructor(t,i){const{width:r,height:n}=i||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new _t;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof Oa?this.addResourceAt(t[r],r):this.addResourceAt(Dv(t[r],i),r))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const i=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(i).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),Promise.resolve(this)}),this._load}}class XE extends o0{constructor(t,i){const{width:r,height:n}=i||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:r,height:n}),s&&this.initFromArray(s,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=lo.TEXTURE_2D_ARRAY}upload(t,i,r){const{length:n,itemDirtyIds:s,items:o}=this,{gl:l}=t;r.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,i.format,r.type,null);for(let h=0;h<n;h++){const c=o[h];s[h]<c.dirtyId&&(s[h]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,h,c.resource.width,c.resource.height,1,i.format,r.type,c.resource.source))}return!0}}class YE extends Ln{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Hl=class extends o0{constructor(e,t){const{width:i,height:r,autoLoad:n,linkBaseTexture:s}=t||{};if(e&&e.length!==Hl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:r});for(let o=0;o<Hl.SIDES;o++)this.items[o].target=lo.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,e&&this.initFromArray(e,t),n!==!1&&this.load()}bind(e){super.bind(e),e.target=lo.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=lo.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const r=this.itemDirtyIds;for(let n=0;n<Hl.SIDES;n++){const s=this.items[n];(r[n]<s.dirtyId||i.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,i),r[n]=s.dirtyId):r[n]<-1&&(e.gl.texImage2D(s.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),r[n]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Hl.SIDES}};let a0=Hl;a0.SIDES=6;class no extends Ln{constructor(t,i){i=i||{};let r,n;typeof t=="string"?(r=no.EMPTY,n=t):(r=t,n=null),super(r),this.url=n,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const r=await nt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ar.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(r){if(this.destroyed)return;i(r),this.onError.emit(r)}}),this._load)}upload(t,i,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return no._EMPTY=no._EMPTY??nt.ADAPTER.createCanvas(0,0),no._EMPTY}}const id=class extends Ln{constructor(e,t){t=t||{},super(nt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},id.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Ln.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=t*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/i*t,n=this._overrideHeight||this._overrideWidth/t*i),r=Math.round(r),n=Math.round(n);const s=this.source;s.width=r,s.height=n,s._pixiId=`canvas_${Es()}`,s.getContext("2d").drawImage(e,0,0,t,i,0,0,r,n),this._resolve(),this._resolve=null}}static getSize(e){const t=id.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&id.SVG_XML.test(e)}};let Na=id;Na.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Na.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Jg=class extends Ln{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const r=e[0].src||e[0];Ln.crossOrigin(i,r,t.crossorigin);for(let n=0;n<e.length;++n){const s=document.createElement("source");let{src:o,mime:l}=e[n];o=o||e[n];const h=o.split("?").shift().toLowerCase(),c=h.slice(h.lastIndexOf(".")+1);l=l||Jg.MIME_TYPES[c]||`video/${c}`,s.src=o,s.type=l,i.appendChild(s)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=zt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(zt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(zt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Jg.TYPES.includes(t)}};let Ef=Jg;Ef.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Ef.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};Td.push(no,Lv,YE,Ef,Na,Za,a0,XE);class ED{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Ii("disposeTransformFeedback")}bindBuffer(t,i){this.buffers[t]=i}destroy(){this.disposeRunner.emit(this,!1)}}const qE="7.2.4";class vu{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?St.EMPTY:(t=t||new St(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:r,b:n,c:s,d:o,tx:l,ty:h}=t,c=r*i.x+s*i.y+l,f=n*i.x+o*i.y+h;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(t){let i=this.minX,r=this.minY,n=this.maxX,s=this.maxY,o=t[0],l=t[1];i=o<i?o:i,r=l<r?l:r,n=o>n?o:n,s=l>s?l:s,o=t[2],l=t[3],i=o<i?o:i,r=l<r?l:r,n=o>n?o:n,s=l>s?l:s,o=t[4],l=t[5],i=o<i?o:i,r=l<r?l:r,n=o>n?o:n,s=l>s?l:s,o=t[6],l=t[7],i=o<i?o:i,r=l<r?l:r,n=o>n?o:n,s=l>s?l:s,this.minX=i,this.minY=r,this.maxX=n,this.maxY=s}addFrame(t,i,r,n,s){this.addFrameMatrix(t.worldTransform,i,r,n,s)}addFrameMatrix(t,i,r,n,s){const o=t.a,l=t.b,h=t.c,c=t.d,f=t.tx,m=t.ty;let p=this.minX,v=this.minY,_=this.maxX,E=this.maxY,T=o*i+h*r+f,b=l*i+c*r+m;p=T<p?T:p,v=b<v?b:v,_=T>_?T:_,E=b>E?b:E,T=o*n+h*r+f,b=l*n+c*r+m,p=T<p?T:p,v=b<v?b:v,_=T>_?T:_,E=b>E?b:E,T=o*i+h*s+f,b=l*i+c*s+m,p=T<p?T:p,v=b<v?b:v,_=T>_?T:_,E=b>E?b:E,T=o*n+h*s+f,b=l*n+c*s+m,p=T<p?T:p,v=b<v?b:v,_=T>_?T:_,E=b>E?b:E,this.minX=p,this.minY=v,this.maxX=_,this.maxY=E}addVertexData(t,i,r){let n=this.minX,s=this.minY,o=this.maxX,l=this.maxY;for(let h=i;h<r;h+=2){const c=t[h],f=t[h+1];n=c<n?c:n,s=f<s?f:s,o=c>o?c:o,l=f>l?f:l}this.minX=n,this.minY=s,this.maxX=o,this.maxY=l}addVertices(t,i,r,n){this.addVerticesMatrix(t.worldTransform,i,r,n)}addVerticesMatrix(t,i,r,n,s=0,o=s){const l=t.a,h=t.b,c=t.c,f=t.d,m=t.tx,p=t.ty;let v=this.minX,_=this.minY,E=this.maxX,T=this.maxY;for(let b=r;b<n;b+=2){const S=i[b],w=i[b+1],P=l*S+c*w+m,I=f*w+h*S+p;v=Math.min(v,P-s),E=Math.max(E,P+s),_=Math.min(_,I-o),T=Math.max(T,I+o)}this.minX=v,this.minY=_,this.maxX=E,this.maxY=T}addBounds(t){const i=this.minX,r=this.minY,n=this.maxX,s=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,i){const r=t.minX>i.minX?t.minX:i.minX,n=t.minY>i.minY?t.minY:i.minY,s=t.maxX<i.maxX?t.maxX:i.maxX,o=t.maxY<i.maxY?t.maxY:i.maxY;if(r<=s&&n<=o){const l=this.minX,h=this.minY,c=this.maxX,f=this.maxY;this.minX=r<l?r:l,this.minY=n<h?n:h,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const r=t.minX>i.x?t.minX:i.x,n=t.minY>i.y?t.minY:i.y,s=t.maxX<i.x+i.width?t.maxX:i.x+i.width,o=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(r<=s&&n<=o){const l=this.minX,h=this.minY,c=this.maxX,f=this.maxY;this.minX=r<l?r:l,this.minY=n<h?n:h,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,r,n,s,o){t-=s,i-=o,r+=s,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>n?this.maxY:n}}class qt extends Ur{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Zu,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new vu,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let r=0;r<i.length;++r){const n=i[r];Object.defineProperty(qt.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new St),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new St),t=this._localBoundsRect),this._localBounds||(this._localBounds=new vu);const i=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=r,this.transform=i,this._bounds=n,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,i,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,r,n){return i&&(t=i.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,i=0,r=1,n=1,s=0,o=0,l=0,h=0,c=0){return this.position.x=t,this.position.y=i,this.scale.x=r||1,this.scale.y=n||1,this.rotation=s,this.skew.x=o,this.skew.y=l,this.pivot.x=h,this.pivot.y=c,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new QE),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*xE}set angle(t){this.transform.rotation=t*wE}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class QE extends qt{constructor(){super(...arguments),this.sortDirty=null}}qt.prototype.displayObjectUpdateTransform=qt.prototype.updateTransform;const TD=new Yt;function CD(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const ty=class extends qt{constructor(){super(),this.children=[],this.sortableChildren=ty.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=e,this.onChildrenChange(i<r?i:r)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);co(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,co(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,co(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,r=t,n=r-i;let s;if(n>0&&n<=r){s=this.children.splice(i,n);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const r=this.children[t];r._lastSortedIndex=t,!e&&r.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(CD),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let r=0,n=this.children.length;r<n;++r){const s=this.children[r];s.visible&&s.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,r;this.cullArea?(i=this.cullArea,r=this.worldTransform):this._render!==ty.prototype._render&&(i=this.getBounds(!0));const n=e.projection.transform;if(n&&(r?(r=TD.copyFrom(r),r.prepend(n)):r=n),i&&t.intersects(i,r))this._render(e);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const l=this.children[s],h=l.cullable;l.cullable=h||!this.cullArea,l.render(e),l.cullable=h}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,r=this.children.length;i<r;++i)this.children[i].render(e)}}renderAdvanced(e){var n,s,o;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const r=t&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==_e.NONE));if(r&&e.batch.flush(),t&&((s=this._enabledFilters)!=null&&s.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,h=this.children.length;l<h;++l)this.children[l].render(e)}r&&e.batch.flush(),i&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let r=0;r<i.length;++r)i[r].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let Ee=ty;Ee.defaultSortableChildren=!1;Ee.prototype.containerUpdateTransform=Ee.prototype.updateTransform;Object.defineProperties(nt,{SORTABLE_CHILDREN:{get(){return Ee.defaultSortableChildren},set(e){xt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ee.defaultSortableChildren=e}}});var nh=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(nh||{});const Il=new ct,PD=new Uint16Array([0,1,2,0,2,3]);class lr extends Ee{constructor(t){super(),this._anchor=new sn(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new It(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ft.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||tt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=PD,this.pluginName="batch",this.isSprite=!0,this._roundPixels=nt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Pn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Pn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,r=i.a,n=i.b,s=i.c,o=i.d,l=i.tx,h=i.ty,c=this.vertexData,f=t.trim,m=t.orig,p=this._anchor;let v=0,_=0,E=0,T=0;if(f?(_=f.x-p._x*m.width,v=_+f.width,T=f.y-p._y*m.height,E=T+f.height):(_=-p._x*m.width,v=_+m.width,T=-p._y*m.height,E=T+m.height),c[0]=r*_+s*T+l,c[1]=o*T+n*_+h,c[2]=r*v+s*T+l,c[3]=o*T+n*v+h,c[4]=r*v+s*E+l,c[5]=o*E+n*v+h,c[6]=r*_+s*E+l,c[7]=o*E+n*_+h,this._roundPixels){const b=nt.RESOLUTION;for(let S=0;S<c.length;++S)c[S]=Math.round(c[S]*b)/b}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,r=t.orig,n=this._anchor,s=this.transform.worldTransform,o=s.a,l=s.b,h=s.c,c=s.d,f=s.tx,m=s.ty,p=-n._x*r.width,v=p+r.width,_=-n._y*r.height,E=_+r.height;i[0]=o*p+h*_+f,i[1]=c*_+l*p+m,i[2]=o*v+h*_+f,i[3]=c*_+l*v+m,i[4]=o*v+h*E+f,i[5]=c*E+l*v+m,i[6]=o*p+h*E+f,i[7]=c*E+l*p+m}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new vu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new St),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Il);const i=this._texture.orig.width,r=this._texture.orig.height,n=-i*this.anchor.x;let s=0;return Il.x>=n&&Il.x<n+i&&(s=-r*this.anchor.y,Il.y>=s&&Il.y<s+r)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(t,i){const r=t instanceof tt?t:tt.from(t,i);return new lr(r)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=Pn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=Pn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||tt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Sc={willReadFrequently:!0},ht=class{static get experimentalLetterSpacingSupported(){let e=ht._experimentalLetterSpacingSupported;if(e!==void 0){const t=nt.ADAPTER.getCanvasRenderingContext2D().prototype;e=ht._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,r,n,s,o,l,h){this.text=e,this.style=t,this.width=i,this.height=r,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=h}static measureText(e,t,i,r=ht._canvas){i=i??t.wordWrap;const n=t.toFontString(),s=ht.measureFont(n);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const o=r.getContext("2d",Sc);o.font=n;const h=(i?ht.wordWrap(e,t,r):e).split(/(?:\r\n|\r|\n)/),c=new Array(h.length);let f=0;for(let _=0;_<h.length;_++){const E=ht._measureText(h[_],t.letterSpacing,o);c[_]=E,f=Math.max(f,E)}let m=f+t.strokeThickness;t.dropShadow&&(m+=t.dropShadowDistance);const p=t.lineHeight||s.fontSize+t.strokeThickness;let v=Math.max(p,s.fontSize+t.strokeThickness*2)+(h.length-1)*(p+t.leading);return t.dropShadow&&(v+=t.dropShadowDistance),new ht(e,t,m,v,h,c,p+t.leading,f,s)}static _measureText(e,t,i){let r=!1;ht.experimentalLetterSpacingSupported&&(ht.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,r=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(e).width;return n>0&&(r?n-=t:n+=(ht.graphemeSegmenter(e).length-1)*t),n}static wordWrap(e,t,i=ht._canvas){const r=i.getContext("2d",Sc);let n=0,s="",o="";const l=Object.create(null),{letterSpacing:h,whiteSpace:c}=t,f=ht.collapseSpaces(c),m=ht.collapseNewlines(c);let p=!f;const v=t.wordWrapWidth+h,_=ht.tokenize(e);for(let E=0;E<_.length;E++){let T=_[E];if(ht.isNewline(T)){if(!m){o+=ht.addLine(s),p=!f,s="",n=0;continue}T=" "}if(f){const S=ht.isBreakingSpace(T),w=ht.isBreakingSpace(s[s.length-1]);if(S&&w)continue}const b=ht.getFromCache(T,h,l,r);if(b>v)if(s!==""&&(o+=ht.addLine(s),s="",n=0),ht.canBreakWords(T,t.breakWords)){const S=ht.wordWrapSplit(T);for(let w=0;w<S.length;w++){let P=S[w],I=P,F=1;for(;S[w+F];){const k=S[w+F];if(!ht.canBreakChars(I,k,T,w,t.breakWords))P+=k;else break;I=k,F++}w+=F-1;const O=ht.getFromCache(P,h,l,r);O+n>v&&(o+=ht.addLine(s),p=!1,s="",n=0),s+=P,n+=O}}else{s.length>0&&(o+=ht.addLine(s),s="",n=0);const S=E===_.length-1;o+=ht.addLine(T,!S),p=!1,s="",n=0}else b+n>v&&(p=!1,o+=ht.addLine(s),s="",n=0),(s.length>0||!ht.isBreakingSpace(T)||p)&&(s+=T,n+=b)}return o+=ht.addLine(s,!1),o}static addLine(e,t=!0){return e=ht.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,r){let n=i[e];return typeof n!="number"&&(n=ht._measureText(e,t,r)+t,i[e]=n),n}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!ht.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ht._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ht._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let r=0;r<e.length;r++){const n=e[r],s=e[r+1];if(ht.isBreakingSpace(n,s)||ht.isNewline(n)){i!==""&&(t.push(i),i=""),t.push(n);continue}i+=n}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,r,n){return!0}static wordWrapSplit(e){return ht.graphemeSegmenter(e)}static measureFont(e){if(ht._fonts[e])return ht._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=ht._canvas,r=ht._context;r.font=e;const n=ht.METRICS_STRING+ht.BASELINE_SYMBOL,s=Math.ceil(r.measureText(n).width);let o=Math.ceil(r.measureText(ht.BASELINE_SYMBOL).width);const l=Math.ceil(ht.HEIGHT_MULTIPLIER*o);if(o=o*ht.BASELINE_MULTIPLIER|0,s===0||l===0)return ht._fonts[e]=t,t;i.width=s,i.height=l,r.fillStyle="#f00",r.fillRect(0,0,s,l),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(n,0,o);const h=r.getImageData(0,0,s,l).data,c=h.length,f=s*4;let m=0,p=0,v=!1;for(m=0;m<o;++m){for(let _=0;_<f;_+=4)if(h[p+_]!==255){v=!0;break}if(!v)p+=f;else break}for(t.ascent=o-m,p=c-f,v=!1,m=l;m>o;--m){for(let _=0;_<f;_+=4)if(h[p+_]!==255){v=!0;break}if(!v)p-=f;else break}return t.descent=m-o,t.fontSize=t.ascent+t.descent,ht._fonts[e]=t,t}static clearMetrics(e=""){e?delete ht._fonts[e]:ht._fonts={}}static get _canvas(){if(!ht.__canvas){let e;try{const t=new OffscreenCanvas(0,0),i=t.getContext("2d",Sc);if(i!=null&&i.measureText)return ht.__canvas=t,t;e=nt.ADAPTER.createCanvas()}catch{e=nt.ADAPTER.createCanvas()}e.width=e.height=10,ht.__canvas=e}return ht.__canvas}static get _context(){return ht.__context||(ht.__context=ht._canvas.getContext("2d",Sc)),ht.__context}};let Oe=ht;Oe.METRICS_STRING="|q";Oe.BASELINE_SYMBOL="M";Oe.BASELINE_MULTIPLIER=1.4;Oe.HEIGHT_MULTIPLIER=2;Oe.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(i=>i.segment)}return e=>[...e]})();Oe.experimentalLetterSpacing=!1;Oe._fonts={};Oe._newlines=[10,13];Oe._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const AD=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Gl=class{constructor(e){this.styleID=0,this.reset(),Wm(this,e,e)}clone(){const e={};return Wm(e,this,Gl.defaultStyle),new Gl(e)}reset(){Wm(this,Gl.defaultStyle,Gl.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Gm(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Gm(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){ID(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Gm(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let r=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!AD.includes(r)&&(r=`"${r}"`),t[i]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let cn=Gl;cn.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:nh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Gm(e){const t=It.shared;return Array.isArray(e)?e.map(i=>t.setValue(i).toHex()):t.setValue(e).toHex()}function ID(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function Wm(e,t,i){for(const r in i)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}const RD={texture:!0,children:!1,baseTexture:!0},ey=class extends lr{constructor(e,t,i){let r=!1;i||(i=nt.ADAPTER.createCanvas(),r=!0),i.width=3,i.height=3;const n=tt.from(i);n.orig=new St,n.trim=new St,super(n),this._ownCanvas=r,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=ey.defaultResolution??nt.RESOLUTION,this._autoResolution=ey.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Oe.experimentalLetterSpacing}static set experimentalLetterSpacing(e){xt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Oe.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,r=Oe.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=r.width,s=r.height,o=r.lines,l=r.lineHeight,h=r.lineWidths,c=r.maxLineWidth,f=r.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let m,p;const v=t.dropShadow?2:1;for(let _=0;_<v;++_){const E=t.dropShadow&&_===0,T=E?Math.ceil(Math.max(1,s)+t.padding*2):0,b=T*this._resolution;if(E){i.fillStyle="black",i.strokeStyle="black";const w=t.dropShadowColor,P=t.dropShadowBlur*this._resolution,I=t.dropShadowDistance*this._resolution;i.shadowColor=It.shared.setValue(w).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=P,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*I,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*I+b}else i.fillStyle=this._generateFillStyle(t,o,r),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let S=(l-f.fontSize)/2;l-f.fontSize<0&&(S=0);for(let w=0;w<o.length;w++)m=t.strokeThickness/2,p=t.strokeThickness/2+w*l+f.ascent+S,t.align==="right"?m+=c-h[w]:t.align==="center"&&(m+=(c-h[w])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[w],m+t.padding,p+t.padding-T,!0),t.fill&&this.drawLetterSpacing(o[w],m+t.padding,p+t.padding-T)}this.updateTexture()}drawLetterSpacing(e,t,i,r=!1){const s=this._style.letterSpacing;let o=!1;if(Oe.experimentalLetterSpacingSupported&&(Oe.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){r?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let l=t;const h=Oe.graphemeSegmenter(e);let c=this.context.measureText(e).width,f=0;for(let m=0;m<h.length;++m){const p=h[m];r?this.context.strokeText(p,l,i):this.context.fillText(p,l,i);let v="";for(let _=m+1;_<h.length;++_)v+=h[_];f=this.context.measureText(v).width,l+=c-f+s,c=f}}updateTexture(){const e=this.canvas;if(this._style.trim){const s=yE(e);s.data&&(e.width=s.width,e.height=s.height,this.context.putImageData(s.data,0,0))}const t=this._texture,i=this._style,r=i.trim?0:i.padding,n=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-r*2,t.orig.height=t._frame.height-r*2,this._onTextureUpdate(),n.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const r=e.fill;if(Array.isArray(r)){if(r.length===1)return r[0]}else return r;let n;const s=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,l=this.canvas.width/this._resolution-s-o*2,h=this.canvas.height/this._resolution-s-o*2,c=r.slice(),f=e.fillGradientStops.slice();if(!f.length){const m=c.length+1;for(let p=1;p<m;++p)f.push(p/m)}if(c.unshift(r[0]),f.unshift(0),c.push(r[r.length-1]),f.push(1),e.fillGradientType===nh.LINEAR_VERTICAL){n=this.context.createLinearGradient(l/2,o,l/2,h+o);const m=i.fontProperties.fontSize+e.strokeThickness;for(let p=0;p<t.length;p++){const v=i.lineHeight*(p-1)+m,_=i.lineHeight*p;let E=_;p>0&&v>_&&(E=(_+v)/2);const T=_+m,b=i.lineHeight*(p+1);let S=T;p+1<t.length&&b<T&&(S=(T+b)/2);const w=(S-E)/h;for(let P=0;P<c.length;P++){let I=0;typeof f[P]=="number"?I=f[P]:I=P/c.length;let F=Math.min(1,Math.max(0,E/h+I*w));F=Number(F.toFixed(5)),n.addColorStop(F,c[P])}}}else{n=this.context.createLinearGradient(o,h/2,l+o,h/2);const m=c.length+1;let p=1;for(let v=0;v<c.length;v++){let _;typeof f[v]=="number"?_=f[v]:_=p/m,n.addColorStop(_,c[v]),p++}}return n}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},RD,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Pn(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Pn(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof cn?this._style=e:this._style=new cn(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let sh=ey;sh.defaultAutoResolution=!0;class _u{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class iu{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in i){const o=i[s].match(/^[a-z]+/gm)[0],l=i[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),h={};for(const c in l){const f=l[c].split("="),m=f[0],p=f[1].replace(/"/gm,""),v=parseFloat(p),_=isNaN(v)?p:v;h[m]=_}r[o].push(h)}const n=new _u;return r.info.forEach(s=>n.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>n.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>n.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>n.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>n.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>n.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),n}}class Id{static test(t){const i=t;return"getElementsByTagName"in i&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new _u,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),l=t.getElementsByTagName("kerning"),h=t.getElementsByTagName("distanceField");for(let c=0;c<r.length;c++)i.info.push({face:r[c].getAttribute("face"),size:parseInt(r[c].getAttribute("size"),10)});for(let c=0;c<n.length;c++)i.common.push({lineHeight:parseInt(n[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)i.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const f=o[c];i.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(let c=0;c<l.length;c++)i.kerning.push({first:parseInt(l[c].getAttribute("first"),10),second:parseInt(l[c].getAttribute("second"),10),amount:parseInt(l[c].getAttribute("amount"),10)});for(let c=0;c<h.length;c++)i.distanceField.push({fieldType:h[c].getAttribute("fieldType"),distanceRange:parseInt(h[c].getAttribute("distanceRange"),10)});return i}}class Rd{static test(t){return typeof t=="string"&&t.includes("<font>")?Id.test(nt.ADAPTER.parseXML(t)):!1}static parse(t){return Id.parse(nt.ADAPTER.parseXML(t))}}const $m=[iu,Id,Rd];function KE(e){for(let t=0;t<$m.length;t++)if($m[t].test(e))return $m[t];return null}function MD(e,t,i,r,n,s){const o=i.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let l;const h=i.dropShadow?i.dropShadowDistance:0,c=i.padding||0,f=e.width/r-h-c*2,m=e.height/r-h-c*2,p=o.slice(),v=i.fillGradientStops.slice();if(!v.length){const _=p.length+1;for(let E=1;E<_;++E)v.push(E/_)}if(p.unshift(o[0]),v.unshift(0),p.push(o[o.length-1]),v.push(1),i.fillGradientType===nh.LINEAR_VERTICAL){l=t.createLinearGradient(f/2,c,f/2,m+c);let _=0;const T=(s.fontProperties.fontSize+i.strokeThickness)/m;for(let b=0;b<n.length;b++){const S=s.lineHeight*b;for(let w=0;w<p.length;w++){let P=0;typeof v[w]=="number"?P=v[w]:P=w/p.length;const I=S/m+P*T;let F=Math.max(_,I);F=Math.min(F,1),l.addColorStop(F,p[w]),_=F}}}else{l=t.createLinearGradient(c,m/2,f+c,m/2);const _=p.length+1;let E=1;for(let T=0;T<p.length;T++){let b;typeof v[T]=="number"?b=v[T]:b=E/_,l.addColorStop(b,p[T]),E++}}return l}function kD(e,t,i,r,n,s,o){const l=i.text,h=i.fontProperties;t.translate(r,n),t.scale(s,s);const c=o.strokeThickness/2,f=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=MD(e,t,o,s,[l],i),t.strokeStyle=o.stroke,o.dropShadow){const m=o.dropShadowColor,p=o.dropShadowBlur*s,v=o.dropShadowDistance*s;t.shadowColor=It.shared.setValue(m).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=p,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*v,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*v}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(l,c,f+i.lineHeight-h.descent),o.fill&&t.fillText(l,c,f+i.lineHeight-h.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function rd(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function ZE(e){return Array.from?Array.from(e):e.split("")}function DD(e){typeof e=="string"&&(e=[e]);const t=[];for(let i=0,r=e.length;i<r;i++){const n=e[i];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let l=s,h=o;l<=h;l++)t.push(String.fromCharCode(l))}else t.push(...ZE(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const xr=class{constructor(e,t,i){var c;const[r]=e.info,[n]=e.common,[s]=e.page,[o]=e.distanceField,l=Nn(s.file),h={};this._ownsTextures=i,this.font=r.face,this.size=r.size,this.lineHeight=n.lineHeight/l,this.chars={},this.pageTextures=h;for(let f=0;f<e.page.length;f++){const{id:m,file:p}=e.page[f];h[m]=t instanceof Array?t[f]:t[p],o!=null&&o.fieldType&&o.fieldType!=="none"&&(h[m].baseTexture.alphaMode=ar.NO_PREMULTIPLIED_ALPHA,h[m].baseTexture.mipmap=Nr.OFF)}for(let f=0;f<e.char.length;f++){const{id:m,page:p}=e.char[f];let{x:v,y:_,width:E,height:T,xoffset:b,yoffset:S,xadvance:w}=e.char[f];v/=l,_/=l,E/=l,T/=l,b/=l,S/=l,w/=l;const P=new St(v+h[p].frame.x/l,_+h[p].frame.y/l,E,T);this.chars[m]={xOffset:b,yOffset:S,xAdvance:w,kerning:{},texture:new tt(h[p].baseTexture,P),page:p}}for(let f=0;f<e.kerning.length;f++){let{first:m,second:p,amount:v}=e.kerning[f];m/=l,p/=l,v/=l,this.chars[p]&&(this.chars[p].kerning[m]=v)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((c=o==null?void 0:o.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let r;if(e instanceof _u)r=e;else{const s=KE(e);if(!s)throw new Error("Unrecognized data format for font.");r=s.parse(e)}t instanceof tt&&(t=[t]);const n=new xr(r,t,i);return xr.available[n.font]=n,n}static uninstall(e){const t=xr.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete xr.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:n,resolution:s,textureWidth:o,textureHeight:l,...h}=Object.assign({},xr.defaultOptions,i),c=DD(r),f=t instanceof cn?t:new cn(t),m=o,p=new _u;p.info[0]={face:f.fontFamily,size:f.fontSize},p.common[0]={lineHeight:f.fontSize};let v=0,_=0,E,T,b,S=0;const w=[];for(let I=0;I<c.length;I++){E||(E=nt.ADAPTER.createCanvas(),E.width=o,E.height=l,T=E.getContext("2d"),b=new _t(E,{resolution:s,...h}),w.push(new tt(b)),p.page.push({id:w.length-1,file:""}));const F=c[I],O=Oe.measureText(F,f,!1,E),k=O.width,X=Math.ceil(O.height),j=Math.ceil((f.fontStyle==="italic"?2:1)*k);if(_>=l-X*s){if(_===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${F}')`);--I,E=null,T=null,b=null,_=0,v=0,S=0;continue}if(S=Math.max(X+O.fontProperties.descent,S),j*s+v>=m){if(v===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${F}')`);--I,_+=S*s,_=Math.ceil(_),v=0,S=0;continue}kD(E,T,O,v,_,s,f);const V=rd(O.text);p.char.push({id:V,page:w.length-1,x:v/s,y:_/s,width:j,height:X,xoffset:0,yoffset:0,xadvance:k-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),v+=(j+2*n)*s,v=Math.ceil(v)}for(let I=0,F=c.length;I<F;I++){const O=c[I];for(let k=0;k<F;k++){const X=c[k],j=T.measureText(O).width,V=T.measureText(X).width,B=T.measureText(O+X).width-(j+V);B&&p.kerning.push({first:rd(O),second:rd(X),amount:B})}}const P=new xr(p,w,!0);return xr.available[e]!==void 0&&xr.uninstall(e),xr.available[e]=P,P}};let si=xr;si.ALPHA=[["a","z"],["A","Z"]," "];si.NUMERIC=[["0","9"]];si.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];si.ASCII=[[" ","~"]];si.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:xr.ALPHANUMERIC};si.available={};class JE{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const jm=new ct,Iw=new fo,tT=class extends Ee{constructor(e,t,i,r=Ji.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||pn.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=nt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Ji.TRIANGLES&&t.length<tT.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]),e.plugins[r].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,r=t._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const n=this.transform.worldTransform,s=n.a,o=n.b,l=n.c,h=n.d,c=n.tx,f=n.ty,m=this.vertexData;for(let p=0;p<m.length/2;p++){const v=i[p*2],_=i[p*2+1];m[p*2]=s*v+l*_+c,m[p*2+1]=o*v+h*_+f}if(this._roundPixels){const p=nt.RESOLUTION;for(let v=0;v<m.length;++v)m[v]=Math.round(m[v]*p)/p}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new JE(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,jm);const t=this.geometry.getBuffer("aVertexPosition").data,i=Iw.points,r=this.geometry.getIndex().data,n=r.length,s=this.drawMode===4?3:1;for(let o=0;o+2<n;o+=s){const l=r[o]*2,h=r[o+1]*2,c=r[o+2]*2;if(i[0]=t[l],i[1]=t[l+1],i[2]=t[h],i[3]=t[h+1],i[4]=t[c],i[5]=t[c+1],Iw.contains(jm.x,jm.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let vo=tT;vo.BATCHABLE_SIZE=100;class oh extends Fn{constructor(t,i,r){super();const n=new ce(t),s=new ce(i,!0),o=new ce(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,yt.FLOAT).addAttribute("aTextureCoord",s,2,!1,yt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var OD=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,ND=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Fa extends kr{constructor(t,i){const r={uSampler:t,alpha:1,uTextureMatrix:Yt.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(r,i.uniforms),super(i.program||er.from(ND,OD),r),this._colorDirty=!1,this.uvMatrix=new bf(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new It(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const i=this.texture.baseTexture.alphaMode;It.shared.setValue(this._tintColor).premultiply(this._alpha,i).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var FD=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,LD=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Rw=[],Mw=[],kw=[],eT=class extends Ee{constructor(e,t={}){super();const{align:i,tint:r,maxWidth:n,letterSpacing:s,fontName:o,fontSize:l}=Object.assign({},eT.styleDefaults,t);if(!si.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new It(r),this._font=void 0,this._fontName=o,this._fontSize=l,this.text=e,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new sn(()=>{this.dirty=!0},this,0,0),this._roundPixels=nt.ROUND_PIXELS,this.dirty=!0,this._resolution=nt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var j;const e=si.available[this._fontName],t=this.fontSize,i=t/e.size,r=new ct,n=[],s=[],o=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=ZE(l),c=this._maxWidth*e.size/t,f=e.distanceFieldType==="none"?Rw:Mw;let m=null,p=0,v=0,_=0,E=-1,T=0,b=0,S=0,w=0;for(let V=0;V<h.length;V++){const K=h[V],B=rd(K);if(/(?:\s)/.test(K)&&(E=V,T=p,w++),K==="\r"||K===`
`){s.push(p),o.push(-1),v=Math.max(v,p),++_,++b,r.x=0,r.y+=e.lineHeight,m=null,w=0;continue}const z=e.chars[B];if(!z)continue;m&&z.kerning[m]&&(r.x+=z.kerning[m]);const gt=kw.pop()||{texture:tt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ct};gt.texture=z.texture,gt.line=_,gt.charCode=B,gt.position.x=Math.round(r.x+z.xOffset+this._letterSpacing/2),gt.position.y=Math.round(r.y+z.yOffset),gt.prevSpaces=w,n.push(gt),p=gt.position.x+Math.max(z.xAdvance-z.xOffset,z.texture.orig.width),r.x+=z.xAdvance+this._letterSpacing,S=Math.max(S,z.yOffset+z.texture.height),m=B,E!==-1&&c>0&&r.x>c&&(++b,co(n,1+E-b,1+V-E),V=E,E=-1,s.push(T),o.push(n.length>0?n[n.length-1].prevSpaces:0),v=Math.max(v,T),_++,r.x=0,r.y+=e.lineHeight,m=null,w=0)}const P=h[h.length-1];P!=="\r"&&P!==`
`&&(/(?:\s)/.test(P)&&(p=T),s.push(p),v=Math.max(v,p),o.push(-1));const I=[];for(let V=0;V<=_;V++){let K=0;this._align==="right"?K=v-s[V]:this._align==="center"?K=(v-s[V])/2:this._align==="justify"&&(K=o[V]<0?0:(v-s[V])/o[V]),I.push(K)}const F=n.length,O={},k=[],X=this._activePagesMeshData;f.push(...X);for(let V=0;V<F;V++){const K=n[V].texture,B=K.baseTexture.uid;if(!O[B]){let z=f.pop();if(!z){const pt=new oh;let et,D;e.distanceFieldType==="none"?(et=new Fa(tt.EMPTY),D=ft.NORMAL):(et=new Fa(tt.EMPTY,{program:er.from(LD,FD),uniforms:{uFWidth:0}}),D=ft.NORMAL_NPM);const $=new vo(pt,et);$.blendMode=D,z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:$,vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;const{_textureCache:gt}=this;gt[B]=gt[B]||new tt(K.baseTexture),z.mesh.texture=gt[B],z.mesh.tint=this._tintColor.value,k.push(z),O[B]=z}O[B].total++}for(let V=0;V<X.length;V++)k.includes(X[V])||this.removeChild(X[V].mesh);for(let V=0;V<k.length;V++)k[V].mesh.parent!==this&&this.addChild(k[V].mesh);this._activePagesMeshData=k;for(const V in O){const K=O[V],B=K.total;if(!(((j=K.indices)==null?void 0:j.length)>6*B)||K.vertices.length<vo.BATCHABLE_SIZE*2)K.vertices=new Float32Array(4*2*B),K.uvs=new Float32Array(4*2*B),K.indices=new Uint16Array(6*B);else{const z=K.total,gt=K.vertices;for(let pt=z*4*2;pt<gt.length;pt++)gt[pt]=0}K.mesh.size=6*B}for(let V=0;V<F;V++){const K=n[V];let B=K.position.x+I[K.line]*(this._align==="justify"?K.prevSpaces:1);this._roundPixels&&(B=Math.round(B));const z=B*i,gt=K.position.y*i,pt=K.texture,et=O[pt.baseTexture.uid],D=pt.frame,$=pt._uvs,M=et.index++;et.indices[M*6+0]=0+M*4,et.indices[M*6+1]=1+M*4,et.indices[M*6+2]=2+M*4,et.indices[M*6+3]=0+M*4,et.indices[M*6+4]=2+M*4,et.indices[M*6+5]=3+M*4,et.vertices[M*8+0]=z,et.vertices[M*8+1]=gt,et.vertices[M*8+2]=z+D.width*i,et.vertices[M*8+3]=gt,et.vertices[M*8+4]=z+D.width*i,et.vertices[M*8+5]=gt+D.height*i,et.vertices[M*8+6]=z,et.vertices[M*8+7]=gt+D.height*i,et.uvs[M*8+0]=$.x0,et.uvs[M*8+1]=$.y0,et.uvs[M*8+2]=$.x1,et.uvs[M*8+3]=$.y1,et.uvs[M*8+4]=$.x2,et.uvs[M*8+5]=$.y2,et.uvs[M*8+6]=$.x3,et.uvs[M*8+7]=$.y3}this._textWidth=v*i,this._textHeight=(r.y+e.lineHeight)*i;for(const V in O){const K=O[V];if(this.anchor.x!==0||this.anchor.y!==0){let pt=0;const et=this._textWidth*this.anchor.x,D=this._textHeight*this.anchor.y;for(let $=0;$<K.total;$++)K.vertices[pt++]-=et,K.vertices[pt++]-=D,K.vertices[pt++]-=et,K.vertices[pt++]-=D,K.vertices[pt++]-=et,K.vertices[pt++]-=D,K.vertices[pt++]-=et,K.vertices[pt++]-=D}this._maxLineHeight=S*i;const B=K.mesh.geometry.getBuffer("aVertexPosition"),z=K.mesh.geometry.getBuffer("aTextureCoord"),gt=K.mesh.geometry.getIndex();B.data=K.vertices,z.data=K.uvs,gt.data=K.indices,B.update(),z.update(),gt.update()}for(let V=0;V<n.length;V++)kw.push(n[V]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:r}=si.available[this._fontName];if(i!=="none"){const{a:n,b:s,c:o,d:l}=this.worldTransform,h=Math.sqrt(n*n+s*s),c=Math.sqrt(o*o+l*l),f=(Math.abs(h)+Math.abs(c))/2,m=this.fontSize/r,p=e._view.resolution;for(const v of this._activePagesMeshData)v.mesh.shader.uniforms.uFWidth=f*t*m*p}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=si.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!si.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??si.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r=si.available[this._fontName].distanceFieldType==="none"?Rw:Mw;r.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],r.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=tt.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let l0=eT;l0.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Dw={loader:st.LoadParser,resolver:st.ResolveParser,cache:st.CacheParser,detection:st.DetectionParser};dt.handle(st.Asset,e=>{const t=e.ref;Object.entries(Dw).filter(([i])=>!!t[i]).forEach(([i,r])=>dt.add(Object.assign(t[i],{extension:t[i].extension??r})))},e=>{const t=e.ref;Object.keys(Dw).filter(i=>!!t[i]).forEach(i=>dt.remove(t[i]))});class BD{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<i;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Ja(e,t){if(Array.isArray(t)){for(const i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}function Ms(e,t){const i=e.split("?")[0],r=ye.extname(i).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}const ln=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(i=>typeof i=="string"?t(i):i):e),Md=(e,t)=>{const i=t.split("?")[1];return i&&(e+=`?${i}`),e};function iT(e,t,i,r,n){const s=t[i];for(let o=0;o<s.length;o++){const l=s[o];i<t.length-1?iT(e.replace(r[i],l),t,i+1,r,n):n.push(e.replace(r[i],l))}}function rT(e){const t=/\{(.*?)\}/g,i=e.match(t),r=[];if(i){const n=[];i.forEach(s=>{const o=s.substring(1,s.length-1).split(",");n.push(o)}),iT(e,n,0,i,r)}else r.push(e);return r}const xu=e=>!Array.isArray(e);class UD{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const r=ln(t);let n;for(let l=0;l<this.parsers.length;l++){const h=this.parsers[l];if(h.test(i)){n=h.getCacheableAssets(r,i);break}}n||(n={},r.forEach(l=>{n[l]=i}));const s=Object.keys(n),o={cacheKeys:s,keys:r};if(r.forEach(l=>{this._cacheMap.set(l,o)}),s.forEach(l=>{this._cache.has(l)&&this._cache.get(l)!==i&&console.warn("[Cache] already has key:",l),this._cache.set(l,n[l])}),i instanceof tt){const l=i;r.forEach(h=>{l.baseTexture!==tt.EMPTY.baseTexture&&_t.addToCache(l.baseTexture,h),tt.addToCache(l,h)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(n=>{this._cache.delete(n)}),i.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const ia=new UD;class zD{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,r)=>(this._parsersValidated=!1,t[i]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const r={promise:null,parser:null};return r.promise=(async()=>{var o,l;let n=null,s=null;if(i.loadParser&&(s=this._parserHash[i.loadParser],s||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!s){for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.load&&((o=c.test)!=null&&o.call(c,t,i,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await s.load(t,i,this),r.parser=s;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];c.parse&&c.parse&&await((l=c.testParse)==null?void 0:l.call(c,n,i,this))&&(n=await c.parse(n,i,this)||n,r.parser=c)}return n})(),r}async load(t,i){this._parsersValidated||this._validateParsers();let r=0;const n={},s=xu(t),o=ln(t,c=>({src:c})),l=o.length,h=o.map(async c=>{const f=ye.toAbsolute(c.src);if(!n[c.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,c)),n[c.src]=await this.promiseCache[f].promise,i&&i(++r/l)}catch(m){throw delete this.promiseCache[f],delete n[c.src],new Error(`[Loader.load] Failed to load ${f}.
${m}`)}});return await Promise.all(h),s?n[o[0].src]:n}async unload(t){const r=ln(t,n=>({src:n})).map(async n=>{var l,h;const s=ye.toAbsolute(n.src),o=this.promiseCache[s];if(o){const c=await o.promise;(h=(l=o.parser)==null?void 0:l.unload)==null||h.call(l,c,n,this),delete this.promiseCache[s]}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(t[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...t,[i.name]:i}),{})}}var ur=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(ur||{});const HD=".json",GD="application/json",nT={extension:{type:st.LoadParser,priority:ur.Low},name:"loadJson",test(e){return Ja(e,GD)||Ms(e,HD)},async load(e){return await(await nt.ADAPTER.fetch(e)).json()}};dt.add(nT);const WD=".txt",$D="text/plain",sT={name:"loadTxt",extension:{type:st.LoadParser,priority:ur.Low},test(e){return Ja(e,$D)||Ms(e,WD)},async load(e){return await(await nt.ADAPTER.fetch(e)).text()}};dt.add(sT);const jD=["normal","bold","100","200","300","400","500","600","700","800","900"],VD=[".ttf",".otf",".woff",".woff2"],XD=["font/ttf","font/otf","font/woff","font/woff2"],YD=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function oT(e){const t=ye.extname(e),n=ye.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1));let s=n.length>0;for(const l of n)if(!l.match(YD)){s=!1;break}let o=n.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const aT={extension:{type:st.LoadParser,priority:ur.Low},name:"loadWebFont",test(e){return Ja(e,XD)||Ms(e,VD)},async load(e,t){var r,n,s;const i=nt.ADAPTER.getFontFaceSet();if(i){const o=[],l=((r=t.data)==null?void 0:r.family)??oT(e),h=((s=(n=t.data)==null?void 0:n.weights)==null?void 0:s.filter(f=>jD.includes(f)))??["normal"],c=t.data??{};for(let f=0;f<h.length;f++){const m=h[f],p=new FontFace(l,`url(${encodeURI(e)})`,{...c,weight:m});await p.load(),i.add(p),o.push(p)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>nt.ADAPTER.getFontFaceSet().delete(t))}};dt.add(aT);let Ow=0,Vm;const qD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",QD={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${qD}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},KD={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Xm;class ZD{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const i=URL.createObjectURL(new Blob([QD.code],{type:"application/javascript"})),r=new Worker(i);r.addEventListener("message",n=>{r.terminate(),URL.revokeObjectURL(i),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Vm===void 0&&(Vm=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Vm&&(Xm||(Xm=URL.createObjectURL(new Blob([KD.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(Xm),t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const r=new Promise((n,s)=>{this.queue.push({id:t,arguments:i,resolve:n,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),r=i.id;this.resolveHash[Ow]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:Ow++,id:r})}}const Nw=new ZD;function ah(e,t,i){const r=new tt(e);return r.baseTexture.on("dispose",()=>{delete t.promiseCache[i]}),r}const JD=[".jpeg",".jpg",".png",".webp",".avif"],t3=["image/jpeg","image/png","image/webp","image/avif"];async function lT(e){const t=await nt.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const lh={name:"loadTextures",extension:{type:st.LoadParser,priority:ur.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Ja(e,t3)||Ms(e,JD)},async load(e,t,i){let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Nw.isImageBitmapSupported()?r=await Nw.loadImageBitmap(e):r=await lT(e):r=await new Promise(s=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=e,r.complete?s(r):r.onload=()=>{s(r)}});const n=new _t(r,{resolution:Nn(e),...t.data});return n.resource.src=e,ah(n,i,e)},unload(e){e.destroy(!0)}};dt.add(lh);const e3=".svg",i3="image/svg+xml",uT={extension:{type:st.LoadParser,priority:ur.High},name:"loadSVG",test(e){return Ja(e,i3)||Ms(e,e3)},async testParse(e){return Na.test(e)},async parse(e,t,i){var o;const r=new Na(e,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions);await r.load();const n=new _t(r,{resolution:Nn(e),...t==null?void 0:t.data});return n.resource.src=e,ah(n,i,e)},async load(e,t){return(await nt.ADAPTER.fetch(e)).text()},unload:lh.unload};dt.add(uT);class r3{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(i[r])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const r=[];Array.isArray(i)?i.forEach(n=>{if(typeof n.name=="string"){const s=this._createBundleAssetId(t,n.name);r.push(s),this.add([n.name,s],n.srcs,n.data)}else{const s=n.name.map(o=>this._createBundleAssetId(t,o));s.forEach(o=>{r.push(o)}),this.add([...n.name,...s],n.srcs)}}):Object.keys(i).forEach(n=>{r.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],i[n])}),this._bundles[t]=r}add(t,i,r){const n=ln(t);n.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(i)||(typeof i=="string"?i=rT(i):i=[i]);const s=i.map(o=>{let l=o;if(typeof o=="string"){let h=!1;for(let c=0;c<this._parsers.length;c++){const f=this._parsers[c];if(f.test(o)){l=f.parse(o),h=!0;break}}h||(l={src:o})}return l.format||(l.format=l.src.split(".").pop()),l.alias||(l.alias=n),(this._basePath||this._rootPath)&&(l.src=ye.toAbsolute(l.src,this._basePath,this._rootPath)),l.src=this._appendDefaultSearchParams(l.src),l.data=l.data??r,l});n.forEach(o=>{this._assetMap[o]=s})}resolveBundle(t){const i=xu(t);t=ln(t);const r={};return t.forEach(n=>{const s=this._bundles[n];if(s){const o=this.resolve(s),l={};for(const h in o){const c=o[h];l[this._extractAssetIdFromBundle(n,h)]=c}r[n]=l}}),i?r[t[0]]:r}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const r={};for(const n in i)r[n]=i[n].src;return r}return i.src}resolve(t){const i=xu(t);t=ln(t);const r={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let s=this._assetMap[n];const o=this._getPreferredOrder(s),l=s[0];o==null||o.priority.forEach(h=>{o.params[h].forEach(c=>{const f=s.filter(m=>m[h]?m[h]===c:!1);f.length&&(s=f)})}),this._resolverHash[n]=s[0]??l}else{let s=n;(this._basePath||this._rootPath)&&(s=ye.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[n]={src:s}}r[n]=this._resolverHash[n]}),i?r[t[0]]:r}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const r=t[0],n=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}}class hT{constructor(){this._detections=[],this._initialized=!1,this.resolver=new r3,this.loader=new zD,this.cache=ia,this._backgroundLoader=new BD(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,o,l;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let h=t.manifest;typeof h=="string"&&(h=await this.load(h)),this.resolver.addManifest(h)}const i=((s=t.texturePreference)==null?void 0:s.resolution)??1,r=typeof i=="number"?[i]:i;let n=[];if((o=t.texturePreference)!=null&&o.format){const h=(l=t.texturePreference)==null?void 0:l.format;n=typeof h=="string"?[h]:h;for(const c of this._detections)await c.test()||(n=await c.remove(n))}else for(const h of this._detections)await h.test()&&(n=await h.add(n));this.resolver.prefer({params:{format:n,resolution:r}}),t.preferences&&this.setPreferences(t.preferences)}add(t,i,r){this.resolver.add(t,i,r)}async load(t,i){this._initialized||await this.init();const r=xu(t),n=ln(t).map(l=>typeof l!="string"?(this.resolver.add(l.src,l),l.src):(this.resolver.hasKey(l)||this.resolver.add(l,l),l)),s=this.resolver.resolve(n),o=await this._mapLoadToResolve(s,i);return r?o[n[0]]:o}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let r=!1;typeof t=="string"&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),s={},o=Object.keys(n);let l=0,h=0;const c=()=>{i==null||i(++l/h)},f=o.map(m=>{const p=n[m];return h+=Object.keys(p).length,this._mapLoadToResolve(p,c).then(v=>{s[m]=v})});return await Promise.all(f),r?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return ia.get(t);const i={};for(let r=0;r<t.length;r++)i[r]=ia.get(t[r]);return i}async _mapLoadToResolve(t,i){const r=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(r,i);this._backgroundLoader.active=!0;const o={};return r.forEach((l,h)=>{const c=s[l.src],f=[l.src];l.alias&&f.push(...l.alias),o[n[h]]=c,ia.set(f,c)}),o}async unload(t){this._initialized||await this.init();const i=ln(t).map(n=>typeof n!="string"?n.src:n),r=this.resolver.resolve(i);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=ln(t);const i=this.resolver.resolveBundle(t),r=Object.keys(i).map(n=>this._unloadFromResolved(i[n]));await Promise.all(r)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(r=>{ia.remove(r.src)}),await this.loader.unload(i)}get detections(){return this._detections}get preferWorkers(){return lh.config.preferWorkers}set preferWorkers(t){xt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(r=>r in t).forEach(r=>{i.config[r]=t[r]})})}}const An=new hT;dt.handleByList(st.LoadParser,An.loader.parsers).handleByList(st.ResolveParser,An.resolver.parsers).handleByList(st.CacheParser,An.cache.parsers).handleByList(st.DetectionParser,An.detections);const cT={extension:st.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof tt),getCacheableAssets:(e,t)=>{const i={};return e.forEach(r=>{t.forEach((n,s)=>{i[r+(s===0?"":s+1)]=n})}),i}};dt.add(cT);const dT={extension:{type:st.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await nt.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};dt.add(dT);const fT={extension:{type:st.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await nt.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};dt.add(fT);const Fw=["png","jpg","jpeg"],pT={extension:{type:st.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Fw],remove:async e=>e.filter(t=>!Fw.includes(t))};dt.add(pT);const mT={extension:st.ResolveParser,test:lh.test,parse:e=>{var t;return{resolution:parseFloat(((t=nt.RETINA_PREFIX.exec(e))==null?void 0:t[1])??"1"),format:e.split(".").pop(),src:e}}};dt.add(mT);const n3=[".xml",".fnt"],gT={extension:{type:st.LoadParser,priority:ur.Normal},name:"loadBitmapFont",test(e){return n3.includes(ye.extname(e).toLowerCase())},async testParse(e){return iu.test(e)||Rd.test(e)},async parse(e,t,i){const r=iu.test(e)?iu.parse(e):Rd.parse(e),{src:n}=t,{page:s}=r,o=[];for(let c=0;c<s.length;++c){const f=s[c].file;let m=ye.join(ye.dirname(n),f);m=Md(m,n),o.push(m)}const l=await i.load(o),h=o.map(c=>l[c]);return si.install(r,h,!0)},async load(e,t){return(await nt.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};dt.add(gT);const wu={build(e){const t=e.points;let i,r,n,s,o,l;if(e.type===Ne.CIRC){const _=e.shape;i=_.x,r=_.y,o=l=_.radius,n=s=0}else if(e.type===Ne.ELIP){const _=e.shape;i=_.x,r=_.y,o=_.width,l=_.height,n=s=0}else{const _=e.shape,E=_.width/2,T=_.height/2;i=_.x+E,r=_.y+T,o=l=Math.max(0,Math.min(_.radius,Math.min(E,T))),n=E-o,s=T-l}if(!(o>=0&&l>=0&&n>=0&&s>=0)){t.length=0;return}const h=Math.ceil(2.3*Math.sqrt(o+l)),c=h*8+(n?4:0)+(s?4:0);if(t.length=c,c===0)return;if(h===0){t.length=8,t[0]=t[6]=i+n,t[1]=t[3]=r+s,t[2]=t[4]=i-n,t[5]=t[7]=r-s;return}let f=0,m=h*4+(n?2:0)+2,p=m,v=c;{const _=n+o,E=s,T=i+_,b=i-_,S=r+E;if(t[f++]=T,t[f++]=S,t[--m]=S,t[--m]=b,s){const w=r-E;t[p++]=b,t[p++]=w,t[--v]=w,t[--v]=T}}for(let _=1;_<h;_++){const E=Math.PI/2*(_/h),T=n+Math.cos(E)*o,b=s+Math.sin(E)*l,S=i+T,w=i-T,P=r+b,I=r-b;t[f++]=S,t[f++]=P,t[--m]=P,t[--m]=w,t[p++]=w,t[p++]=I,t[--v]=I,t[--v]=S}{const _=n,E=s+l,T=i+_,b=i-_,S=r+E,w=r-E;t[f++]=T,t[f++]=S,t[--v]=w,t[--v]=T,n&&(t[f++]=b,t[f++]=S,t[--v]=w,t[--v]=b)}},triangulate(e,t){const i=e.points,r=t.points,n=t.indices;if(i.length===0)return;let s=r.length/2;const o=s;let l,h;if(e.type!==Ne.RREC){const f=e.shape;l=f.x,h=f.y}else{const f=e.shape;l=f.x+f.width/2,h=f.y+f.height/2}const c=e.matrix;r.push(e.matrix?c.a*l+c.c*h+c.tx:l,e.matrix?c.b*l+c.d*h+c.ty:h),s++,r.push(i[0],i[1]);for(let f=2;f<i.length;f+=2)r.push(i[f],i[f+1]),n.push(s++,o,s);n.push(o+1,o,s)}};function Lw(e,t=!1){const i=e.length;if(i<6)return;let r=0;for(let n=0,s=e[i-2],o=e[i-1];n<i;n+=2){const l=e[n],h=e[n+1];r+=(l-s)*(h+o),s=l,o=h}if(!t&&r>0||t&&r<=0){const n=i/2;for(let s=n+n%2;s<i;s+=2){const o=i-s-2,l=i-s-1,h=s,c=s+1;[e[o],e[h]]=[e[h],e[o]],[e[l],e[c]]=[e[c],e[l]]}}}const u0={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let i=e.points;const r=e.holes,n=t.points,s=t.indices;if(i.length>=6){Lw(i,!1);const o=[];for(let c=0;c<r.length;c++){const f=r[c];Lw(f.points,!0),o.push(i.length/2),i=i.concat(f.points)}const l=Wb(i,o,2);if(!l)return;const h=n.length/2;for(let c=0;c<l.length;c+=3)s.push(l[c]+h),s.push(l[c+1]+h),s.push(l[c+2]+h);for(let c=0;c<i.length;c++)n.push(i[c])}}},yT={build(e){const t=e.shape,i=t.x,r=t.y,n=t.width,s=t.height,o=e.points;o.length=0,n>=0&&s>=0&&o.push(i,r,i+n,r,i+n,r+s,i,r+s)},triangulate(e,t){const i=e.points,r=t.points;if(i.length===0)return;const n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},vT={build(e){wu.build(e)},triangulate(e,t){wu.triangulate(e,t)}};var Yi=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Yi||{}),hs=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(hs||{});const Ts={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let i=Math.ceil(e/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},s3=Ts;class iy{static curveTo(t,i,r,n,s,o){const l=o[o.length-2],c=o[o.length-1]-i,f=l-t,m=n-i,p=r-t,v=Math.abs(c*p-f*m);if(v<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==i)&&o.push(t,i),null;const _=c*c+f*f,E=m*m+p*p,T=c*m+f*p,b=s*Math.sqrt(_)/v,S=s*Math.sqrt(E)/v,w=b*T/_,P=S*T/E,I=b*p+S*f,F=b*m+S*c,O=f*(S+w),k=c*(S+w),X=p*(b+P),j=m*(b+P),V=Math.atan2(k-F,O-I),K=Math.atan2(j-F,X-I);return{cx:I+t,cy:F+i,radius:s,startAngle:V,endAngle:K,anticlockwise:f*m>p*c}}static arc(t,i,r,n,s,o,l,h,c){const f=l-o,m=Ts._segmentsCount(Math.abs(f)*s,Math.ceil(Math.abs(f)/yu)*40),p=f/(m*2),v=p*2,_=Math.cos(p),E=Math.sin(p),T=m-1,b=T%1/T;for(let S=0;S<=T;++S){const w=S+b*S,P=p+o+v*w,I=Math.cos(P),F=-Math.sin(P);c.push((_*I+E*F)*s+r,(_*-F+E*I)*s+n)}}}class _T{constructor(){this.reset()}begin(t,i,r){this.reset(),this.style=t,this.start=i,this.attribStart=r}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Tf{static curveLength(t,i,r,n,s,o,l,h){let f=0,m=0,p=0,v=0,_=0,E=0,T=0,b=0,S=0,w=0,P=0,I=t,F=i;for(let O=1;O<=10;++O)m=O/10,p=m*m,v=p*m,_=1-m,E=_*_,T=E*_,b=T*t+3*E*m*r+3*_*p*s+v*l,S=T*i+3*E*m*n+3*_*p*o+v*h,w=I-b,P=F-S,I=b,F=S,f+=Math.sqrt(w*w+P*P);return f}static curveTo(t,i,r,n,s,o,l){const h=l[l.length-2],c=l[l.length-1];l.length-=2;const f=Ts._segmentsCount(Tf.curveLength(h,c,t,i,r,n,s,o));let m=0,p=0,v=0,_=0,E=0;l.push(h,c);for(let T=1,b=0;T<=f;++T)b=T/f,m=1-b,p=m*m,v=p*m,_=b*b,E=_*b,l.push(v*h+3*p*b*t+3*m*_*r+E*s,v*c+3*p*b*i+3*m*_*n+E*o)}}function Bw(e,t,i,r,n,s,o,l){const h=e-i*n,c=t-r*n,f=e+i*s,m=t+r*s;let p,v;o?(p=r,v=-i):(p=-r,v=i);const _=h+p,E=c+v,T=f+p,b=m+v;return l.push(_,E,T,b),2}function Xs(e,t,i,r,n,s,o,l){const h=i-e,c=r-t;let f=Math.atan2(h,c),m=Math.atan2(n-e,s-t);l&&f<m?f+=Math.PI*2:!l&&f>m&&(m+=Math.PI*2);let p=f;const v=m-f,_=Math.abs(v),E=Math.sqrt(h*h+c*c),T=(15*_*Math.sqrt(E)/Math.PI>>0)+1,b=v/T;if(p+=b,l){o.push(e,t,i,r);for(let S=1,w=p;S<T;S++,w+=b)o.push(e,t,e+Math.sin(w)*E,t+Math.cos(w)*E);o.push(e,t,n,s)}else{o.push(i,r,e,t);for(let S=1,w=p;S<T;S++,w+=b)o.push(e+Math.sin(w)*E,t+Math.cos(w)*E,e,t);o.push(n,s,e,t)}return T*2}function o3(e,t){const i=e.shape;let r=e.points||i.points.slice();const n=t.closePointEps;if(r.length===0)return;const s=e.lineStyle,o=new ct(r[0],r[1]),l=new ct(r[r.length-2],r[r.length-1]),h=i.type!==Ne.POLY||i.closeStroke,c=Math.abs(o.x-l.x)<n&&Math.abs(o.y-l.y)<n;if(h){r=r.slice(),c&&(r.pop(),r.pop(),l.set(r[r.length-2],r[r.length-1]));const et=(o.x+l.x)*.5,D=(l.y+o.y)*.5;r.unshift(et,D),r.push(et,D)}const f=t.points,m=r.length/2;let p=r.length;const v=f.length/2,_=s.width/2,E=_*_,T=s.miterLimit*s.miterLimit;let b=r[0],S=r[1],w=r[2],P=r[3],I=0,F=0,O=-(S-P),k=b-w,X=0,j=0,V=Math.sqrt(O*O+k*k);O/=V,k/=V,O*=_,k*=_;const K=s.alignment,B=(1-K)*2,z=K*2;h||(s.cap===hs.ROUND?p+=Xs(b-O*(B-z)*.5,S-k*(B-z)*.5,b-O*B,S-k*B,b+O*z,S+k*z,f,!0)+2:s.cap===hs.SQUARE&&(p+=Bw(b,S,O,k,B,z,!0,f))),f.push(b-O*B,S-k*B,b+O*z,S+k*z);for(let et=1;et<m-1;++et){b=r[(et-1)*2],S=r[(et-1)*2+1],w=r[et*2],P=r[et*2+1],I=r[(et+1)*2],F=r[(et+1)*2+1],O=-(S-P),k=b-w,V=Math.sqrt(O*O+k*k),O/=V,k/=V,O*=_,k*=_,X=-(P-F),j=w-I,V=Math.sqrt(X*X+j*j),X/=V,j/=V,X*=_,j*=_;const D=w-b,$=S-P,M=w-I,Q=F-P,rt=D*M+$*Q,wt=$*M-Q*D,vt=wt<0;if(Math.abs(wt)<.001*Math.abs(rt)){f.push(w-O*B,P-k*B,w+O*z,P+k*z),rt>=0&&(s.join===Yi.ROUND?p+=Xs(w,P,w-O*B,P-k*B,w-X*B,P-j*B,f,!1)+4:p+=2,f.push(w-X*z,P-j*z,w+X*B,P+j*B));continue}const Ft=(-O+b)*(-k+P)-(-O+w)*(-k+S),Et=(-X+I)*(-j+P)-(-X+w)*(-j+F),Ot=(D*Et-M*Ft)/wt,Te=(Q*Ft-$*Et)/wt,Be=(Ot-w)*(Ot-w)+(Te-P)*(Te-P),le=w+(Ot-w)*B,Tt=P+(Te-P)*B,$t=w-(Ot-w)*z,Mt=P-(Te-P)*z,Li=Math.min(D*D+$*$,M*M+Q*Q),Bi=vt?B:z,Fs=Li+Bi*Bi*E,Jf=Be<=Fs;let Ro=s.join;if(Ro===Yi.MITER&&Be/E>T&&(Ro=Yi.BEVEL),Jf)switch(Ro){case Yi.MITER:{f.push(le,Tt,$t,Mt);break}case Yi.BEVEL:{vt?f.push(le,Tt,w+O*z,P+k*z,le,Tt,w+X*z,P+j*z):f.push(w-O*B,P-k*B,$t,Mt,w-X*B,P-j*B,$t,Mt),p+=2;break}case Yi.ROUND:{vt?(f.push(le,Tt,w+O*z,P+k*z),p+=Xs(w,P,w+O*z,P+k*z,w+X*z,P+j*z,f,!0)+4,f.push(le,Tt,w+X*z,P+j*z)):(f.push(w-O*B,P-k*B,$t,Mt),p+=Xs(w,P,w-O*B,P-k*B,w-X*B,P-j*B,f,!1)+4,f.push(w-X*B,P-j*B,$t,Mt));break}}else{switch(f.push(w-O*B,P-k*B,w+O*z,P+k*z),Ro){case Yi.MITER:{vt?f.push($t,Mt,$t,Mt):f.push(le,Tt,le,Tt),p+=2;break}case Yi.ROUND:{vt?p+=Xs(w,P,w+O*z,P+k*z,w+X*z,P+j*z,f,!0)+2:p+=Xs(w,P,w-O*B,P-k*B,w-X*B,P-j*B,f,!1)+2;break}}f.push(w-X*B,P-j*B,w+X*z,P+j*z),p+=2}}b=r[(m-2)*2],S=r[(m-2)*2+1],w=r[(m-1)*2],P=r[(m-1)*2+1],O=-(S-P),k=b-w,V=Math.sqrt(O*O+k*k),O/=V,k/=V,O*=_,k*=_,f.push(w-O*B,P-k*B,w+O*z,P+k*z),h||(s.cap===hs.ROUND?p+=Xs(w-O*(B-z)*.5,P-k*(B-z)*.5,w-O*B,P-k*B,w+O*z,P+k*z,f,!1)+2:s.cap===hs.SQUARE&&(p+=Bw(w,P,O,k,B,z,!1,f)));const gt=t.indices,pt=Ts.epsilon*Ts.epsilon;for(let et=v;et<p+v-2;++et)b=f[et*2],S=f[et*2+1],w=f[(et+1)*2],P=f[(et+1)*2+1],I=f[(et+2)*2],F=f[(et+2)*2+1],!(Math.abs(b*(P-F)+w*(F-S)+I*(S-P))<pt)&&gt.push(et,et+1,et+2)}function a3(e,t){let i=0;const r=e.shape,n=e.points||r.points,s=r.type!==Ne.POLY||r.closeStroke;if(n.length===0)return;const o=t.points,l=t.indices,h=n.length/2,c=o.length/2;let f=c;for(o.push(n[0],n[1]),i=1;i<h;i++)o.push(n[i*2],n[i*2+1]),l.push(f,f+1),f++;s&&l.push(f,c)}function ry(e,t){e.lineStyle.native?a3(e,t):o3(e,t)}class Cf{static curveLength(t,i,r,n,s,o){const l=t-2*r+s,h=i-2*n+o,c=2*r-2*t,f=2*n-2*i,m=4*(l*l+h*h),p=4*(l*c+h*f),v=c*c+f*f,_=2*Math.sqrt(m+p+v),E=Math.sqrt(m),T=2*m*E,b=2*Math.sqrt(v),S=p/E;return(T*_+E*p*(_-b)+(4*v*m-p*p)*Math.log((2*E+S+_)/(S+b)))/(4*T)}static curveTo(t,i,r,n,s){const o=s[s.length-2],l=s[s.length-1],h=Ts._segmentsCount(Cf.curveLength(o,l,t,i,r,n));let c=0,f=0;for(let m=1;m<=h;++m){const p=m/h;c=o+(t-o)*p,f=l+(i-l)*p,s.push(c+(t+(r-t)*p-c)*p,f+(i+(n-i)*p-f)*p)}}}const nd={[Ne.POLY]:u0,[Ne.CIRC]:wu,[Ne.ELIP]:wu,[Ne.RECT]:yT,[Ne.RREC]:vT},ny=[],Wl=[];class Su{constructor(t,i=null,r=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=i,this.matrix=n,this.type=t.type}clone(){return new Su(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const qo=new ct,xT=class extends Ov{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new vu,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Wl.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),ny.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,r=null){const n=new Su(e,t,i,r);return this.graphicsData.push(n),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new Su(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const r=t[i];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(e,qo):qo.copyFrom(e),r.shape.contains(qo.x,qo.y))){let n=!1;if(r.holes){for(let s=0;s<r.holes.length;s++)if(r.holes[s].shape.contains(qo.x,qo.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,r=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],r=i.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const h=t[l],c=h.fillStyle,f=h.lineStyle;nd[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(c.visible||f.visible)&&this.processHoles(h.holes);for(let p=0;p<2;p++){const v=p===0?c:f;if(!v.visible)continue;const _=v.texture.baseTexture,E=this.indices.length,T=this.points.length/2;_.wrapMode=an.REPEAT,p===0?this.processFill(h):this.processLine(h);const b=this.points.length/2-T;b!==0&&(i&&!this._compareStyles(r,v)&&(i.end(E,T),i=null),i||(i=ny.pop()||new _T,i.begin(v,E,T),this.batches.push(i),r=v),this.addUvs(this.points,e,v.texture,T,b,v.matrix))}}const n=this.indices.length,s=this.points.length/2;if(i&&i.end(n,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const r=e[t];for(let n=0;n<r.size;n++){const s=r.start+n;this.indicesUint16[s]=this.indicesUint16[s]-r.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<xT.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++_t._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),Wl.push(this.drawCalls[f]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let r=Wl.pop();r||(r=new Cd,r.texArray=new Pd),r.texArray.count=0,r.start=0,r.size=0,r.type=Ji.TRIANGLES;let n=0,s=null,o=0,l=!1,h=Ji.TRIANGLES,c=0;this.drawCalls.push(r);for(let f=0;f<this.batches.length;f++){const m=this.batches[f],p=8,v=m.style,_=v.texture.baseTexture;l!==!!v.native&&(l=!!v.native,h=l?Ji.LINES:Ji.TRIANGLES,s=null,n=p,e++),s!==_&&(s=_,_._batchEnabled!==e&&(n===p&&(e++,n=0,r.size>0&&(r=Wl.pop(),r||(r=new Cd,r.texArray=new Pd),this.drawCalls.push(r)),r.start=c,r.size=0,r.texArray.count=0,r.type=h),_.touched=1,_._batchEnabled=e,_._batchLocation=n,_.wrapMode=an.REPEAT,r.texArray.elements[r.texArray.count++]=_,n++)),r.size+=m.size,c+=m.size,o=_._batchLocation,this.addColors(t,v.color,v.alpha,m.attribSize,m.attribStart),this.addTextureIds(i,o,m.attribSize,m.attribStart)}_t._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(e.length*3*4),s=new Float32Array(n),o=new Uint32Array(n);let l=0;for(let h=0;h<e.length/2;h++)s[l++]=e[h*2],s[l++]=e[h*2+1],s[l++]=t[h*2],s[l++]=t[h*2+1],o[l++]=i[h],s[l++]=r[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?u0.triangulate(e,this):nd[e.type].triangulate(e,this)}processLine(e){ry(e,this);for(let t=0;t<e.holes.length;t++)ry(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];nd[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const r=e[i*2],n=e[i*2+1];e[i*2]=t.a*r+t.c*n+t.tx,e[i*2+1]=t.b*r+t.d*n+t.ty}}addColors(e,t,i,r,n=0){const s=It.shared.setValue(t).toLittleEndianNumber(),o=It.shared.setValue(s).toPremultiplied(i);e.length=Math.max(e.length,n+r);for(let l=0;l<r;l++)e[n+l]=o}addTextureIds(e,t,i,r=0){e.length=Math.max(e.length,r+i);for(let n=0;n<i;n++)e[r+n]=t}addUvs(e,t,i,r,n,s=null){let o=0;const l=t.length,h=i.frame;for(;o<n;){let f=e[(r+o)*2],m=e[(r+o)*2+1];if(s){const p=s.a*f+s.c*m+s.tx;m=s.b*f+s.d*m+s.ty,f=p}o++,t.push(f/h.width,m/h.height)}const c=i.baseTexture;(h.width<c.width||h.height<c.height)&&this.adjustUvs(t,i,l,n)}adjustUvs(e,t,i,r){const n=t.baseTexture,s=1e-6,o=i+r*2,l=t.frame,h=l.width/n.width,c=l.height/n.height;let f=l.x/l.width,m=l.y/l.height,p=Math.floor(e[i]+s),v=Math.floor(e[i+1]+s);for(let _=i+2;_<o;_+=2)p=Math.min(p,Math.floor(e[_]+s)),v=Math.min(v,Math.floor(e[_+1]+s));f-=p,m-=v;for(let _=i;_<o;_+=2)e[_]=(e[_]+f)*h,e[_+1]=(e[_+1]+m)*c}};let h0=xT;h0.BATCHABLE_SIZE=100;class uh{constructor(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new uh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=tt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Pf extends uh{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=hs.BUTT,this.join=Yi.MITER,this.miterLimit=10}clone(){const t=new Pf;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Ym={},sd=class extends Ee{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new uh,this._lineStyle=new Pf,this._matrix=null,this._holeMode=!1,this.state=pn.for2d(),this._geometry=e||new h0,this._geometry.refCount++,this._transformID=-1,this._tintColor=new It(16777215),this.blendMode=ft.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new sd(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,r=.5,n=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:r,native:n}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:tt.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:hs.BUTT,join:Yi.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new fo,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new fo,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return(r!==e||n!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,r){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Cf.curveTo(e,t,i,r,n),this}bezierCurveTo(e,t,i,r,n,s){return this._initCurve(),Tf.curveTo(e,t,i,r,n,s,this.currentPath.points),this}arcTo(e,t,i,r,n){this._initCurve(e,t);const s=this.currentPath.points,o=iy.curveTo(e,t,i,r,n,s);if(o){const{cx:l,cy:h,radius:c,startAngle:f,endAngle:m,anticlockwise:p}=o;this.arc(l,h,c,f,m,p)}return this}arc(e,t,i,r,n,s=!1){if(r===n)return this;if(!s&&n<=r?n+=yu:s&&r<=n&&(r+=yu),n-r===0)return this;const l=e+Math.cos(r)*i,h=t+Math.sin(r)*i,c=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const m=Math.abs(f[f.length-2]-l),p=Math.abs(f[f.length-1]-h);m<c&&p<c||f.push(l,h)}else this.moveTo(l,h),f=this.currentPath.points;return iy.arc(l,h,e,t,i,r,n,s,f),this}beginFill(e=0,t){return this.beginTextureFill({texture:tt.WHITE,color:e,alpha:t})}normalizeColor(e){const t=It.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:tt.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,r){return this.drawShape(new St(e,t,i,r))}drawRoundedRect(e,t,i,r,n){return this.drawShape(new Sf(e,t,i,r,n))}drawCircle(e,t,i){return this.drawShape(new xf(e,t,i))}drawEllipse(e,t,i,r){return this.drawShape(new wf(e,t,i,r))}drawPolygon(...e){let t,i=!0;const r=e[0];r.points?(i=r.closeStroke,t=r.points):Array.isArray(e[0])?t=e[0]:t=e;const n=new fo(t);return n.closeStroke=i,this.drawShape(n),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Ne.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let r=0;r<i;r++){const n=e.batches[r],s=n.style.color,o=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),h=new Uint16Array(e.indicesUint16.buffer,n.start*2,n.size),c={vertexData:o,blendMode:t,indices:h,uvs:l,_batchRGB:It.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=c}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,r=this.worldAlpha,n=t.uniforms,s=i.drawCalls;n.translationMatrix=this.transform.worldTransform,It.shared.setValue(this._tintColor).premultiply(r).toArray(n.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let o=0,l=s.length;o<l;o++)this._renderDrawCallDirect(e,i.drawCalls[o])}_renderDrawCallDirect(e,t){const{texArray:i,type:r,size:n,start:s}=t,o=i.count;for(let l=0;l<o;l++)e.texture.bind(i.elements[l],l);e.geometry.draw(r,n,s)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!Ym[i]){const{maxTextures:r}=e.plugins[i],n=new Int32Array(r);for(let l=0;l<r;l++)n[l]=l;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Yt,default:rr.from({uSamplers:n},!0)},o=e.plugins[i]._shader.program;Ym[i]=new kr(o,s)}t=Ym[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:r,maxY:n}=e.bounds;this._bounds.addFrame(this.transform,t,i,r,n)}containsPoint(e){return this.worldTransform.applyInverse(e,sd._TEMP_POINT),this._geometry.containsPoint(sd._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=It.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,r=t.b,n=t.c,s=t.d,o=t.tx,l=t.ty,h=this._geometry.points,c=this.vertexData;let f=0;for(let m=0;m<h.length;m+=2){const p=h[m],v=h[m+1];c[f++]=i*p+n*v+o,c[f++]=s*v+r*p+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let fs=sd;fs.curves=Ts;fs._TEMP_POINT=new ct;const l3={buildPoly:u0,buildCircle:wu,buildRectangle:yT,buildRoundedRectangle:vT,buildLine:ry,ArcUtils:iy,BezierUtils:Tf,QuadraticUtils:Cf,BatchPart:_T,FILL_COMMANDS:nd,BATCH_POOL:ny,DRAW_CALL_POOL:Wl};class wT extends oh{constructor(t=100,i=100,r=10,n=10){super(),this.segWidth=r,this.segHeight=n,this.width=t,this.height=i,this.build()}build(){const t=this.segWidth*this.segHeight,i=[],r=[],n=[],s=this.segWidth-1,o=this.segHeight-1,l=this.width/s,h=this.height/o;for(let f=0;f<t;f++){const m=f%this.segWidth,p=f/this.segWidth|0;i.push(m*l,p*h),r.push(m/s,p/o)}const c=s*o;for(let f=0;f<c;f++){const m=f%s,p=f/s|0,v=p*this.segWidth+m,_=p*this.segWidth+m+1,E=(p+1)*this.segWidth+m,T=(p+1)*this.segWidth+m+1;n.push(v,_,E,_,T,E)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class ST extends oh{constructor(t=200,i,r=0){super(new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6)),this.points=i,this._width=t,this.textureScale=r,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const i=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),n=this.getIndex();if(t.length<1)return;i.data.length/4!==t.length&&(i.data=new Float32Array(t.length*4),r.data=new Float32Array(t.length*4),n.data=new Uint16Array((t.length-1)*6));const s=r.data,o=n.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let l=0,h=t[0];const c=this._width*this.textureScale,f=t.length;for(let p=0;p<f;p++){const v=p*4;if(this.textureScale>0){const _=h.x-t[p].x,E=h.y-t[p].y,T=Math.sqrt(_*_+E*E);h=t[p],l+=T/c}else l=p/(f-1);s[v]=l,s[v+1]=0,s[v+2]=l,s[v+3]=1}let m=0;for(let p=0;p<f-1;p++){const v=p*2;o[m++]=v,o[m++]=v+1,o[m++]=v+2,o[m++]=v+2,o[m++]=v+1,o[m++]=v+3}r.update(),n.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let i=t[0],r,n=0,s=0;const o=this.buffers[0].data,l=t.length,h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<l;c++){const f=t[c],m=c*4;c<t.length-1?r=t[c+1]:r=f,s=-(r.x-i.x),n=r.y-i.y;const p=Math.sqrt(n*n+s*s);p<1e-6?(n=0,s=0):(n/=p,s/=p,n*=h,s*=h),o[m]=f.x+n,o[m+1]=f.y+s,o[m+2]=f.x-n,o[m+3]=f.y-s,i=f}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class bT extends vo{constructor(t,i,r){const n=new wT(t.width,t.height,i,r),s=new Fa(tt.WHITE);super(n,s),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:i,height:r}=this.shader.texture;this.autoResize&&(t.width!==i||t.height!==r)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const bc=10;class ET extends bT{constructor(t,i,r,n,s){var o,l,h,c;super(tt.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=i??((o=t.defaultBorders)==null?void 0:o.left)??bc,this._rightWidth=n??((l=t.defaultBorders)==null?void 0:l.right)??bc,this._topHeight=r??((h=t.defaultBorders)==null?void 0:h.top)??bc,this._bottomHeight=s??((c=t.defaultBorders)==null?void 0:c.bottom)??bc,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,i=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,i=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,i=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,n=this._height>r?1:this._height/r;return Math.min(i,n)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,i=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const r=1/this._origWidth,n=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=r*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-r*this._rightWidth,i[9]=i[11]=i[13]=i[15]=n*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class TT extends vo{constructor(t=tt.EMPTY,i,r,n,s){const o=new oh(i,r,n);o.getBuffer("aVertexPosition").static=!1;const l=new Fa(t);super(o,l,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class CT extends vo{constructor(t,i,r=0){const n=new ST(t.height,i,r),s=new Fa(t);r>0&&(t.baseTexture.wrapMode=an.REPEAT),super(n,s),this.autoUpdate=!0}_render(t){const i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),super._render(t)}}class PT extends Ee{constructor(t=1500,i,r=16384,n=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=ft.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(i),this._tintColor=new It(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const i=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class Uw{constructor(t,i,r){this.geometry=new Fn,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let s=t[n];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||yt.FLOAT,offset:s.offset},i[n]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new ce(fE(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];l.offset=i,i+=l.size,this.dynamicStride+=l.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new ce(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];l.offset=n,n+=l.size,this.staticStride+=l.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ce(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];t.addAttribute(l.attributeName,this.dynamicBuffer,0,l.type===yt.UNSIGNED_BYTE,l.type,this.dynamicStride*4,l.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];t.addAttribute(l.attributeName,this.staticBuffer,0,l.type===yt.UNSIGNED_BYTE,l.type,this.staticStride*4,l.offset*4)}}uploadDynamic(t,i,r){for(let n=0;n<this.dynamicProperties.length;n++){const s=this.dynamicProperties[n];s.uploadFunction(t,i,r,s.type===yt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,r){for(let n=0;n<this.staticProperties.length;n++){const s=this.staticProperties[n];s.uploadFunction(t,i,r,s.type===yt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var u3=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,h3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class c0 extends Ju{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Yt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:yt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=kr.from(h3,u3,{}),this.state=pn.for2d()}render(t){const i=t.children,r=t._maxSize,n=t._batchSize,s=this.renderer;let o=i.length;if(o===0)return;o>r&&!t.autoResize&&(o=r);let l=t._buffers;l||(l=t._buffers=this.generateBuffers(t));const h=i[0]._texture.baseTexture,c=h.alphaMode>0;this.state.blendMode=kv(t.blendMode,c),s.state.set(this.state);const f=s.gl,m=t.worldTransform.copyTo(this.tempMatrix);m.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=m.toArray(!0),this.shader.uniforms.uColor=It.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=h,this.renderer.shader.bind(this.shader);let p=!1;for(let v=0,_=0;v<o;v+=n,_+=1){let E=o-v;E>n&&(E=n),_>=l.length&&l.push(this._generateOneMoreBuffer(t));const T=l[_];T.uploadDynamic(i,v,E);const b=t._bufferUpdateIDs[_]||0;p=p||T._updateID<b,p&&(T._updateID=t._updateID,T.uploadStatic(i,v,E)),s.geometry.bind(T.geometry),f.drawElements(f.TRIANGLES,E*6,f.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],r=t._maxSize,n=t._batchSize,s=t._properties;for(let o=0;o<r;o+=n)i.push(new Uw(this.properties,s,n));return i}_generateOneMoreBuffer(t){const i=t._batchSize,r=t._properties;return new Uw(this.properties,r,i)}uploadVertices(t,i,r,n,s,o){let l=0,h=0,c=0,f=0;for(let m=0;m<r;++m){const p=t[i+m],v=p._texture,_=p.scale.x,E=p.scale.y,T=v.trim,b=v.orig;T?(h=T.x-p.anchor.x*b.width,l=h+T.width,f=T.y-p.anchor.y*b.height,c=f+T.height):(l=b.width*(1-p.anchor.x),h=b.width*-p.anchor.x,c=b.height*(1-p.anchor.y),f=b.height*-p.anchor.y),n[o]=h*_,n[o+1]=f*E,n[o+s]=l*_,n[o+s+1]=f*E,n[o+s*2]=l*_,n[o+s*2+1]=c*E,n[o+s*3]=h*_,n[o+s*3+1]=c*E,o+=s*4}}uploadPosition(t,i,r,n,s,o){for(let l=0;l<r;l++){const h=t[i+l].position;n[o]=h.x,n[o+1]=h.y,n[o+s]=h.x,n[o+s+1]=h.y,n[o+s*2]=h.x,n[o+s*2+1]=h.y,n[o+s*3]=h.x,n[o+s*3+1]=h.y,o+=s*4}}uploadRotation(t,i,r,n,s,o){for(let l=0;l<r;l++){const h=t[i+l].rotation;n[o]=h,n[o+s]=h,n[o+s*2]=h,n[o+s*3]=h,o+=s*4}}uploadUvs(t,i,r,n,s,o){for(let l=0;l<r;++l){const h=t[i+l]._texture._uvs;h?(n[o]=h.x0,n[o+1]=h.y0,n[o+s]=h.x1,n[o+s+1]=h.y1,n[o+s*2]=h.x2,n[o+s*2+1]=h.y2,n[o+s*3]=h.x3,n[o+s*3+1]=h.y3,o+=s*4):(n[o]=0,n[o+1]=0,n[o+s]=0,n[o+s+1]=0,n[o+s*2]=0,n[o+s*2+1]=0,n[o+s*3]=0,n[o+s*3+1]=0,o+=s*4)}}uploadTint(t,i,r,n,s,o){for(let l=0;l<r;++l){const h=t[i+l],c=It.shared.setValue(h._tintRGB).toPremultiplied(h.alpha,h.texture.baseTexture.alphaMode>0);n[o]=c,n[o+s]=c,n[o+s*2]=c,n[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}c0.extension={name:"particle",type:st.RendererPlugin};dt.add(c0);class La extends lr{constructor(t,i=!0){super(t[0]instanceof tt?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=i,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(zt.shared.add(this.update,this,Bn.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const i=this.animationSpeed*t,r=this.currentFrame;if(this._durations!==null){let n=this._currentTime%1*this._durations[this.currentFrame];for(n+=i/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const i=[];for(let r=0;r<t.length;++r)i.push(tt.from(t[r]));return new La(i)}static fromImages(t){const i=[];for(let r=0;r<t.length;++r)i.push(tt.from(t[r]));return new La(i)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof tt)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let i=0;i<t.length;i++)this._textures.push(t[i].texture),this._durations.push(t[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(zt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(zt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Rl=new ct;class Af extends lr{constructor(t,i=100,r=100){super(t),this.tileTransform=new Zu,this._width=i,this._height=r,this.uvMatrix=this.texture.uvMatrix||new bf(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,i=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,i,r,n)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new St),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Rl);const i=this._width,r=this._height,n=-i*this.anchor._x;if(Rl.x>=n&&Rl.x<n+i){const s=-r*this.anchor._y;if(Rl.y>=s&&Rl.y<s+r)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,i){const r=t instanceof tt?t:tt.from(t,i);return new Af(r,i.width,i.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var c3=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,d3=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,f3=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,zw=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,p3=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Ec=new Yt;class d0 extends Ju{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new zv,this.state=pn.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=kr.from(zw,p3,i),this.shader=t.context.webGLVersion>1?kr.from(d3,c3,i):kr.from(zw,f3,i)}render(t){const i=this.renderer,r=this.quad;let n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;n=r.uvs,n[0]=n[6]=-s,n[1]=n[3]=-o,n[2]=n[4]=1-s,n[5]=n[7]=1-o,r.invalidate();const l=t._texture,h=l.baseTexture,c=h.alphaMode>0,f=t.tileTransform.localTransform,m=t.uvMatrix;let p=h.isPowerOfTwo&&l.frame.width===h.width&&l.frame.height===h.height;p&&(h._glTextures[i.CONTEXT_UID]?p=h.wrapMode!==an.CLAMP:h.wrapMode===an.CLAMP&&(h.wrapMode=an.REPEAT));const v=p?this.simpleShader:this.shader,_=l.width,E=l.height,T=t._width,b=t._height;Ec.set(f.a*_/T,f.b*_/b,f.c*E/T,f.d*E/b,f.tx/T,f.ty/b),Ec.invert(),p?Ec.prepend(m.mapCoord):(v.uniforms.uMapCoord=m.mapCoord.toArray(!0),v.uniforms.uClampFrame=m.uClampFrame,v.uniforms.uClampOffset=m.uClampOffset),v.uniforms.uTransform=Ec.toArray(!0),v.uniforms.uColor=It.shared.setValue(t.tint).premultiply(t.worldAlpha,c).toArray(v.uniforms.uColor),v.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),v.uniforms.uSampler=l,i.shader.bind(v),i.geometry.bind(r),this.state.blendMode=kv(t.blendMode,c),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}d0.extension={name:"tilingSprite",type:st.RendererPlugin};dt.add(d0);const sy=class{constructor(e){this.stage=new Ee,e=Object.assign({forceCanvas:!1},e),this.renderer=jE(e),sy._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const i=sy._plugins.slice(0);i.reverse(),i.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let tl=sy;tl._plugins=[];dt.handleByList(st.Application,tl._plugins);class f0{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,r;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:s}=this._resizeTo;i=n,r=s}this.renderer.resize(i,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}f0.extension=st.Application;dt.add(f0);var AT={exports:{}},m3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",g3=m3,y3=g3;function IT(){}function RT(){}RT.resetWarningCache=IT;var v3=function(){function e(r,n,s,o,l,h){if(h!==y3){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:RT,resetWarningCache:IT};return i.PropTypes=i,i};AT.exports=v3();var _3=AT.exports;const Vt=qu(_3);function Ri(e){return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(e)}function MT(e){var t=function(i,r){if(Ri(i)!=="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var s=n.call(i,r||"default");if(Ri(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)}(e,"string");return Ri(t)==="symbol"?t:String(t)}function pe(e,t,i){return(t=MT(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qm(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Un(e){return function(t){if(Array.isArray(t))return qm(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,i){if(t){if(typeof t=="string")return qm(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qm(t,i):void 0}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function de(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n]}var x3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var S3=function(e){return e==null};function $l(e){var t=[];if(e===void 0)return t;if(typeof e=="string")t=e.split(",");else if(typeof e=="number")t=[e];else if(Array.isArray(e))t=Un(e);else{if(e===null||Ri(e)!=="object")return t;t=[e&&(e==null?void 0:e.x)||0,e&&(e==null?void 0:e.y)||0]}return t.filter(function(i){return!S3(i)&&!isNaN(i)}).map(Number)}function Hw(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function Qm(e){return e instanceof ct||e instanceof sn}var kd=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Km(e,t,i){if(Qm(e[t])&&Qm(i))e[t].copyFrom(i);else if(Qm(e[t])){var r=$l(i);de(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",t,JSON.stringify(i),Ri(i)),e[t].set(r.shift(),r.shift())}else e[t]=i}var Qo,kT=function(e){var t,i=e;if(!Array.isArray(i)){if(t=e,Object.prototype.toString.call(t)!=="[object Object]")throw new Error("collection needs to be an Array or Object");i=Object.keys(e)}var r={};return i.forEach(function(n){r[n]=!0}),function(n){return r[n]!==void 0}},DT=function(e){return function(){return!e.apply(void 0,arguments)}},oy="children",b3=(pe(Qo={},oy,!0),pe(Qo,"parent",!0),pe(Qo,"worldAlpha",!0),pe(Qo,"worldTransform",!0),pe(Qo,"worldVisible",!0),Qo),ay={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},dn=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(l){return requestAnimationFrame(function(){var h,c;l==null||(h=l.__reactpixi)===null||h===void 0||(c=h.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__")})},n=function(l,h){if(i.hasOwnProperty(l))return de(h.typeofs.some(function(c){return Ri(i[l])===c})||h.instanceofs.some(function(c){return i[l]instanceof c}),"".concat(e," ").concat(l," prop is invalid")),i[l]};if(i.texture)return de(i.texture instanceof tt,"".concat(e," texture needs to be typeof `Texture`")),i.texture;var s=n("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||n("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||n("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,tt]});de(!!s,"".concat(e," could not get texture from props"));var o=tt.from(s);return o.__reactpixi={root:t},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},E3=DT(kT([].concat(Un(Object.keys(b3)),Un(kd))));function fn(e,t,i){var r=!1;if(de(qt.prototype.isPrototypeOf(e),"instance needs to be typeof `DisplayObject`, got `%s`",Ri(e)),!i.ignoreEvents)for(var n=typeof e.removeListener=="function",s=typeof e.on=="function",o=0;o<kd.length;o++){var l=kd[o];t[l]!==i[l]&&(r=!0,typeof t[l]=="function"&&n&&e.removeListener(l,t[l]),typeof i[l]=="function"&&s&&e.on(l,i[l]))}var h=Object.keys(i||{});if(i.overwriteProps){for(var c=0;c<h.length;c++){var f=h[c];t[f]!==i[f]&&(r=!0,Km(e,f,i[f]))}return r}for(var m=h.filter(E3),p=0;p<m.length;p++){var v=m[p],_=i[v];i[v]!==t[v]&&(r=!0),_!==void 0?Km(e,v,_):v in ay?(console.warn("setting default value: ".concat(v,", from: ").concat(e[v]," to: ").concat(_," for"),e),r=!0,Km(e,v,ay[v])):console.warn("ignoring prop: ".concat(v,", from ").concat(e[v]," to ").concat(_," for"),e)}return r}var T3=function(e,t){var i=t.text,r=t.style;return new l0(i,r)},C3=function(){return new Ee};function ks(e,t){if(e==null)return{};var i,r,n=function(o,l){if(o==null)return{};var h,c,f={},m=Object.keys(o);for(c=0;c<m.length;c++)h=m[c],l.indexOf(h)>=0||(f[h]=o[h]);return f}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var P3=["draw","geometry"],A3=function(e,t){var i=t.geometry;de(!i||i instanceof fs,"Graphics geometry needs to be a `PIXI.Graphics`");var r=i?new fs(i.geometry):new fs;return r.applyProps=function(n,s,o){var l=o.draw;o.geometry;var h=fn(n,s,ks(o,P3));return s.draw!==l&&typeof l=="function"&&(h=!0,l.call(r,r)),h},r},I3=["image","texture"],R3=function(e,t){var i=t.leftWidth,r=i===void 0?10:i,n=t.topHeight,s=n===void 0?10:n,o=t.rightWidth,l=o===void 0?10:o,h=t.bottomHeight,c=h===void 0?10:h,f=dn("NineSlicePlane",e,t),m=new ET(f,r,s,l,c);return m.applyProps=function(p,v,_){var E=_.image,T=_.texture,b=fn(p,v,ks(_,I3));return(E||T)&&(T!==v.texture&&(b=!0),p.texture=dn("NineSlicePlane",e,_)),b},m};function Gw(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function Tc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Gw(Object(i),!0).forEach(function(r){pe(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Gw(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var M3=function(e,t){var i=t.maxSize,r=i===void 0?1500:i,n=t.batchSize,s=n===void 0?16384:n,o=t.autoResize,l=o!==void 0&&o,h=Tc(Tc({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),t.properties||{}),c=Tc(Tc({},{children:!1,texture:!1,baseTexture:!1}),t.destroyOptions||{}),f=new PT(r,h,s,l);return f.willUnmount=function(m,p,v){m.destroy(c)},f},k3=["image","texture"],D3=function(e,t){var i=new lr(dn("Sprite",e,t));return i.applyProps=function(r,n,s){var o=s.image,l=s.texture,h=fn(r,n,ks(s,k3));return(l&&n.texture!==s.texture||o&&n.image!==s.image)&&(n.texture!==s.texture&&(h=!0),r.texture=dn("Sprite",e,s)),h},i},O3=["textures","isPlaying","initialFrame"],N3=function(e,t){var i=t.textures,r=t.images,n=t.isPlaying,s=n===void 0||n,o=t.initialFrame,l=function(c){return c.map(function(f){return de(f instanceof tt||(f==null?void 0:f.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),f})},h=r?La.fromImages(r):new La(l(i));return h[s?"gotoAndPlay":"gotoAndStop"](o||0),h.applyProps=function(c,f,m){var p=m.textures,v=m.isPlaying,_=m.initialFrame,E=fn(c,f,ks(m,O3));if(p&&f.textures!==p&&(c.textures=l(p),E=!0),v!==f.isPlaying||_!==f.initialFrame){var T=typeof _=="number"?_:h.currentFrame||0;h[v?"gotoAndPlay":"gotoAndStop"](T),E=!0}return E},h},F3=function(e,t){var i=t.text,r=i===void 0?"":i,n=t.style,s=n===void 0?{}:n,o=t.isSprite,l=new sh(r,s);return o?(l.updateText(),new lr(l.texture)):l},L3=["tileScale","tilePosition","image","texture"],B3=function(e,t){var i=t.width,r=i===void 0?100:i,n=t.height,s=n===void 0?100:n,o=dn("TilingSprite",e,t),l=new Af(o,r,s);return l.applyProps=function(h,c,f){var m=f.tileScale,p=f.tilePosition,v=f.image,_=f.texture,E=fn(h,c,ks(f,L3));if(p){var T,b=$l(p);(T=h.tilePosition).set.apply(T,Un(b)),E=!Hw($l(c.tilePosition),b)||E}if(m){var S,w=$l(m);(S=h.tileScale).set.apply(S,Un(w)),E=!Hw($l(c.tileScale),w)||E}return(v||_)&&(_!==c.texture&&(E=!0),h.texture=dn("Sprite",e,f)),E},l},U3=["image","texture"],z3=function(e,t){var i=dn("Mesh",e,t),r=t.vertices,n=t.uvs,s=t.indices,o=t.drawMode,l=o===void 0?Ji.TRIANGLES:o,h=new TT(i,r,n,s,l);return h.applyProps=function(c,f,m){var p=m.image,v=m.texture,_=fn(c,f,ks(m,U3));return(p||v)&&(v!==f.texture&&(_=!0),c.texture=dn("Mesh",e,m)),_},h},H3=["image","texture"],G3=function(e,t){var i=dn("SimpleRope",e,t),r=t.points,n=new CT(i,r);return n.applyProps=function(s,o,l){var h=l.image,c=l.texture,f=ks(l,H3);de(Array.isArray(l.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var m=fn(s,o,f);return(h||c)&&(c!==o.texture&&(m=!0),s.texture=dn("SimpleRope",e,l)),m},n},W3=Object.freeze({__proto__:null,BitmapText:T3,Container:C3,Graphics:A3,NineSlicePlane:R3,ParticleContainer:M3,Sprite:D3,Text:F3,TilingSprite:B3,SimpleMesh:z3,SimpleRope:G3,AnimatedSprite:N3});function Ww(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function $w(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(i),!0).forEach(function(r){pe(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ww(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var _i={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},$3=Object.keys(_i).reduce(function(e,t){return $w($w({},e),{},pe({},t,W3[t]))},{}),OT={};function j3(e,t){return de(!!e,"Expect type to be defined, got `%s`",e),de(!_i[e],"Component `%s` could not be created, already exists in default components.",e),OT[e]=t,e}var jw,Vw,Xw,Yw,ly={},uy={},V3={get exports(){return uy},set exports(e){uy=e}},qw={};function X3(){return Vw||(Vw=1,V3.exports=(jw||(jw=1,function(e){function t(D,$){var M=D.length;D.push($);t:for(;0<M;){var Q=M-1>>>1,rt=D[Q];if(!(0<n(rt,$)))break t;D[Q]=$,D[M]=rt,M=Q}}function i(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var $=D[0],M=D.pop();if(M!==$){D[0]=M;t:for(var Q=0,rt=D.length,wt=rt>>>1;Q<wt;){var vt=2*(Q+1)-1,Ft=D[vt],Et=vt+1,Ot=D[Et];if(0>n(Ft,M))Et<rt&&0>n(Ot,Ft)?(D[Q]=Ot,D[Et]=M,Q=Et):(D[Q]=Ft,D[vt]=M,Q=vt);else{if(!(Et<rt&&0>n(Ot,M)))break t;D[Q]=Ot,D[Et]=M,Q=Et}}}return $}function n(D,$){var M=D.sortIndex-$.sortIndex;return M!==0?M:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var h=[],c=[],f=1,m=null,p=3,v=!1,_=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function w(D){for(var $=i(c);$!==null;){if($.callback===null)r(c);else{if(!($.startTime<=D))break;r(c),$.sortIndex=$.expirationTime,t(h,$)}$=i(c)}}function P(D){if(E=!1,w(D),!_)if(i(h)!==null)_=!0,pt(I);else{var $=i(c);$!==null&&et(P,$.startTime-D)}}function I(D,$){_=!1,E&&(E=!1,b(X),X=-1),v=!0;var M=p;try{for(w($),m=i(h);m!==null&&(!(m.expirationTime>$)||D&&!K());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,p=m.priorityLevel;var rt=Q(m.expirationTime<=$);$=e.unstable_now(),typeof rt=="function"?m.callback=rt:m===i(h)&&r(h),w($)}else r(h);m=i(h)}if(m!==null)var wt=!0;else{var vt=i(c);vt!==null&&et(P,vt.startTime-$),wt=!1}return wt}finally{m=null,p=M,v=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var F,O=!1,k=null,X=-1,j=5,V=-1;function K(){return!(e.unstable_now()-V<j)}function B(){if(k!==null){var D=e.unstable_now();V=D;var $=!0;try{$=k(!0,D)}finally{$?F():(O=!1,k=null)}}else O=!1}if(typeof S=="function")F=function(){S(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,gt=z.port2;z.port1.onmessage=B,F=function(){gt.postMessage(null)}}else F=function(){T(B,0)};function pt(D){k=D,O||(O=!0,F())}function et(D,$){X=T(function(){D(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){_||v||(_=!0,pt(I))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var M=p;p=$;try{return D()}finally{p=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var M=p;p=D;try{return $()}finally{p=M}},e.unstable_scheduleCallback=function(D,$,M){var Q=e.unstable_now();switch(M=typeof M=="object"&&M!==null&&typeof(M=M.delay)=="number"&&0<M?Q+M:Q,D){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return D={id:f++,callback:$,priorityLevel:D,startTime:M,expirationTime:rt=M+rt,sortIndex:-1},M>Q?(D.sortIndex=M,t(c,D),i(h)===null&&D===i(c)&&(E?(b(X),X=-1):E=!0,et(P,M-Q))):(D.sortIndex=rt,t(h,D),_||v||(_=!0,pt(I))),D},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(D){var $=p;return function(){var M=p;p=$;try{return D.apply(this,arguments)}finally{p=M}}}}(qw)),qw)),uy}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Y3(){return Yw||(Yw=1,Xw=function(e){var t={},i=kn,r=X3(),n=Object.assign;function s(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),h=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),P=Symbol.iterator;function I(a){return a===null||typeof a!="object"?null:typeof(a=P&&a[P]||a["@@iterator"])=="function"?a:null}function F(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case c:return"Fragment";case h:return"Portal";case m:return"Profiler";case f:return"StrictMode";case E:return"Suspense";case T:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case v:return(a.displayName||"Context")+".Consumer";case p:return(a._context.displayName||"Context")+".Provider";case _:var u=a.render;return(a=a.displayName)||(a=(a=u.displayName||u.name||"")!==""?"ForwardRef("+a+")":"ForwardRef"),a;case b:return(u=a.displayName||null)!==null?u:F(a.type)||"Memo";case S:u=a._payload,a=a._init;try{return F(a(u))}catch{}}return null}function O(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=(a=u.render).displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(u);case 8:return u===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function k(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do 4098&(u=a).flags&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function X(a){if(k(a)!==a)throw Error(s(188))}function j(a){var u=a.alternate;if(!u){if((u=k(a))===null)throw Error(s(188));return u!==a?null:a}for(var d=a,g=u;;){var y=d.return;if(y===null)break;var x=y.alternate;if(x===null){if((g=y.return)!==null){d=g;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===d)return X(y),a;if(x===g)return X(y),u;x=x.sibling}throw Error(s(188))}if(d.return!==g.return)d=y,g=x;else{for(var C=!1,A=y.child;A;){if(A===d){C=!0,d=y,g=x;break}if(A===g){C=!0,g=y,d=x;break}A=A.sibling}if(!C){for(A=x.child;A;){if(A===d){C=!0,d=x,g=y;break}if(A===g){C=!0,g=x,d=y;break}A=A.sibling}if(!C)throw Error(s(189))}}if(d.alternate!==g)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:u}function V(a){return(a=j(a))!==null?K(a):null}function K(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=K(a);if(u!==null)return u;a=a.sibling}return null}function B(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){if(a.tag!==4){var u=B(a);if(u!==null)return u}a=a.sibling}return null}var z,gt=Array.isArray,pt=e.getPublicInstance,et=e.getRootHostContext,D=e.getChildHostContext,$=e.prepareForCommit,M=e.resetAfterCommit,Q=e.createInstance,rt=e.appendInitialChild,wt=e.finalizeInitialChildren,vt=e.prepareUpdate,Ft=e.shouldSetTextContent,Et=e.createTextInstance,Ot=e.scheduleTimeout,Te=e.cancelTimeout,Be=e.noTimeout,le=e.isPrimaryRenderer,Tt=e.supportsMutation,$t=e.supportsPersistence,Mt=e.supportsHydration,Li=e.getInstanceFromNode,Bi=e.preparePortalMount,Fs=e.getCurrentEventPriority,Jf=e.detachDeletedInstance,Ro=e.supportsMicrotasks,UA=e.scheduleMicrotask,nl=e.supportsTestSelectors,zA=e.findFiberRoot,HA=e.getBoundingRect,GA=e.getTextContent,sl=e.isHiddenSubtree,WA=e.matchAccessibilityRole,$A=e.setFocusIfFocusable,jA=e.setupIntersectionObserver,VA=e.appendChild,XA=e.appendChildToContainer,YA=e.commitTextUpdate,qA=e.commitMount,QA=e.commitUpdate,KA=e.insertBefore,ZA=e.insertInContainerBefore,JA=e.removeChild,tI=e.removeChildFromContainer,N_=e.resetTextContent,eI=e.hideInstance,iI=e.hideTextInstance,rI=e.unhideInstance,nI=e.unhideTextInstance,sI=e.clearContainer,oI=e.cloneInstance,F_=e.createContainerChildSet,L_=e.appendChildToContainerChildSet,aI=e.finalizeContainerChildren,tp=e.replaceContainerChildren,B_=e.cloneHiddenInstance,U_=e.cloneHiddenTextInstance,lI=e.canHydrateInstance,uI=e.canHydrateTextInstance,hI=e.canHydrateSuspenseInstance,z_=e.isSuspenseInstancePending,ep=e.isSuspenseInstanceFallback,cI=e.getSuspenseInstanceFallbackErrorDetails,dI=e.registerSuspenseInstanceRetry,gh=e.getNextHydratableSibling,fI=e.getFirstHydratableChild,pI=e.getFirstHydratableChildWithinContainer,mI=e.getFirstHydratableChildWithinSuspenseInstance,gI=e.hydrateInstance,yI=e.hydrateTextInstance,vI=e.hydrateSuspenseInstance,_I=e.getNextHydratableInstanceAfterSuspenseInstance,xI=e.commitHydratedContainer,wI=e.commitHydratedSuspenseInstance,SI=e.clearSuspenseBoundary,bI=e.clearSuspenseBoundaryFromContainer,EI=e.shouldDeleteUnhydratedTailInstances,TI=e.didNotMatchHydratedContainerTextInstance,CI=e.didNotMatchHydratedTextInstance;function ol(a){if(z===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);z=u&&u[1]||""}return`
`+z+a}var ip=!1;function rp(a,u){if(!a||ip)return"";ip=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(U){var g=U}Reflect.construct(a,[],u)}else{try{u.call()}catch(U){g=U}a.call(u.prototype)}else{try{throw Error()}catch(U){g=U}a()}}catch(U){if(U&&g&&typeof U.stack=="string"){for(var y=U.stack.split(`
`),x=g.stack.split(`
`),C=y.length-1,A=x.length-1;1<=C&&0<=A&&y[C]!==x[A];)A--;for(;1<=C&&0<=A;C--,A--)if(y[C]!==x[A]){if(C!==1||A!==1)do if(C--,0>--A||y[C]!==x[A]){var N=`
`+y[C].replace(" at new "," at ");return a.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",a.displayName)),N}while(1<=C&&0<=A);break}}}finally{ip=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?ol(a):""}var PI=Object.prototype.hasOwnProperty,np=[],Mo=-1;function jn(a){return{current:a}}function Qt(a){0>Mo||(a.current=np[Mo],np[Mo]=null,Mo--)}function Ht(a,u){Mo++,np[Mo]=a.current,a.current=u}var Vn={},je=jn(Vn),ui=jn(!1),Ls=Vn;function ko(a,u){var d=a.type.contextTypes;if(!d)return Vn;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===u)return g.__reactInternalMemoizedMaskedChildContext;var y,x={};for(y in d)x[y]=u[y];return g&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=x),x}function xi(a){return(a=a.childContextTypes)!=null}function sp(){Qt(ui),Qt(je)}function H_(a,u,d){if(je.current!==Vn)throw Error(s(168));Ht(je,u),Ht(ui,d)}function G_(a,u,d){var g=a.stateNode;if(u=u.childContextTypes,typeof g.getChildContext!="function")return d;for(var y in g=g.getChildContext())if(!(y in u))throw Error(s(108,O(a)||"Unknown",y));return n({},d,g)}function yh(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vn,Ls=je.current,Ht(je,a),Ht(ui,ui.current),!0}function W_(a,u,d){var g=a.stateNode;if(!g)throw Error(s(169));d?(a=G_(a,u,Ls),g.__reactInternalMemoizedMergedChildContext=a,Qt(ui),Qt(je),Ht(je,a)):Qt(ui),Ht(ui,d)}var cr=Math.clz32?Math.clz32:function(a){return(a>>>=0)===0?32:31-(AI(a)/II|0)|0},AI=Math.log,II=Math.LN2,op=64,ap=4194304;function al(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&a;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&a;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function vh(a,u){var d=a.pendingLanes;if(d===0)return 0;var g=0,y=a.suspendedLanes,x=a.pingedLanes,C=268435455&d;if(C!==0){var A=C&~y;A!==0?g=al(A):(x&=C)!==0&&(g=al(x))}else(C=d&~y)!==0?g=al(C):x!==0&&(g=al(x));if(g===0)return 0;if(u!==0&&u!==g&&!(u&y)&&((y=g&-g)>=(x=u&-u)||y===16&&4194240&x))return u;if(4&g&&(g|=16&d),(u=a.entangledLanes)!==0)for(a=a.entanglements,u&=g;0<u;)y=1<<(d=31-cr(u)),g|=a[d],u&=~y;return g}function RI(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;default:return-1}}function lp(a){return(a=-1073741825&a.pendingLanes)!==0?a:1073741824&a?1073741824:0}function $_(){var a=op;return!(4194240&(op<<=1))&&(op=64),a}function up(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function ll(a,u,d){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),(a=a.eventTimes)[u=31-cr(u)]=d}function hp(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var g=31-cr(d),y=1<<g;y&u|a[g]&u&&(a[g]|=u),d&=~y}}var kt=0;function j_(a){return 1<(a&=-a)?4<a?268435455&a?16:536870912:4:1}var cp=r.unstable_scheduleCallback,V_=r.unstable_cancelCallback,MI=r.unstable_shouldYield,kI=r.unstable_requestPaint,Ce=r.unstable_now,dp=r.unstable_ImmediatePriority,DI=r.unstable_UserBlockingPriority,X_=r.unstable_NormalPriority,OI=r.unstable_IdlePriority,_h=null,zr=null,dr=typeof Object.is=="function"?Object.is:function(a,u){return a===u&&(a!==0||1/a==1/u)||a!=a&&u!=u},gn=null,xh=!1,fp=!1;function Y_(a){gn===null?gn=[a]:gn.push(a)}function Hr(){if(!fp&&gn!==null){fp=!0;var a=0,u=kt;try{var d=gn;for(kt=1;a<d.length;a++){var g=d[a];do g=g(!0);while(g!==null)}gn=null,xh=!1}catch(y){throw gn!==null&&(gn=gn.slice(a+1)),cp(dp,Hr),y}finally{kt=u,fp=!1}}return null}var Do=[],Oo=0,wh=null,Sh=0,Ui=[],zi=0,Bs=null,Gr=1,yn="";function Us(a,u){Do[Oo++]=Sh,Do[Oo++]=wh,wh=a,Sh=u}function q_(a,u,d){Ui[zi++]=Gr,Ui[zi++]=yn,Ui[zi++]=Bs,Bs=a;var g=Gr;a=yn;var y=32-cr(g)-1;g&=~(1<<y),d+=1;var x=32-cr(u)+y;if(30<x){var C=y-y%5;x=(g&(1<<C)-1).toString(32),g>>=C,y-=C,Gr=1<<32-cr(u)+y|d<<y|g,yn=x+a}else Gr=1<<x|d<<y|g,yn=a}function pp(a){a.return!==null&&(Us(a,1),q_(a,1,0))}function mp(a){for(;a===wh;)wh=Do[--Oo],Do[Oo]=null,Sh=Do[--Oo],Do[Oo]=null;for(;a===Bs;)Bs=Ui[--zi],Ui[zi]=null,yn=Ui[--zi],Ui[zi]=null,Gr=Ui[--zi],Ui[zi]=null}var wi=null,Hi=null,Kt=!1,ul=!1,fr=null;function Q_(a,u){var d=Vi(5,null,null,0);d.elementType="DELETED",d.stateNode=u,d.return=a,(u=a.deletions)===null?(a.deletions=[d],a.flags|=16):u.push(d)}function K_(a,u){switch(a.tag){case 5:return(u=lI(u,a.type,a.pendingProps))!==null&&(a.stateNode=u,wi=a,Hi=fI(u),!0);case 6:return(u=uI(u,a.pendingProps))!==null&&(a.stateNode=u,wi=a,Hi=null,!0);case 13:if((u=hI(u))!==null){var d=Bs!==null?{id:Gr,overflow:yn}:null;return a.memoizedState={dehydrated:u,treeContext:d,retryLane:1073741824},(d=Vi(18,null,null,0)).stateNode=u,d.return=a,a.child=d,wi=a,Hi=null,!0}return!1;default:return!1}}function gp(a){return(1&a.mode)!=0&&(128&a.flags)==0}function yp(a){if(Kt){var u=Hi;if(u){var d=u;if(!K_(a,u)){if(gp(a))throw Error(s(418));u=gh(d);var g=wi;u&&K_(a,u)?Q_(g,d):(a.flags=-4097&a.flags|2,Kt=!1,wi=a)}}else{if(gp(a))throw Error(s(418));a.flags=-4097&a.flags|2,Kt=!1,wi=a}}}function Z_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;wi=a}function bh(a){if(!Mt||a!==wi)return!1;if(!Kt)return Z_(a),Kt=!0,!1;if(a.tag!==3&&(a.tag!==5||EI(a.type)&&!Ft(a.type,a.memoizedProps))){var u=Hi;if(u){if(gp(a))throw J_(),Error(s(418));for(;u;)Q_(a,u),u=gh(u)}}if(Z_(a),a.tag===13){if(!Mt)throw Error(s(316));if(!(a=(a=a.memoizedState)!==null?a.dehydrated:null))throw Error(s(317));Hi=_I(a)}else Hi=wi?gh(a.stateNode):null;return!0}function J_(){for(var a=Hi;a;)a=gh(a)}function No(){Mt&&(Hi=wi=null,ul=Kt=!1)}function vp(a){fr===null?fr=[a]:fr.push(a)}var NI=o.ReactCurrentBatchConfig;function Eh(a,u){if(dr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),g=Object.keys(u);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var y=d[g];if(!PI.call(u,y)||!dr(a[y],u[y]))return!1}return!0}function FI(a){switch(a.tag){case 5:return ol(a.type);case 16:return ol("Lazy");case 13:return ol("Suspense");case 19:return ol("SuspenseList");case 0:case 2:case 15:return a=rp(a.type,!1);case 11:return a=rp(a.type.render,!1);case 1:return a=rp(a.type,!0);default:return""}}function pr(a,u){if(a&&a.defaultProps){for(var d in u=n({},u),a=a.defaultProps)u[d]===void 0&&(u[d]=a[d]);return u}return u}var Th=jn(null),Ch=null,Fo=null,_p=null;function xp(){_p=Fo=Ch=null}function tx(a,u,d){le?(Ht(Th,u._currentValue),u._currentValue=d):(Ht(Th,u._currentValue2),u._currentValue2=d)}function wp(a){var u=Th.current;Qt(Th),le?a._currentValue=u:a._currentValue2=u}function Sp(a,u,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),a===d)break;a=a.return}}function Lo(a,u){Ch=a,_p=Fo=null,(a=a.dependencies)!==null&&a.firstContext!==null&&(a.lanes&u&&(hi=!0),a.firstContext=null)}function Gi(a){var u=le?a._currentValue:a._currentValue2;if(_p!==a)if(a={context:a,memoizedValue:u,next:null},Fo===null){if(Ch===null)throw Error(s(308));Fo=a,Ch.dependencies={lanes:0,firstContext:a}}else Fo=Fo.next=a;return u}var zs=null;function bp(a){zs===null?zs=[a]:zs.push(a)}function ex(a,u,d,g){var y=u.interleaved;return y===null?(d.next=d,bp(u)):(d.next=y.next,y.next=d),u.interleaved=d,Wr(a,g)}function Wr(a,u){a.lanes|=u;var d=a.alternate;for(d!==null&&(d.lanes|=u),d=a,a=a.return;a!==null;)a.childLanes|=u,(d=a.alternate)!==null&&(d.childLanes|=u),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Xn=!1;function Ep(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ix(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function vn(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function Yn(a,u,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(2&At)!=0){var y=g.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),g.pending=u,Wr(a,d)}return(y=g.interleaved)===null?(u.next=u,bp(g)):(u.next=y.next,y.next=u),g.interleaved=u,Wr(a,d)}function Ph(a,u,d){if((u=u.updateQueue)!==null&&(u=u.shared,(4194240&d)!=0)){var g=u.lanes;d|=g&=a.pendingLanes,u.lanes=d,hp(a,d)}}function rx(a,u){var d=a.updateQueue,g=a.alternate;if(g!==null&&d===(g=g.updateQueue)){var y=null,x=null;if((d=d.firstBaseUpdate)!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};x===null?y=x=C:x=x.next=C,d=d.next}while(d!==null);x===null?y=x=u:x=x.next=u}else y=x=u;return d={baseState:g.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:g.shared,effects:g.effects},void(a.updateQueue=d)}(a=d.lastBaseUpdate)===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}function Ah(a,u,d,g){var y=a.updateQueue;Xn=!1;var x=y.firstBaseUpdate,C=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var N=A,U=N.next;N.next=null,C===null?x=U:C.next=U,C=N;var G=a.alternate;G!==null&&(A=(G=G.updateQueue).lastBaseUpdate)!==C&&(A===null?G.firstBaseUpdate=U:A.next=U,G.lastBaseUpdate=N)}if(x!==null){var it=y.baseState;for(C=0,G=U=N=null,A=x;;){var H=A.lane,Z=A.eventTime;if((g&H)===H){G!==null&&(G=G.next={eventTime:Z,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});t:{var lt=a,bt=A;switch(H=u,Z=d,bt.tag){case 1:if(typeof(lt=bt.payload)=="function"){it=lt.call(Z,it,H);break t}it=lt;break t;case 3:lt.flags=-65537&lt.flags|128;case 0:if((H=typeof(lt=bt.payload)=="function"?lt.call(Z,it,H):lt)==null)break t;it=n({},it,H);break t;case 2:Xn=!0}}A.callback!==null&&A.lane!==0&&(a.flags|=64,(H=y.effects)===null?y.effects=[A]:H.push(A))}else Z={eventTime:Z,lane:H,tag:A.tag,payload:A.payload,callback:A.callback,next:null},G===null?(U=G=Z,N=it):G=G.next=Z,C|=H;if((A=A.next)===null){if((A=y.shared.pending)===null)break;A=(H=A).next,H.next=null,y.lastBaseUpdate=H,y.shared.pending=null}}if(G===null&&(N=it),y.baseState=N,y.firstBaseUpdate=U,y.lastBaseUpdate=G,(u=y.shared.interleaved)!==null){y=u;do C|=y.lane,y=y.next;while(y!==u)}else x===null&&(y.shared.lanes=0);Gs|=C,a.lanes=C,a.memoizedState=it}}function nx(a,u,d){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var g=a[u],y=g.callback;if(y!==null){if(g.callback=null,g=d,typeof y!="function")throw Error(s(191,y));y.call(g)}}}var sx=new i.Component().refs;function Tp(a,u,d,g){d=(d=d(g,u=a.memoizedState))==null?u:n({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Ih={isMounted:function(a){return!!(a=a._reactInternals)&&k(a)===a},enqueueSetState:function(a,u,d){a=a._reactInternals;var g=Ye(),y=Zn(a),x=vn(g,y);x.payload=u,d!=null&&(x.callback=d),(u=Yn(a,x,y))!==null&&(ji(u,a,y,g),Ph(u,a,y))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var g=Ye(),y=Zn(a),x=vn(g,y);x.tag=1,x.payload=u,d!=null&&(x.callback=d),(u=Yn(a,x,y))!==null&&(ji(u,a,y,g),Ph(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=Ye(),g=Zn(a),y=vn(d,g);y.tag=2,u!=null&&(y.callback=u),(u=Yn(a,y,g))!==null&&(ji(u,a,g,d),Ph(u,a,g))}};function ox(a,u,d,g,y,x,C){return typeof(a=a.stateNode).shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,x,C):!u.prototype||!u.prototype.isPureReactComponent||!Eh(d,g)||!Eh(y,x)}function ax(a,u,d){var g=!1,y=Vn,x=u.contextType;return typeof x=="object"&&x!==null?x=Gi(x):(y=xi(u)?Ls:je.current,x=(g=(g=u.contextTypes)!=null)?ko(a,y):Vn),u=new u(d,x),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ih,a.stateNode=u,u._reactInternals=a,g&&((a=a.stateNode).__reactInternalMemoizedUnmaskedChildContext=y,a.__reactInternalMemoizedMaskedChildContext=x),u}function lx(a,u,d,g){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,g),u.state!==a&&Ih.enqueueReplaceState(u,u.state,null)}function Cp(a,u,d,g){var y=a.stateNode;y.props=d,y.state=a.memoizedState,y.refs=sx,Ep(a);var x=u.contextType;typeof x=="object"&&x!==null?y.context=Gi(x):(x=xi(u)?Ls:je.current,y.context=ko(a,x)),y.state=a.memoizedState,typeof(x=u.getDerivedStateFromProps)=="function"&&(Tp(a,u,x,d),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(u=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),u!==y.state&&Ih.enqueueReplaceState(y,y.state,null),Ah(a,d,y,g),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308)}function hl(a,u,d){if((a=d.ref)!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner){if(d.tag!==1)throw Error(s(309));var g=d.stateNode}if(!g)throw Error(s(147,a));var y=g,x=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===x?u.ref:(u=function(C){var A=y.refs;A===sx&&(A=y.refs={}),C===null?delete A[x]:A[x]=C},u._stringRef=x,u)}if(typeof a!="string")throw Error(s(284));if(!d._owner)throw Error(s(290,a))}return a}function Rh(a,u){throw a=Object.prototype.toString.call(u),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function ux(a){return(0,a._init)(a._payload)}function hx(a){function u(W,R){if(a){var L=W.deletions;L===null?(W.deletions=[R],W.flags|=16):L.push(R)}}function d(W,R){if(!a)return null;for(;R!==null;)u(W,R),R=R.sibling;return null}function g(W,R){for(W=new Map;R!==null;)R.key!==null?W.set(R.key,R):W.set(R.index,R),R=R.sibling;return W}function y(W,R){return(W=ts(W,R)).index=0,W.sibling=null,W}function x(W,R,L){return W.index=L,a?(L=W.alternate)!==null?(L=L.index)<R?(W.flags|=2,R):L:(W.flags|=2,R):(W.flags|=1048576,R)}function C(W){return a&&W.alternate===null&&(W.flags|=2),W}function A(W,R,L,Y){return R===null||R.tag!==6?((R=dm(L,W.mode,Y)).return=W,R):((R=y(R,L)).return=W,R)}function N(W,R,L,Y){var mt=L.type;return mt===c?G(W,R,L.props.children,Y,L.key):R!==null&&(R.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===S&&ux(mt)===R.type)?((Y=y(R,L.props)).ref=hl(W,R,L),Y.return=W,Y):((Y=ic(L.type,L.key,L.props,null,W.mode,Y)).ref=hl(W,R,L),Y.return=W,Y)}function U(W,R,L,Y){return R===null||R.tag!==4||R.stateNode.containerInfo!==L.containerInfo||R.stateNode.implementation!==L.implementation?((R=fm(L,W.mode,Y)).return=W,R):((R=y(R,L.children||[])).return=W,R)}function G(W,R,L,Y,mt){return R===null||R.tag!==7?((R=js(L,W.mode,Y,mt)).return=W,R):((R=y(R,L)).return=W,R)}function it(W,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return(R=dm(""+R,W.mode,L)).return=W,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case l:return(L=ic(R.type,R.key,R.props,null,W.mode,L)).ref=hl(W,null,R),L.return=W,L;case h:return(R=fm(R,W.mode,L)).return=W,R;case S:return it(W,(0,R._init)(R._payload),L)}if(gt(R)||I(R))return(R=js(R,W.mode,L,null)).return=W,R;Rh(W,R)}return null}function H(W,R,L,Y){var mt=R!==null?R.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return mt!==null?null:A(W,R,""+L,Y);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case l:return L.key===mt?N(W,R,L,Y):null;case h:return L.key===mt?U(W,R,L,Y):null;case S:return H(W,R,(mt=L._init)(L._payload),Y)}if(gt(L)||I(L))return mt!==null?null:G(W,R,L,Y,null);Rh(W,L)}return null}function Z(W,R,L,Y,mt){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return A(R,W=W.get(L)||null,""+Y,mt);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case l:return N(R,W=W.get(Y.key===null?L:Y.key)||null,Y,mt);case h:return U(R,W=W.get(Y.key===null?L:Y.key)||null,Y,mt);case S:return Z(W,R,L,(0,Y._init)(Y._payload),mt)}if(gt(Y)||I(Y))return G(R,W=W.get(L)||null,Y,mt,null);Rh(R,Y)}return null}function lt(W,R,L,Y){for(var mt=null,Lt=null,ut=R,Dt=R=0,ze=null;ut!==null&&Dt<L.length;Dt++){ut.index>Dt?(ze=ut,ut=null):ze=ut.sibling;var Bt=H(W,ut,L[Dt],Y);if(Bt===null){ut===null&&(ut=ze);break}a&&ut&&Bt.alternate===null&&u(W,ut),R=x(Bt,R,Dt),Lt===null?mt=Bt:Lt.sibling=Bt,Lt=Bt,ut=ze}if(Dt===L.length)return d(W,ut),Kt&&Us(W,Dt),mt;if(ut===null){for(;Dt<L.length;Dt++)(ut=it(W,L[Dt],Y))!==null&&(R=x(ut,R,Dt),Lt===null?mt=ut:Lt.sibling=ut,Lt=ut);return Kt&&Us(W,Dt),mt}for(ut=g(W,ut);Dt<L.length;Dt++)(ze=Z(ut,W,Dt,L[Dt],Y))!==null&&(a&&ze.alternate!==null&&ut.delete(ze.key===null?Dt:ze.key),R=x(ze,R,Dt),Lt===null?mt=ze:Lt.sibling=ze,Lt=ze);return a&&ut.forEach(function(es){return u(W,es)}),Kt&&Us(W,Dt),mt}function bt(W,R,L,Y){var mt=I(L);if(typeof mt!="function")throw Error(s(150));if((L=mt.call(L))==null)throw Error(s(151));for(var Lt=mt=null,ut=R,Dt=R=0,ze=null,Bt=L.next();ut!==null&&!Bt.done;Dt++,Bt=L.next()){ut.index>Dt?(ze=ut,ut=null):ze=ut.sibling;var es=H(W,ut,Bt.value,Y);if(es===null){ut===null&&(ut=ze);break}a&&ut&&es.alternate===null&&u(W,ut),R=x(es,R,Dt),Lt===null?mt=es:Lt.sibling=es,Lt=es,ut=ze}if(Bt.done)return d(W,ut),Kt&&Us(W,Dt),mt;if(ut===null){for(;!Bt.done;Dt++,Bt=L.next())(Bt=it(W,Bt.value,Y))!==null&&(R=x(Bt,R,Dt),Lt===null?mt=Bt:Lt.sibling=Bt,Lt=Bt);return Kt&&Us(W,Dt),mt}for(ut=g(W,ut);!Bt.done;Dt++,Bt=L.next())(Bt=Z(ut,W,Dt,Bt.value,Y))!==null&&(a&&Bt.alternate!==null&&ut.delete(Bt.key===null?Dt:Bt.key),R=x(Bt,R,Dt),Lt===null?mt=Bt:Lt.sibling=Bt,Lt=Bt);return a&&ut.forEach(function(o2){return u(W,o2)}),Kt&&Us(W,Dt),mt}return function W(R,L,Y,mt){if(typeof Y=="object"&&Y!==null&&Y.type===c&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case l:t:{for(var Lt=Y.key,ut=L;ut!==null;){if(ut.key===Lt){if((Lt=Y.type)===c){if(ut.tag===7){d(R,ut.sibling),(L=y(ut,Y.props.children)).return=R,R=L;break t}}else if(ut.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===S&&ux(Lt)===ut.type){d(R,ut.sibling),(L=y(ut,Y.props)).ref=hl(R,ut,Y),L.return=R,R=L;break t}d(R,ut);break}u(R,ut),ut=ut.sibling}Y.type===c?((L=js(Y.props.children,R.mode,mt,Y.key)).return=R,R=L):((mt=ic(Y.type,Y.key,Y.props,null,R.mode,mt)).ref=hl(R,L,Y),mt.return=R,R=mt)}return C(R);case h:t:{for(ut=Y.key;L!==null;){if(L.key===ut){if(L.tag===4&&L.stateNode.containerInfo===Y.containerInfo&&L.stateNode.implementation===Y.implementation){d(R,L.sibling),(L=y(L,Y.children||[])).return=R,R=L;break t}d(R,L);break}u(R,L),L=L.sibling}(L=fm(Y,R.mode,mt)).return=R,R=L}return C(R);case S:return W(R,L,(ut=Y._init)(Y._payload),mt)}if(gt(Y))return lt(R,L,Y,mt);if(I(Y))return bt(R,L,Y,mt);Rh(R,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,L!==null&&L.tag===6?(d(R,L.sibling),(L=y(L,Y)).return=R,R=L):(d(R,L),(L=dm(Y,R.mode,mt)).return=R,R=L),C(R)):d(R,L)}}var Bo=hx(!0),cx=hx(!1),cl={},Wi=jn(cl),dl=jn(cl),Uo=jn(cl);function $r(a){if(a===cl)throw Error(s(174));return a}function Pp(a,u){Ht(Uo,u),Ht(dl,a),Ht(Wi,cl),a=et(u),Qt(Wi),Ht(Wi,a)}function zo(){Qt(Wi),Qt(dl),Qt(Uo)}function dx(a){var u=$r(Uo.current),d=$r(Wi.current);d!==(u=D(d,a.type,u))&&(Ht(dl,a),Ht(Wi,u))}function Ap(a){dl.current===a&&(Qt(Wi),Qt(dl))}var ue=jn(0);function Mh(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&((d=d.dehydrated)===null||z_(d)||ep(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(128&u.flags)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ip=[];function Rp(){for(var a=0;a<Ip.length;a++){var u=Ip[a];le?u._workInProgressVersionPrimary=null:u._workInProgressVersionSecondary=null}Ip.length=0}var kh=o.ReactCurrentDispatcher,Mp=o.ReactCurrentBatchConfig,Hs=0,ie=null,Pe=null,Ae=null,Dh=!1,fl=!1,pl=0,LI=0;function Ve(){throw Error(s(321))}function kp(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!dr(a[d],u[d]))return!1;return!0}function Dp(a,u,d,g,y,x){if(Hs=x,ie=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,kh.current=a===null||a.memoizedState===null?HI:GI,a=d(g,y),fl){x=0;do{if(fl=!1,pl=0,25<=x)throw Error(s(301));x+=1,Ae=Pe=null,u.updateQueue=null,kh.current=WI,a=d(g,y)}while(fl)}if(kh.current=Fh,u=Pe!==null&&Pe.next!==null,Hs=0,Ae=Pe=ie=null,Dh=!1,u)throw Error(s(300));return a}function Op(){var a=pl!==0;return pl=0,a}function jr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?ie.memoizedState=Ae=a:Ae=Ae.next=a,Ae}function $i(){if(Pe===null){var a=ie.alternate;a=a!==null?a.memoizedState:null}else a=Pe.next;var u=Ae===null?ie.memoizedState:Ae.next;if(u!==null)Ae=u,Pe=a;else{if(a===null)throw Error(s(310));a={memoizedState:(Pe=a).memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ae===null?ie.memoizedState=Ae=a:Ae=Ae.next=a}return Ae}function ml(a,u){return typeof u=="function"?u(a):u}function Np(a){var u=$i(),d=u.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var g=Pe,y=g.baseQueue,x=d.pending;if(x!==null){if(y!==null){var C=y.next;y.next=x.next,x.next=C}g.baseQueue=y=x,d.pending=null}if(y!==null){x=y.next,g=g.baseState;var A=C=null,N=null,U=x;do{var G=U.lane;if((Hs&G)===G)N!==null&&(N=N.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),g=U.hasEagerState?U.eagerState:a(g,U.action);else{var it={lane:G,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};N===null?(A=N=it,C=g):N=N.next=it,ie.lanes|=G,Gs|=G}U=U.next}while(U!==null&&U!==x);N===null?C=g:N.next=A,dr(g,u.memoizedState)||(hi=!0),u.memoizedState=g,u.baseState=C,u.baseQueue=N,d.lastRenderedState=g}if((a=d.interleaved)!==null){y=a;do x=y.lane,ie.lanes|=x,Gs|=x,y=y.next;while(y!==a)}else y===null&&(d.lanes=0);return[u.memoizedState,d.dispatch]}function Fp(a){var u=$i(),d=u.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var g=d.dispatch,y=d.pending,x=u.memoizedState;if(y!==null){d.pending=null;var C=y=y.next;do x=a(x,C.action),C=C.next;while(C!==y);dr(x,u.memoizedState)||(hi=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),d.lastRenderedState=x}return[x,g]}function fx(){}function px(a,u){var d=ie,g=$i(),y=u(),x=!dr(g.memoizedState,y);if(x&&(g.memoizedState=y,hi=!0),g=g.queue,Lp(yx.bind(null,d,g,a),[a]),g.getSnapshot!==u||x||Ae!==null&&1&Ae.memoizedState.tag){if(d.flags|=2048,gl(9,gx.bind(null,d,g,y,u),void 0,null),Ie===null)throw Error(s(349));30&Hs||mx(d,u,y)}return y}function mx(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},(u=ie.updateQueue)===null?(u={lastEffect:null,stores:null},ie.updateQueue=u,u.stores=[a]):(d=u.stores)===null?u.stores=[a]:d.push(a)}function gx(a,u,d,g){u.value=d,u.getSnapshot=g,vx(u)&&_x(a)}function yx(a,u,d){return d(function(){vx(u)&&_x(a)})}function vx(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!dr(a,d)}catch{return!0}}function _x(a){var u=Wr(a,1);u!==null&&ji(u,a,1,-1)}function xx(a){var u=jr();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:a},u.queue=a,a=a.dispatch=zI.bind(null,ie,a),[u.memoizedState,a]}function gl(a,u,d,g){return a={tag:a,create:u,destroy:d,deps:g,next:null},(u=ie.updateQueue)===null?(u={lastEffect:null,stores:null},ie.updateQueue=u,u.lastEffect=a.next=a):(d=u.lastEffect)===null?u.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,u.lastEffect=a),a}function wx(){return $i().memoizedState}function Oh(a,u,d,g){var y=jr();ie.flags|=a,y.memoizedState=gl(1|u,d,void 0,g===void 0?null:g)}function Nh(a,u,d,g){var y=$i();g=g===void 0?null:g;var x=void 0;if(Pe!==null){var C=Pe.memoizedState;if(x=C.destroy,g!==null&&kp(g,C.deps))return void(y.memoizedState=gl(u,d,x,g))}ie.flags|=a,y.memoizedState=gl(1|u,d,x,g)}function Sx(a,u){return Oh(8390656,8,a,u)}function Lp(a,u){return Nh(2048,8,a,u)}function bx(a,u){return Nh(4,2,a,u)}function Ex(a,u){return Nh(4,4,a,u)}function Tx(a,u){return typeof u=="function"?(a=a(),u(a),function(){u(null)}):u!=null?(a=a(),u.current=a,function(){u.current=null}):void 0}function Cx(a,u,d){return d=d!=null?d.concat([a]):null,Nh(4,4,Tx.bind(null,u,a),d)}function Bp(){}function Px(a,u){var d=$i();u=u===void 0?null:u;var g=d.memoizedState;return g!==null&&u!==null&&kp(u,g[1])?g[0]:(d.memoizedState=[a,u],a)}function Ax(a,u){var d=$i();u=u===void 0?null:u;var g=d.memoizedState;return g!==null&&u!==null&&kp(u,g[1])?g[0]:(a=a(),d.memoizedState=[a,u],a)}function Ix(a,u,d){return 21&Hs?(dr(d,u)||(d=$_(),ie.lanes|=d,Gs|=d,a.baseState=!0),u):(a.baseState&&(a.baseState=!1,hi=!0),a.memoizedState=d)}function BI(a,u){var d=kt;kt=d!==0&&4>d?d:4,a(!0);var g=Mp.transition;Mp.transition={};try{a(!1),u()}finally{kt=d,Mp.transition=g}}function Rx(){return $i().memoizedState}function UI(a,u,d){var g=Zn(a);d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},Mx(a)?kx(u,d):(d=ex(a,u,d,g))!==null&&(ji(d,a,g,Ye()),Dx(d,u,g))}function zI(a,u,d){var g=Zn(a),y={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(Mx(a))kx(u,y);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer)!==null)try{var C=u.lastRenderedState,A=x(C,d);if(y.hasEagerState=!0,y.eagerState=A,dr(A,C)){var N=u.interleaved;return N===null?(y.next=y,bp(u)):(y.next=N.next,N.next=y),void(u.interleaved=y)}}catch{}(d=ex(a,u,y,g))!==null&&(ji(d,a,g,y=Ye()),Dx(d,u,g))}}function Mx(a){var u=a.alternate;return a===ie||u!==null&&u===ie}function kx(a,u){fl=Dh=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function Dx(a,u,d){if(4194240&d){var g=u.lanes;d|=g&=a.pendingLanes,u.lanes=d,hp(a,d)}}var Fh={readContext:Gi,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},HI={readContext:Gi,useCallback:function(a,u){return jr().memoizedState=[a,u===void 0?null:u],a},useContext:Gi,useEffect:Sx,useImperativeHandle:function(a,u,d){return d=d!=null?d.concat([a]):null,Oh(4194308,4,Tx.bind(null,u,a),d)},useLayoutEffect:function(a,u){return Oh(4194308,4,a,u)},useInsertionEffect:function(a,u){return Oh(4,2,a,u)},useMemo:function(a,u){var d=jr();return u=u===void 0?null:u,a=a(),d.memoizedState=[a,u],a},useReducer:function(a,u,d){var g=jr();return u=d!==void 0?d(u):u,g.memoizedState=g.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},g.queue=a,a=a.dispatch=UI.bind(null,ie,a),[g.memoizedState,a]},useRef:function(a){return a={current:a},jr().memoizedState=a},useState:xx,useDebugValue:Bp,useDeferredValue:function(a){return jr().memoizedState=a},useTransition:function(){var a=xx(!1),u=a[0];return a=BI.bind(null,a[1]),jr().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,d){var g=ie,y=jr();if(Kt){if(d===void 0)throw Error(s(407));d=d()}else{if(d=u(),Ie===null)throw Error(s(349));30&Hs||mx(g,u,d)}y.memoizedState=d;var x={value:d,getSnapshot:u};return y.queue=x,Sx(yx.bind(null,g,x,a),[a]),g.flags|=2048,gl(9,gx.bind(null,g,x,d,u),void 0,null),d},useId:function(){var a=jr(),u=Ie.identifierPrefix;if(Kt){var d=yn;u=":"+u+"R"+(d=(Gr&~(1<<32-cr(Gr)-1)).toString(32)+d),0<(d=pl++)&&(u+="H"+d.toString(32)),u+=":"}else u=":"+u+"r"+(d=LI++).toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},GI={readContext:Gi,useCallback:Px,useContext:Gi,useEffect:Lp,useImperativeHandle:Cx,useInsertionEffect:bx,useLayoutEffect:Ex,useMemo:Ax,useReducer:Np,useRef:wx,useState:function(){return Np(ml)},useDebugValue:Bp,useDeferredValue:function(a){return Ix($i(),Pe.memoizedState,a)},useTransition:function(){return[Np(ml)[0],$i().memoizedState]},useMutableSource:fx,useSyncExternalStore:px,useId:Rx,unstable_isNewReconciler:!1},WI={readContext:Gi,useCallback:Px,useContext:Gi,useEffect:Lp,useImperativeHandle:Cx,useInsertionEffect:bx,useLayoutEffect:Ex,useMemo:Ax,useReducer:Fp,useRef:wx,useState:function(){return Fp(ml)},useDebugValue:Bp,useDeferredValue:function(a){var u=$i();return Pe===null?u.memoizedState=a:Ix(u,Pe.memoizedState,a)},useTransition:function(){return[Fp(ml)[0],$i().memoizedState]},useMutableSource:fx,useSyncExternalStore:px,useId:Rx,unstable_isNewReconciler:!1};function Ho(a,u){try{var d="",g=u;do d+=FI(g),g=g.return;while(g);var y=d}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:u,stack:y,digest:null}}function Up(a,u,d){return{value:a,source:null,stack:d??null,digest:u??null}}function zp(a,u){try{console.error(u.value)}catch(d){setTimeout(function(){throw d})}}var $I=typeof WeakMap=="function"?WeakMap:Map;function Ox(a,u,d){(d=vn(-1,d)).tag=3,d.payload={element:null};var g=u.value;return d.callback=function(){Qh||(Qh=!0,sm=g),zp(0,u)},d}function Nx(a,u,d){(d=vn(-1,d)).tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;d.payload=function(){return g(y)},d.callback=function(){zp(0,u)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(d.callback=function(){zp(0,u),typeof g!="function"&&(Qn===null?Qn=new Set([this]):Qn.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})}),d}function Fx(a,u,d){var g=a.pingCache;if(g===null){g=a.pingCache=new $I;var y=new Set;g.set(u,y)}else(y=g.get(u))===void 0&&(y=new Set,g.set(u,y));y.has(d)||(y.add(d),a=JI.bind(null,a,u,d),u.then(a,a))}function Lx(a){do{var u;if((u=a.tag===13)&&(u=(u=a.memoizedState)===null||u.dehydrated!==null),u)return a;a=a.return}while(a!==null);return null}function Bx(a,u,d,g,y){return 1&a.mode?(a.flags|=65536,a.lanes=y,a):(a===u?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:((u=vn(-1,1)).tag=2,Yn(d,u,1))),d.lanes|=1),a)}var jI=o.ReactCurrentOwner,hi=!1;function ci(a,u,d,g){u.child=a===null?cx(u,null,d,g):Bo(u,a.child,d,g)}function Ux(a,u,d,g,y){d=d.render;var x=u.ref;return Lo(u,y),g=Dp(a,u,d,g,x,y),d=Op(),a===null||hi?(Kt&&d&&pp(u),u.flags|=1,ci(a,u,g,y),u.child):(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,_n(a,u,y))}function zx(a,u,d,g,y){if(a===null){var x=d.type;return typeof x!="function"||cm(x)||x.defaultProps!==void 0||d.compare!==null||d.defaultProps!==void 0?((a=ic(d.type,null,g,u,u.mode,y)).ref=u.ref,a.return=u,u.child=a):(u.tag=15,u.type=x,Hx(a,u,x,g,y))}if(x=a.child,(a.lanes&y)==0){var C=x.memoizedProps;if((d=(d=d.compare)!==null?d:Eh)(C,g)&&a.ref===u.ref)return _n(a,u,y)}return u.flags|=1,(a=ts(x,g)).ref=u.ref,a.return=u,u.child=a}function Hx(a,u,d,g,y){if(a!==null){var x=a.memoizedProps;if(Eh(x,g)&&a.ref===u.ref){if(hi=!1,u.pendingProps=g=x,(a.lanes&y)==0)return u.lanes=a.lanes,_n(a,u,y);131072&a.flags&&(hi=!0)}}return Hp(a,u,d,g,y)}function Gx(a,u,d){var g=u.pendingProps,y=g.children,x=a!==null?a.memoizedState:null;if(g.mode==="hidden")if(!(1&u.mode))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Wo,Si),Si|=d;else{if(!(1073741824&d))return a=x!==null?x.baseLanes|d:d,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,Ht(Wo,Si),Si|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=x!==null?x.baseLanes:d,Ht(Wo,Si),Si|=g}else x!==null?(g=x.baseLanes|d,u.memoizedState=null):g=d,Ht(Wo,Si),Si|=g;return ci(a,u,y,d),u.child}function Wx(a,u){var d=u.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(u.flags|=512,u.flags|=2097152)}function Hp(a,u,d,g,y){var x=xi(d)?Ls:je.current;return x=ko(u,x),Lo(u,y),d=Dp(a,u,d,g,x,y),g=Op(),a===null||hi?(Kt&&g&&pp(u),u.flags|=1,ci(a,u,d,y),u.child):(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,_n(a,u,y))}function $x(a,u,d,g,y){if(xi(d)){var x=!0;yh(u)}else x=!1;if(Lo(u,y),u.stateNode===null)zh(a,u),ax(u,d,g),Cp(u,d,g,y),g=!0;else if(a===null){var C=u.stateNode,A=u.memoizedProps;C.props=A;var N=C.context,U=d.contextType;typeof U=="object"&&U!==null?U=Gi(U):U=ko(u,U=xi(d)?Ls:je.current);var G=d.getDerivedStateFromProps,it=typeof G=="function"||typeof C.getSnapshotBeforeUpdate=="function";it||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(A!==g||N!==U)&&lx(u,C,g,U),Xn=!1;var H=u.memoizedState;C.state=H,Ah(u,g,C,y),N=u.memoizedState,A!==g||H!==N||ui.current||Xn?(typeof G=="function"&&(Tp(u,d,G,g),N=u.memoizedState),(A=Xn||ox(u,d,A,g,H,N,U))?(it||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=N),C.props=g,C.state=N,C.context=U,g=A):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{C=u.stateNode,ix(a,u),A=u.memoizedProps,U=u.type===u.elementType?A:pr(u.type,A),C.props=U,it=u.pendingProps,H=C.context,typeof(N=d.contextType)=="object"&&N!==null?N=Gi(N):N=ko(u,N=xi(d)?Ls:je.current);var Z=d.getDerivedStateFromProps;(G=typeof Z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(A!==it||H!==N)&&lx(u,C,g,N),Xn=!1,H=u.memoizedState,C.state=H,Ah(u,g,C,y);var lt=u.memoizedState;A!==it||H!==lt||ui.current||Xn?(typeof Z=="function"&&(Tp(u,d,Z,g),lt=u.memoizedState),(U=Xn||ox(u,d,U,g,H,lt,N)||!1)?(G||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,lt,N),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,lt,N)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||A===a.memoizedProps&&H===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&H===a.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=lt),C.props=g,C.state=lt,C.context=N,g=U):(typeof C.componentDidUpdate!="function"||A===a.memoizedProps&&H===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&H===a.memoizedState||(u.flags|=1024),g=!1)}return Gp(a,u,d,g,x,y)}function Gp(a,u,d,g,y,x){Wx(a,u);var C=(128&u.flags)!=0;if(!g&&!C)return y&&W_(u,d,!1),_n(a,u,x);g=u.stateNode,jI.current=u;var A=C&&typeof d.getDerivedStateFromError!="function"?null:g.render();return u.flags|=1,a!==null&&C?(u.child=Bo(u,a.child,null,x),u.child=Bo(u,null,A,x)):ci(a,u,A,x),u.memoizedState=g.state,y&&W_(u,d,!0),u.child}function jx(a){var u=a.stateNode;u.pendingContext?H_(0,u.pendingContext,u.pendingContext!==u.context):u.context&&H_(0,u.context,!1),Pp(a,u.containerInfo)}function Vx(a,u,d,g,y){return No(),vp(y),u.flags|=256,ci(a,u,d,g),u.child}var yl,vl,Lh,Bh,Wp={dehydrated:null,treeContext:null,retryLane:0};function $p(a){return{baseLanes:a,cachePool:null,transitions:null}}function Xx(a,u,d){var g,y=u.pendingProps,x=ue.current,C=!1,A=(128&u.flags)!=0;if((g=A)||(g=(a===null||a.memoizedState!==null)&&(2&x)!=0),g?(C=!0,u.flags&=-129):a!==null&&a.memoizedState===null||(x|=1),Ht(ue,1&x),a===null)return yp(u),(a=u.memoizedState)!==null&&(a=a.dehydrated)!==null?(1&u.mode?ep(a)?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(A=y.children,a=y.fallback,C?(y=u.mode,C=u.child,A={mode:"hidden",children:A},!(1&y)&&C!==null?(C.childLanes=0,C.pendingProps=A):C=rc(A,y,0,null),a=js(a,y,d,null),C.return=u,a.return=u,C.sibling=a,u.child=C,u.child.memoizedState=$p(d),u.memoizedState=Wp,a):jp(u,A));if((x=a.memoizedState)!==null&&(g=x.dehydrated)!==null)return function(U,G,it,H,Z,lt,bt){if(it)return 256&G.flags?(G.flags&=-257,Uh(U,G,bt,H=Up(Error(s(422))))):G.memoizedState!==null?(G.child=U.child,G.flags|=128,null):(lt=H.fallback,Z=G.mode,H=rc({mode:"visible",children:H.children},Z,0,null),(lt=js(lt,Z,bt,null)).flags|=2,H.return=G,lt.return=G,H.sibling=lt,G.child=H,1&G.mode&&Bo(G,U.child,null,bt),G.child.memoizedState=$p(bt),G.memoizedState=Wp,lt);if(!(1&G.mode))return Uh(U,G,bt,null);if(ep(Z))return H=cI(Z).digest,lt=Error(s(419)),H=Up(lt,H,void 0),Uh(U,G,bt,H);if(it=(bt&U.childLanes)!=0,hi||it){if((H=Ie)!==null){switch(bt&-bt){case 4:Z=2;break;case 16:Z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Z=32;break;case 536870912:Z=268435456;break;default:Z=0}(Z=Z&(H.suspendedLanes|bt)?0:Z)!==0&&Z!==lt.retryLane&&(lt.retryLane=Z,Wr(U,Z),ji(H,U,Z,-1))}return hm(),Uh(U,G,bt,H=Up(Error(s(421))))}return z_(Z)?(G.flags|=128,G.child=U.child,G=t2.bind(null,U),dI(Z,G),null):(U=lt.treeContext,Mt&&(Hi=mI(Z),wi=G,Kt=!0,fr=null,ul=!1,U!==null&&(Ui[zi++]=Gr,Ui[zi++]=yn,Ui[zi++]=Bs,Gr=U.id,yn=U.overflow,Bs=G)),G=jp(G,H.children),G.flags|=4096,G)}(a,u,A,y,g,x,d);if(C){C=y.fallback,A=u.mode,g=(x=a.child).sibling;var N={mode:"hidden",children:y.children};return!(1&A)&&u.child!==x?((y=u.child).childLanes=0,y.pendingProps=N,u.deletions=null):(y=ts(x,N)).subtreeFlags=14680064&x.subtreeFlags,g!==null?C=ts(g,C):(C=js(C,A,d,null)).flags|=2,C.return=u,y.return=u,y.sibling=C,u.child=y,y=C,C=u.child,A=(A=a.child.memoizedState)===null?$p(d):{baseLanes:A.baseLanes|d,cachePool:null,transitions:A.transitions},C.memoizedState=A,C.childLanes=a.childLanes&~d,u.memoizedState=Wp,y}return a=(C=a.child).sibling,y=ts(C,{mode:"visible",children:y.children}),!(1&u.mode)&&(y.lanes=d),y.return=u,y.sibling=null,a!==null&&((d=u.deletions)===null?(u.deletions=[a],u.flags|=16):d.push(a)),u.child=y,u.memoizedState=null,y}function jp(a,u){return(u=rc({mode:"visible",children:u},a.mode,0,null)).return=a,a.child=u}function Uh(a,u,d,g){return g!==null&&vp(g),Bo(u,a.child,null,d),(a=jp(u,u.pendingProps.children)).flags|=2,u.memoizedState=null,a}function Yx(a,u,d){a.lanes|=u;var g=a.alternate;g!==null&&(g.lanes|=u),Sp(a.return,u,d)}function Vp(a,u,d,g,y){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:y}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=d,x.tailMode=y)}function qx(a,u,d){var g=u.pendingProps,y=g.revealOrder,x=g.tail;if(ci(a,u,g.children,d),(2&(g=ue.current))!=0)g=1&g|2,u.flags|=128;else{if(a!==null&&128&a.flags)t:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Yx(a,d,u);else if(a.tag===19)Yx(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break t;for(;a.sibling===null;){if(a.return===null||a.return===u)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(Ht(ue,g),(1&u.mode)==0)u.memoizedState=null;else switch(y){case"forwards":for(d=u.child,y=null;d!==null;)(a=d.alternate)!==null&&Mh(a)===null&&(y=d),d=d.sibling;(d=y)===null?(y=u.child,u.child=null):(y=d.sibling,d.sibling=null),Vp(u,!1,y,d,x);break;case"backwards":for(d=null,y=u.child,u.child=null;y!==null;){if((a=y.alternate)!==null&&Mh(a)===null){u.child=y;break}a=y.sibling,y.sibling=d,d=y,y=a}Vp(u,!0,d,null,x);break;case"together":Vp(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function zh(a,u){!(1&u.mode)&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function _n(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),Gs|=u.lanes,(d&u.childLanes)==0)return null;if(a!==null&&u.child!==a.child)throw Error(s(153));if(u.child!==null){for(d=ts(a=u.child,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,(d=d.sibling=ts(a,a.pendingProps)).return=u;d.sibling=null}return u.child}function Vr(a){a.flags|=4}function Qx(a,u){if(a!==null&&a.child===u.child)return!0;if(16&u.flags)return!1;for(a=u.child;a!==null;){if(12854&a.flags||12854&a.subtreeFlags)return!1;a=a.sibling}return!0}if(Tt)yl=function(a,u){for(var d=u.child;d!==null;){if(d.tag===5||d.tag===6)rt(a,d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},vl=function(){},Lh=function(a,u,d,g,y){if((a=a.memoizedProps)!==g){var x=u.stateNode,C=$r(Wi.current);d=vt(x,d,a,g,y,C),(u.updateQueue=d)&&Vr(u)}},Bh=function(a,u,d,g){d!==g&&Vr(u)};else if($t){yl=function(a,u,d,g){for(var y=u.child;y!==null;){if(y.tag===5){var x=y.stateNode;d&&g&&(x=B_(x,y.type,y.memoizedProps,y)),rt(a,x)}else if(y.tag===6)x=y.stateNode,d&&g&&(x=U_(x,y.memoizedProps,y)),rt(a,x);else if(y.tag!==4){if(y.tag===22&&y.memoizedState!==null)(x=y.child)!==null&&(x.return=y),yl(a,y,!0,!0);else if(y.child!==null){y.child.return=y,y=y.child;continue}}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}};var Kx=function(a,u,d,g){for(var y=u.child;y!==null;){if(y.tag===5){var x=y.stateNode;d&&g&&(x=B_(x,y.type,y.memoizedProps,y)),L_(a,x)}else if(y.tag===6)x=y.stateNode,d&&g&&(x=U_(x,y.memoizedProps,y)),L_(a,x);else if(y.tag!==4){if(y.tag===22&&y.memoizedState!==null)(x=y.child)!==null&&(x.return=y),Kx(a,y,!0,!0);else if(y.child!==null){y.child.return=y,y=y.child;continue}}if(y===u)break;for(;y.sibling===null;){if(y.return===null||y.return===u)return;y=y.return}y.sibling.return=y.return,y=y.sibling}};vl=function(a,u){var d=u.stateNode;if(!Qx(a,u)){a=d.containerInfo;var g=F_(a);Kx(g,u,!1,!1),d.pendingChildren=g,Vr(u),aI(a,g)}},Lh=function(a,u,d,g,y){var x=a.stateNode,C=a.memoizedProps;if((a=Qx(a,u))&&C===g)u.stateNode=x;else{var A=u.stateNode,N=$r(Wi.current),U=null;C!==g&&(U=vt(A,d,C,g,y,N)),a&&U===null?u.stateNode=x:(x=oI(x,U,d,C,g,u,a,A),wt(x,d,g,y,N)&&Vr(u),u.stateNode=x,a?Vr(u):yl(x,u,!1,!1))}},Bh=function(a,u,d,g){d!==g?(a=$r(Uo.current),d=$r(Wi.current),u.stateNode=Et(g,a,d,u),Vr(u)):u.stateNode=a.stateNode}}else vl=function(){},Lh=function(){},Bh=function(){};function _l(a,u){if(!Kt)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function ei(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(u)for(var y=a.child;y!==null;)d|=y.lanes|y.childLanes,g|=14680064&y.subtreeFlags,g|=14680064&y.flags,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)d|=y.lanes|y.childLanes,g|=y.subtreeFlags,g|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=g,a.childLanes=d,u}function VI(a,u,d){var g=u.pendingProps;switch(mp(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(u),null;case 1:case 17:return xi(u.type)&&sp(),ei(u),null;case 3:return d=u.stateNode,zo(),Qt(ui),Qt(je),Rp(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),a!==null&&a.child!==null||(bh(u)?Vr(u):a===null||a.memoizedState.isDehydrated&&!(256&u.flags)||(u.flags|=1024,fr!==null&&(lm(fr),fr=null))),vl(a,u),ei(u),null;case 5:Ap(u),d=$r(Uo.current);var y=u.type;if(a!==null&&u.stateNode!=null)Lh(a,u,y,g,d),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!g){if(u.stateNode===null)throw Error(s(166));return ei(u),null}if(a=$r(Wi.current),bh(u)){if(!Mt)throw Error(s(175));a=gI(u.stateNode,u.type,u.memoizedProps,d,a,u,!ul),u.updateQueue=a,a!==null&&Vr(u)}else{var x=Q(y,g,d,a,u);yl(x,u,!1,!1),u.stateNode=x,wt(x,y,g,d,a)&&Vr(u)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ei(u),null;case 6:if(a&&u.stateNode!=null)Bh(a,u,a.memoizedProps,g);else{if(typeof g!="string"&&u.stateNode===null)throw Error(s(166));if(a=$r(Uo.current),d=$r(Wi.current),bh(u)){if(!Mt)throw Error(s(176));if(a=u.stateNode,d=u.memoizedProps,(g=yI(a,d,u,!ul))&&(y=wi)!==null)switch(y.tag){case 3:TI(y.stateNode.containerInfo,a,d,(1&y.mode)!=0);break;case 5:CI(y.type,y.memoizedProps,y.stateNode,a,d,(1&y.mode)!=0)}g&&Vr(u)}else u.stateNode=Et(g,a,d,u)}return ei(u),null;case 13:if(Qt(ue),g=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Kt&&Hi!==null&&1&u.mode&&!(128&u.flags))J_(),No(),u.flags|=98560,y=!1;else if(y=bh(u),g!==null&&g.dehydrated!==null){if(a===null){if(!y)throw Error(s(318));if(!Mt)throw Error(s(344));if(!(y=(y=u.memoizedState)!==null?y.dehydrated:null))throw Error(s(317));vI(y,u)}else No(),!(128&u.flags)&&(u.memoizedState=null),u.flags|=4;ei(u),y=!1}else fr!==null&&(lm(fr),fr=null),y=!0;if(!y)return 65536&u.flags?u:null}return 128&u.flags?(u.lanes=d,u):((d=g!==null)!=(a!==null&&a.memoizedState!==null)&&d&&(u.child.flags|=8192,1&u.mode&&(a===null||1&ue.current?we===0&&(we=3):hm())),u.updateQueue!==null&&(u.flags|=4),ei(u),null);case 4:return zo(),vl(a,u),a===null&&Bi(u.stateNode.containerInfo),ei(u),null;case 10:return wp(u.type._context),ei(u),null;case 19:if(Qt(ue),(y=u.memoizedState)===null)return ei(u),null;if(g=(128&u.flags)!=0,(x=y.rendering)===null)if(g)_l(y,!1);else{if(we!==0||a!==null&&128&a.flags)for(a=u.child;a!==null;){if((x=Mh(a))!==null){for(u.flags|=128,_l(y,!1),(a=x.updateQueue)!==null&&(u.updateQueue=a,u.flags|=4),u.subtreeFlags=0,a=d,d=u.child;d!==null;)y=a,(g=d).flags&=14680066,(x=g.alternate)===null?(g.childLanes=0,g.lanes=y,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=x.childLanes,g.lanes=x.lanes,g.child=x.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=x.memoizedProps,g.memoizedState=x.memoizedState,g.updateQueue=x.updateQueue,g.type=x.type,y=x.dependencies,g.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),d=d.sibling;return Ht(ue,1&ue.current|2),u.child}a=a.sibling}y.tail!==null&&Ce()>nm&&(u.flags|=128,g=!0,_l(y,!1),u.lanes=4194304)}else{if(!g)if((a=Mh(x))!==null){if(u.flags|=128,g=!0,(a=a.updateQueue)!==null&&(u.updateQueue=a,u.flags|=4),_l(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!Kt)return ei(u),null}else 2*Ce()-y.renderingStartTime>nm&&d!==1073741824&&(u.flags|=128,g=!0,_l(y,!1),u.lanes=4194304);y.isBackwards?(x.sibling=u.child,u.child=x):((a=y.last)!==null?a.sibling=x:u.child=x,y.last=x)}return y.tail!==null?(u=y.tail,y.rendering=u,y.tail=u.sibling,y.renderingStartTime=Ce(),u.sibling=null,a=ue.current,Ht(ue,g?1&a|2:1&a),u):(ei(u),null);case 22:case 23:return um(),d=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==d&&(u.flags|=8192),d&&1&u.mode?1073741824&Si&&(ei(u),Tt&&6&u.subtreeFlags&&(u.flags|=8192)):ei(u),null;case 24:case 25:return null}throw Error(s(156,u.tag))}function XI(a,u){switch(mp(u),u.tag){case 1:return xi(u.type)&&sp(),65536&(a=u.flags)?(u.flags=-65537&a|128,u):null;case 3:return zo(),Qt(ui),Qt(je),Rp(),65536&(a=u.flags)&&!(128&a)?(u.flags=-65537&a|128,u):null;case 5:return Ap(u),null;case 13:if(Qt(ue),(a=u.memoizedState)!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(s(340));No()}return 65536&(a=u.flags)?(u.flags=-65537&a|128,u):null;case 19:return Qt(ue),null;case 4:return zo(),null;case 10:return wp(u.type._context),null;case 22:case 23:return um(),null;default:return null}}var Hh=!1,Xe=!1,YI=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Go(a,u){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Zt(a,u,g)}else d.current=null}function Zx(a,u,d){try{d()}catch(g){Zt(a,u,g)}}var Jx=!1;function xl(a,u,d){var g=u.updateQueue;if((g=g!==null?g.lastEffect:null)!==null){var y=g=g.next;do{if((y.tag&a)===a){var x=y.destroy;y.destroy=void 0,x!==void 0&&Zx(u,d,x)}y=y.next}while(y!==g)}}function Gh(a,u){if((u=(u=u.updateQueue)!==null?u.lastEffect:null)!==null){var d=u=u.next;do{if((d.tag&a)===a){var g=d.create;d.destroy=g()}d=d.next}while(d!==u)}}function Xp(a){var u=a.ref;if(u!==null){var d=a.stateNode;a.tag===5?a=pt(d):a=d,typeof u=="function"?u(a):u.current=a}}function t1(a){var u=a.alternate;u!==null&&(a.alternate=null,t1(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode)!==null&&Jf(u),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function e1(a){return a.tag===5||a.tag===3||a.tag===4}function i1(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||e1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(2&a.flags||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(2&a.flags))return a.stateNode}}function Yp(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?ZA(d,a,u):XA(d,a);else if(g!==4&&(a=a.child)!==null)for(Yp(a,u,d),a=a.sibling;a!==null;)Yp(a,u,d),a=a.sibling}function qp(a,u,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,u?KA(d,a,u):VA(d,a);else if(g!==4&&(a=a.child)!==null)for(qp(a,u,d),a=a.sibling;a!==null;)qp(a,u,d),a=a.sibling}var ii=null,Xr=!1;function Yr(a,u,d){for(d=d.child;d!==null;)Qp(a,u,d),d=d.sibling}function Qp(a,u,d){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(_h,d)}catch{}switch(d.tag){case 5:Xe||Go(d,u);case 6:if(Tt){var g=ii,y=Xr;ii=null,Yr(a,u,d),Xr=y,(ii=g)!==null&&(Xr?tI(ii,d.stateNode):JA(ii,d.stateNode))}else Yr(a,u,d);break;case 18:Tt&&ii!==null&&(Xr?bI(ii,d.stateNode):SI(ii,d.stateNode));break;case 4:Tt?(g=ii,y=Xr,ii=d.stateNode.containerInfo,Xr=!0,Yr(a,u,d),ii=g,Xr=y):($t&&(g=d.stateNode.containerInfo,y=F_(g),tp(g,y)),Yr(a,u,d));break;case 0:case 11:case 14:case 15:if(!Xe&&(g=d.updateQueue)!==null&&(g=g.lastEffect)!==null){y=g=g.next;do{var x=y,C=x.destroy;x=x.tag,C!==void 0&&(2&x||4&x)&&Zx(d,u,C),y=y.next}while(y!==g)}Yr(a,u,d);break;case 1:if(!Xe&&(Go(d,u),typeof(g=d.stateNode).componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(A){Zt(d,u,A)}Yr(a,u,d);break;case 21:Yr(a,u,d);break;case 22:1&d.mode?(Xe=(g=Xe)||d.memoizedState!==null,Yr(a,u,d),Xe=g):Yr(a,u,d);break;default:Yr(a,u,d)}}function r1(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new YI),u.forEach(function(g){var y=e2.bind(null,a,g);d.has(g)||(d.add(g),g.then(y,y))})}}function mr(a,u){var d=u.deletions;if(d!==null)for(var g=0;g<d.length;g++){var y=d[g];try{var x=a,C=u;if(Tt){var A=C;t:for(;A!==null;){switch(A.tag){case 5:ii=A.stateNode,Xr=!1;break t;case 3:case 4:ii=A.stateNode.containerInfo,Xr=!0;break t}A=A.return}if(ii===null)throw Error(s(160));Qp(x,C,y),ii=null,Xr=!1}else Qp(x,C,y);var N=y.alternate;N!==null&&(N.return=null),y.return=null}catch(U){Zt(y,u,U)}}if(12854&u.subtreeFlags)for(u=u.child;u!==null;)n1(u,a),u=u.sibling}function n1(a,u){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(mr(u,a),qr(a),4&g){try{xl(3,a,a.return),Gh(3,a)}catch(H){Zt(a,a.return,H)}try{xl(5,a,a.return)}catch(H){Zt(a,a.return,H)}}break;case 1:mr(u,a),qr(a),512&g&&d!==null&&Go(d,d.return);break;case 5:if(mr(u,a),qr(a),512&g&&d!==null&&Go(d,d.return),Tt){if(32&a.flags){var y=a.stateNode;try{N_(y)}catch(H){Zt(a,a.return,H)}}if(4&g&&(y=a.stateNode)!=null){var x=a.memoizedProps;if(d=d!==null?d.memoizedProps:x,g=a.type,u=a.updateQueue,a.updateQueue=null,u!==null)try{QA(y,u,g,d,x,a)}catch(H){Zt(a,a.return,H)}}}break;case 6:if(mr(u,a),qr(a),4&g&&Tt){if(a.stateNode===null)throw Error(s(162));y=a.stateNode,x=a.memoizedProps,d=d!==null?d.memoizedProps:x;try{YA(y,d,x)}catch(H){Zt(a,a.return,H)}}break;case 3:if(mr(u,a),qr(a),4&g){if(Tt&&Mt&&d!==null&&d.memoizedState.isDehydrated)try{xI(u.containerInfo)}catch(H){Zt(a,a.return,H)}if($t){y=u.containerInfo,x=u.pendingChildren;try{tp(y,x)}catch(H){Zt(a,a.return,H)}}}break;case 4:if(mr(u,a),qr(a),4&g&&$t){y=(x=a.stateNode).containerInfo,x=x.pendingChildren;try{tp(y,x)}catch(H){Zt(a,a.return,H)}}break;case 13:mr(u,a),qr(a),8192&(y=a.child).flags&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(rm=Ce())),4&g&&r1(a);break;case 22:var C=d!==null&&d.memoizedState!==null;if(1&a.mode?(Xe=(d=Xe)||C,mr(u,a),Xe=d):mr(u,a),qr(a),8192&g){if(d=a.memoizedState!==null,(a.stateNode.isHidden=d)&&!C&&(1&a.mode)!=0)for(ot=a,g=a.child;g!==null;){for(u=ot=g;ot!==null;){var A=(C=ot).child;switch(C.tag){case 0:case 11:case 14:case 15:xl(4,C,C.return);break;case 1:Go(C,C.return);var N=C.stateNode;if(typeof N.componentWillUnmount=="function"){var U=C,G=C.return;try{var it=U;N.props=it.memoizedProps,N.state=it.memoizedState,N.componentWillUnmount()}catch(H){Zt(U,G,H)}}break;case 5:Go(C,C.return);break;case 22:if(C.memoizedState!==null){a1(u);continue}}A!==null?(A.return=C,ot=A):a1(u)}g=g.sibling}if(Tt){t:if(g=null,Tt)for(u=a;;){if(u.tag===5){if(g===null){g=u;try{y=u.stateNode,d?eI(y):rI(u.stateNode,u.memoizedProps)}catch(H){Zt(a,a.return,H)}}}else if(u.tag===6){if(g===null)try{x=u.stateNode,d?iI(x):nI(x,u.memoizedProps)}catch(H){Zt(a,a.return,H)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break t;for(;u.sibling===null;){if(u.return===null||u.return===a)break t;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}}}break;case 19:mr(u,a),qr(a),4&g&&r1(a);break;case 21:break;default:mr(u,a),qr(a)}}function qr(a){var u=a.flags;if(2&u){try{if(Tt){t:{for(var d=a.return;d!==null;){if(e1(d)){var g=d;break t}d=d.return}throw Error(s(160))}switch(g.tag){case 5:var y=g.stateNode;32&g.flags&&(N_(y),g.flags&=-33),qp(a,i1(a),y);break;case 3:case 4:var x=g.stateNode.containerInfo;Yp(a,i1(a),x);break;default:throw Error(s(161))}}}catch(C){Zt(a,a.return,C)}a.flags&=-3}4096&u&&(a.flags&=-4097)}function qI(a,u,d){ot=a,s1(a)}function s1(a,u,d){for(var g=(1&a.mode)!=0;ot!==null;){var y=ot,x=y.child;if(y.tag===22&&g){var C=y.memoizedState!==null||Hh;if(!C){var A=y.alternate,N=A!==null&&A.memoizedState!==null||Xe;A=Hh;var U=Xe;if(Hh=C,(Xe=N)&&!U)for(ot=y;ot!==null;)N=(C=ot).child,C.tag===22&&C.memoizedState!==null?l1(y):N!==null?(N.return=C,ot=N):l1(y);for(;x!==null;)ot=x,s1(x),x=x.sibling;ot=y,Hh=A,Xe=U}o1(a)}else 8772&y.subtreeFlags&&x!==null?(x.return=y,ot=x):o1(a)}}function o1(a){for(;ot!==null;){var u=ot;if(8772&u.flags){var d=u.alternate;try{if(8772&u.flags)switch(u.tag){case 0:case 11:case 15:Xe||Gh(5,u);break;case 1:var g=u.stateNode;if(4&u.flags&&!Xe)if(d===null)g.componentDidMount();else{var y=u.elementType===u.type?d.memoizedProps:pr(u.type,d.memoizedProps);g.componentDidUpdate(y,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var x=u.updateQueue;x!==null&&nx(u,x,g);break;case 3:var C=u.updateQueue;if(C!==null){if(d=null,u.child!==null)switch(u.child.tag){case 5:d=pt(u.child.stateNode);break;case 1:d=u.child.stateNode}nx(u,C,d)}break;case 5:var A=u.stateNode;d===null&&4&u.flags&&qA(A,u.type,u.memoizedProps,u);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Mt&&u.memoizedState===null){var N=u.alternate;if(N!==null){var U=N.memoizedState;if(U!==null){var G=U.dehydrated;G!==null&&wI(G)}}}break;default:throw Error(s(163))}Xe||512&u.flags&&Xp(u)}catch(it){Zt(u,u.return,it)}}if(u===a){ot=null;break}if((d=u.sibling)!==null){d.return=u.return,ot=d;break}ot=u.return}}function a1(a){for(;ot!==null;){var u=ot;if(u===a){ot=null;break}var d=u.sibling;if(d!==null){d.return=u.return,ot=d;break}ot=u.return}}function l1(a){for(;ot!==null;){var u=ot;try{switch(u.tag){case 0:case 11:case 15:var d=u.return;try{Gh(4,u)}catch(N){Zt(u,d,N)}break;case 1:var g=u.stateNode;if(typeof g.componentDidMount=="function"){var y=u.return;try{g.componentDidMount()}catch(N){Zt(u,y,N)}}var x=u.return;try{Xp(u)}catch(N){Zt(u,x,N)}break;case 5:var C=u.return;try{Xp(u)}catch(N){Zt(u,C,N)}}}catch(N){Zt(u,u.return,N)}if(u===a){ot=null;break}var A=u.sibling;if(A!==null){A.return=u.return,ot=A;break}ot=u.return}}var Wh=0,$h=1,jh=2,Vh=3,Xh=4;if(typeof Symbol=="function"&&Symbol.for){var wl=Symbol.for;Wh=wl("selector.component"),$h=wl("selector.has_pseudo_class"),jh=wl("selector.role"),Vh=wl("selector.test_id"),Xh=wl("selector.text")}function Kp(a){var u=Li(a);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if((a=zA(a))===null)throw Error(s(362));return a.stateNode.current}function Zp(a,u){switch(u.$$typeof){case Wh:if(a.type===u.value)return!0;break;case $h:t:{u=u.value,a=[a,0];for(var d=0;d<a.length;){var g=a[d++],y=a[d++],x=u[y];if(g.tag!==5||!sl(g)){for(;x!=null&&Zp(g,x);)x=u[++y];if(y===u.length){u=!0;break t}for(g=g.child;g!==null;)a.push(g,y),g=g.sibling}}u=!1}return u;case jh:if(a.tag===5&&WA(a.stateNode,u.value))return!0;break;case Xh:if((a.tag===5||a.tag===6)&&(a=GA(a))!==null&&0<=a.indexOf(u.value))return!0;break;case Vh:if(a.tag===5&&typeof(a=a.memoizedProps["data-testname"])=="string"&&a.toLowerCase()===u.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function Jp(a){switch(a.$$typeof){case Wh:return"<"+(F(a.value)||"Unknown")+">";case $h:return":has("+(Jp(a)||"")+")";case jh:return'[role="'+a.value+'"]';case Xh:return'"'+a.value+'"';case Vh:return'[data-testname="'+a.value+'"]';default:throw Error(s(365))}}function u1(a,u){var d=[];a=[a,0];for(var g=0;g<a.length;){var y=a[g++],x=a[g++],C=u[x];if(y.tag!==5||!sl(y)){for(;C!=null&&Zp(y,C);)C=u[++x];if(x===u.length)d.push(y);else for(y=y.child;y!==null;)a.push(y,x),y=y.sibling}}return d}function tm(a,u){if(!nl)throw Error(s(363));a=u1(a=Kp(a),u),u=[],a=Array.from(a);for(var d=0;d<a.length;){var g=a[d++];if(g.tag===5)sl(g)||u.push(g.stateNode);else for(g=g.child;g!==null;)a.push(g),g=g.sibling}return u}var QI=Math.ceil,Yh=o.ReactCurrentDispatcher,em=o.ReactCurrentOwner,fe=o.ReactCurrentBatchConfig,At=0,Ie=null,ve=null,Ue=0,Si=0,Wo=jn(0),we=0,Sl=null,Gs=0,qh=0,im=0,bl=null,bi=null,rm=0,nm=1/0,qn=null;function $o(){nm=Ce()+500}var h1,Qh=!1,sm=null,Qn=null,Kh=!1,Kn=null,Zh=0,El=0,om=null,Jh=-1,tc=0;function Ye(){return 6&At?Ce():Jh!==-1?Jh:Jh=Ce()}function Zn(a){return 1&a.mode?2&At&&Ue!==0?Ue&-Ue:NI.transition!==null?(tc===0&&(tc=$_()),tc):(a=kt)!==0?a:Fs():1}function ji(a,u,d,g){if(50<El)throw El=0,om=null,Error(s(185));ll(a,d,g),2&At&&a===Ie||(a===Ie&&(!(2&At)&&(qh|=d),we===4&&Jn(a,Ue)),di(a,g),d===1&&At===0&&!(1&u.mode)&&($o(),xh&&Hr()))}function di(a,u){var d=a.callbackNode;(function(y,x){for(var C=y.suspendedLanes,A=y.pingedLanes,N=y.expirationTimes,U=y.pendingLanes;0<U;){var G=31-cr(U),it=1<<G,H=N[G];H===-1?it&C&&!(it&A)||(N[G]=RI(it,x)):H<=x&&(y.expiredLanes|=it),U&=~it}})(a,u);var g=vh(a,a===Ie?Ue:0);if(g===0)d!==null&&V_(d),a.callbackNode=null,a.callbackPriority=0;else if(u=g&-g,a.callbackPriority!==u){if(d!=null&&V_(d),u===1)a.tag===0?function(y){xh=!0,Y_(y)}(d1.bind(null,a)):Y_(d1.bind(null,a)),Ro?UA(function(){!(6&At)&&Hr()}):cp(dp,Hr),d=null;else{switch(j_(g)){case 1:d=dp;break;case 4:d=DI;break;case 16:default:d=X_;break;case 536870912:d=OI}d=x1(d,c1.bind(null,a))}a.callbackPriority=u,a.callbackNode=d}}function c1(a,u){if(Jh=-1,tc=0,(6&At)!=0)throw Error(s(327));var d=a.callbackNode;if($s()&&a.callbackNode!==d)return null;var g=vh(a,a===Ie?Ue:0);if(g===0)return null;if(30&g||g&a.expiredLanes||u)u=ec(a,g);else{u=g;var y=At;At|=2;var x=m1();for(Ie===a&&Ue===u||(qn=null,$o(),Ws(a,u));;)try{ZI();break}catch(A){p1(a,A)}xp(),Yh.current=x,At=y,ve!==null?u=0:(Ie=null,Ue=0,u=we)}if(u!==0){if(u===2&&(y=lp(a))!==0&&(g=y,u=am(a,y)),u===1)throw d=Sl,Ws(a,0),Jn(a,g),di(a,Ce()),d;if(u===6)Jn(a,g);else{if(y=a.current.alternate,(30&g)==0&&!function(A){for(var N=A;;){if(16384&N.flags){var U=N.updateQueue;if(U!==null&&(U=U.stores)!==null)for(var G=0;G<U.length;G++){var it=U[G],H=it.getSnapshot;it=it.value;try{if(!dr(H(),it))return!1}catch{return!1}}}if(U=N.child,16384&N.subtreeFlags&&U!==null)U.return=N,N=U;else{if(N===A)break;for(;N.sibling===null;){if(N.return===null||N.return===A)return!0;N=N.return}N.sibling.return=N.return,N=N.sibling}}return!0}(y)&&((u=ec(a,g))===2&&(x=lp(a))!==0&&(g=x,u=am(a,x)),u===1))throw d=Sl,Ws(a,0),Jn(a,g),di(a,Ce()),d;switch(a.finishedWork=y,a.finishedLanes=g,u){case 0:case 1:throw Error(s(345));case 2:case 5:jo(a,bi,qn);break;case 3:if(Jn(a,g),(130023424&g)===g&&10<(u=rm+500-Ce())){if(vh(a,0)!==0)break;if(((y=a.suspendedLanes)&g)!==g){Ye(),a.pingedLanes|=a.suspendedLanes&y;break}a.timeoutHandle=Ot(jo.bind(null,a,bi,qn),u);break}jo(a,bi,qn);break;case 4:if(Jn(a,g),(4194240&g)===g)break;for(u=a.eventTimes,y=-1;0<g;){var C=31-cr(g);x=1<<C,(C=u[C])>y&&(y=C),g&=~x}if(g=y,10<(g=(120>(g=Ce()-g)?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*QI(g/1960))-g)){a.timeoutHandle=Ot(jo.bind(null,a,bi,qn),g);break}jo(a,bi,qn);break;default:throw Error(s(329))}}}return di(a,Ce()),a.callbackNode===d?c1.bind(null,a):null}function am(a,u){var d=bl;return a.current.memoizedState.isDehydrated&&(Ws(a,u).flags|=256),(a=ec(a,u))!==2&&(u=bi,bi=d,u!==null&&lm(u)),a}function lm(a){bi===null?bi=a:bi.push.apply(bi,a)}function Jn(a,u){for(u&=~im,u&=~qh,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var d=31-cr(u),g=1<<d;a[d]=-1,u&=~g}}function d1(a){if(6&At)throw Error(s(327));$s();var u=vh(a,0);if(!(1&u))return di(a,Ce()),null;var d=ec(a,u);if(a.tag!==0&&d===2){var g=lp(a);g!==0&&(u=g,d=am(a,g))}if(d===1)throw d=Sl,Ws(a,0),Jn(a,u),di(a,Ce()),d;if(d===6)throw Error(s(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,jo(a,bi,qn),di(a,Ce()),null}function f1(a){Kn!==null&&Kn.tag===0&&!(6&At)&&$s();var u=At;At|=1;var d=fe.transition,g=kt;try{if(fe.transition=null,kt=1,a)return a()}finally{kt=g,fe.transition=d,!(6&(At=u))&&Hr()}}function um(){Si=Wo.current,Qt(Wo)}function Ws(a,u){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==Be&&(a.timeoutHandle=Be,Te(d)),ve!==null)for(d=ve.return;d!==null;){var g=d;switch(mp(g),g.tag){case 1:(g=g.type.childContextTypes)!=null&&sp();break;case 3:zo(),Qt(ui),Qt(je),Rp();break;case 5:Ap(g);break;case 4:zo();break;case 13:case 19:Qt(ue);break;case 10:wp(g.type._context);break;case 22:case 23:um()}d=d.return}if(Ie=a,ve=a=ts(a.current,null),Ue=Si=u,we=0,Sl=null,im=qh=Gs=0,bi=bl=null,zs!==null){for(u=0;u<zs.length;u++)if((g=(d=zs[u]).interleaved)!==null){d.interleaved=null;var y=g.next,x=d.pending;if(x!==null){var C=x.next;x.next=y,g.next=C}d.pending=g}zs=null}return a}function p1(a,u){for(;;){var d=ve;try{if(xp(),kh.current=Fh,Dh){for(var g=ie.memoizedState;g!==null;){var y=g.queue;y!==null&&(y.pending=null),g=g.next}Dh=!1}if(Hs=0,Ae=Pe=ie=null,fl=!1,pl=0,em.current=null,d===null||d.return===null){we=1,Sl=u,ve=null;break}t:{var x=a,C=d.return,A=d,N=u;if(u=Ue,A.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var U=N,G=A,it=G.tag;if(!(1&G.mode)&&(it===0||it===11||it===15)){var H=G.alternate;H?(G.updateQueue=H.updateQueue,G.memoizedState=H.memoizedState,G.lanes=H.lanes):(G.updateQueue=null,G.memoizedState=null)}var Z=Lx(C);if(Z!==null){Z.flags&=-257,Bx(Z,C,A,0,u),1&Z.mode&&Fx(x,U,u),N=U;var lt=(u=Z).updateQueue;if(lt===null){var bt=new Set;bt.add(N),u.updateQueue=bt}else lt.add(N);break t}if(!(1&u)){Fx(x,U,u),hm();break t}N=Error(s(426))}else if(Kt&&1&A.mode){var W=Lx(C);if(W!==null){!(65536&W.flags)&&(W.flags|=256),Bx(W,C,A,0,u),vp(Ho(N,A));break t}}x=N=Ho(N,A),we!==4&&(we=2),bl===null?bl=[x]:bl.push(x),x=C;do{switch(x.tag){case 3:x.flags|=65536,u&=-u,x.lanes|=u,rx(x,Ox(0,N,u));break t;case 1:A=N;var R=x.type,L=x.stateNode;if(!(128&x.flags)&&(typeof R.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Qn===null||!Qn.has(L)))){x.flags|=65536,u&=-u,x.lanes|=u,rx(x,Nx(x,A,u));break t}}x=x.return}while(x!==null)}y1(d)}catch(Y){u=Y,ve===d&&d!==null&&(ve=d=d.return);continue}break}}function m1(){var a=Yh.current;return Yh.current=Fh,a===null?Fh:a}function hm(){we!==0&&we!==3&&we!==2||(we=4),Ie===null||!(268435455&Gs)&&!(268435455&qh)||Jn(Ie,Ue)}function ec(a,u){var d=At;At|=2;var g=m1();for(Ie===a&&Ue===u||(qn=null,Ws(a,u));;)try{KI();break}catch(y){p1(a,y)}if(xp(),At=d,Yh.current=g,ve!==null)throw Error(s(261));return Ie=null,Ue=0,we}function KI(){for(;ve!==null;)g1(ve)}function ZI(){for(;ve!==null&&!MI();)g1(ve)}function g1(a){var u=h1(a.alternate,a,Si);a.memoizedProps=a.pendingProps,u===null?y1(a):ve=u,em.current=null}function y1(a){var u=a;do{var d=u.alternate;if(a=u.return,(32768&u.flags)==0){if((d=VI(d,u,Si))!==null)return void(ve=d)}else{if((d=XI(d,u))!==null)return d.flags&=32767,void(ve=d);if(a===null)return we=6,void(ve=null);a.flags|=32768,a.subtreeFlags=0,a.deletions=null}if((u=u.sibling)!==null)return void(ve=u);ve=u=a}while(u!==null);we===0&&(we=5)}function jo(a,u,d){var g=kt,y=fe.transition;try{fe.transition=null,kt=1,function(x,C,A,N){do $s();while(Kn!==null);if(6&At)throw Error(s(327));A=x.finishedWork;var U=x.finishedLanes;if(A===null)return null;if(x.finishedWork=null,x.finishedLanes=0,A===x.current)throw Error(s(177));x.callbackNode=null,x.callbackPriority=0;var G=A.lanes|A.childLanes;if(function(Z,lt){var bt=Z.pendingLanes&~lt;Z.pendingLanes=lt,Z.suspendedLanes=0,Z.pingedLanes=0,Z.expiredLanes&=lt,Z.mutableReadLanes&=lt,Z.entangledLanes&=lt,lt=Z.entanglements;var W=Z.eventTimes;for(Z=Z.expirationTimes;0<bt;){var R=31-cr(bt),L=1<<R;lt[R]=0,W[R]=-1,Z[R]=-1,bt&=~L}}(x,G),x===Ie&&(ve=Ie=null,Ue=0),!(2064&A.subtreeFlags)&&!(2064&A.flags)||Kh||(Kh=!0,x1(X_,function(){return $s(),null})),G=(15990&A.flags)!=0,(15990&A.subtreeFlags)!=0||G){G=fe.transition,fe.transition=null;var it=kt;kt=1;var H=At;At|=4,em.current=null,function(Z,lt){for($(Z.containerInfo),ot=lt;ot!==null;)if(lt=(Z=ot).child,(1028&Z.subtreeFlags)!=0&&lt!==null)lt.return=Z,ot=lt;else for(;ot!==null;){Z=ot;try{var bt=Z.alternate;if(1024&Z.flags)switch(Z.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(bt!==null){var W=bt.memoizedProps,R=bt.memoizedState,L=Z.stateNode,Y=L.getSnapshotBeforeUpdate(Z.elementType===Z.type?W:pr(Z.type,W),R);L.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:Tt&&sI(Z.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(mt){Zt(Z,Z.return,mt)}if((lt=Z.sibling)!==null){lt.return=Z.return,ot=lt;break}ot=Z.return}bt=Jx,Jx=!1}(x,A),n1(A,x),M(x.containerInfo),x.current=A,qI(A),kI(),At=H,kt=it,fe.transition=G}else x.current=A;if(Kh&&(Kh=!1,Kn=x,Zh=U),G=x.pendingLanes,G===0&&(Qn=null),function(Z){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(_h,Z,void 0,(128&Z.current.flags)==128)}catch{}}(A.stateNode),di(x,Ce()),C!==null)for(N=x.onRecoverableError,A=0;A<C.length;A++)U=C[A],N(U.value,{componentStack:U.stack,digest:U.digest});if(Qh)throw Qh=!1,x=sm,sm=null,x;1&Zh&&x.tag!==0&&$s(),G=x.pendingLanes,1&G?x===om?El++:(El=0,om=x):El=0,Hr()}(a,u,d,g)}finally{fe.transition=y,kt=g}return null}function $s(){if(Kn!==null){var a=j_(Zh),u=fe.transition,d=kt;try{if(fe.transition=null,kt=16>a?16:a,Kn===null)var g=!1;else{if(a=Kn,Kn=null,Zh=0,(6&At)!=0)throw Error(s(331));var y=At;for(At|=4,ot=a.current;ot!==null;){var x=ot,C=x.child;if(16&ot.flags){var A=x.deletions;if(A!==null){for(var N=0;N<A.length;N++){var U=A[N];for(ot=U;ot!==null;){var G=ot;switch(G.tag){case 0:case 11:case 15:xl(8,G,x)}var it=G.child;if(it!==null)it.return=G,ot=it;else for(;ot!==null;){var H=(G=ot).sibling,Z=G.return;if(t1(G),G===U){ot=null;break}if(H!==null){H.return=Z,ot=H;break}ot=Z}}}var lt=x.alternate;if(lt!==null){var bt=lt.child;if(bt!==null){lt.child=null;do{var W=bt.sibling;bt.sibling=null,bt=W}while(bt!==null)}}ot=x}}if(2064&x.subtreeFlags&&C!==null)C.return=x,ot=C;else t:for(;ot!==null;){if(2048&(x=ot).flags)switch(x.tag){case 0:case 11:case 15:xl(9,x,x.return)}var R=x.sibling;if(R!==null){R.return=x.return,ot=R;break t}ot=x.return}}var L=a.current;for(ot=L;ot!==null;){var Y=(C=ot).child;if(2064&C.subtreeFlags&&Y!==null)Y.return=C,ot=Y;else t:for(C=L;ot!==null;){if(2048&(A=ot).flags)try{switch(A.tag){case 0:case 11:case 15:Gh(9,A)}}catch(Lt){Zt(A,A.return,Lt)}if(A===C){ot=null;break t}var mt=A.sibling;if(mt!==null){mt.return=A.return,ot=mt;break t}ot=A.return}}if(At=y,Hr(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(_h,a)}catch{}g=!0}return g}finally{kt=d,fe.transition=u}}return!1}function v1(a,u,d){a=Yn(a,u=Ox(0,u=Ho(d,u),1),1),u=Ye(),a!==null&&(ll(a,1,u),di(a,u))}function Zt(a,u,d){if(a.tag===3)v1(a,a,d);else for(;u!==null;){if(u.tag===3){v1(u,a,d);break}if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Qn===null||!Qn.has(g))){u=Yn(u,a=Nx(u,a=Ho(d,a),1),1),a=Ye(),u!==null&&(ll(u,1,a),di(u,a));break}}u=u.return}}function JI(a,u,d){var g=a.pingCache;g!==null&&g.delete(u),u=Ye(),a.pingedLanes|=a.suspendedLanes&d,Ie===a&&(Ue&d)===d&&(we===4||we===3&&(130023424&Ue)===Ue&&500>Ce()-rm?Ws(a,0):im|=d),di(a,u)}function _1(a,u){u===0&&(1&a.mode?(u=ap,!(130023424&(ap<<=1))&&(ap=4194304)):u=1);var d=Ye();(a=Wr(a,u))!==null&&(ll(a,u,d),di(a,d))}function t2(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),_1(a,d)}function e2(a,u){var d=0;switch(a.tag){case 13:var g=a.stateNode,y=a.memoizedState;y!==null&&(d=y.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(s(314))}g!==null&&g.delete(u),_1(a,d)}function x1(a,u){return cp(a,u)}function i2(a,u,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(a,u,d,g){return new i2(a,u,d,g)}function cm(a){return!(!(a=a.prototype)||!a.isReactComponent)}function ts(a,u){var d=a.alternate;return d===null?((d=Vi(a.tag,u,a.key,a.mode)).elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=14680064&a.flags,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function ic(a,u,d,g,y,x){var C=2;if(g=a,typeof a=="function")cm(a)&&(C=1);else if(typeof a=="string")C=5;else t:switch(a){case c:return js(d.children,y,x,u);case f:C=8,y|=8;break;case m:return(a=Vi(12,d,u,2|y)).elementType=m,a.lanes=x,a;case E:return(a=Vi(13,d,u,y)).elementType=E,a.lanes=x,a;case T:return(a=Vi(19,d,u,y)).elementType=T,a.lanes=x,a;case w:return rc(d,y,x,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case p:C=10;break t;case v:C=9;break t;case _:C=11;break t;case b:C=14;break t;case S:C=16,g=null;break t}throw Error(s(130,a==null?a:typeof a,""))}return(u=Vi(C,d,u,y)).elementType=a,u.type=g,u.lanes=x,u}function js(a,u,d,g){return(a=Vi(7,a,g,u)).lanes=d,a}function rc(a,u,d,g){return(a=Vi(22,a,g,u)).elementType=w,a.lanes=d,a.stateNode={isHidden:!1},a}function dm(a,u,d){return(a=Vi(6,a,null,u)).lanes=d,a}function fm(a,u,d){return(u=Vi(4,a.children!==null?a.children:[],a.key,u)).lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function r2(a,u,d,g,y){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Be,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=up(0),this.expirationTimes=up(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=up(0),this.identifierPrefix=g,this.onRecoverableError=y,Mt&&(this.mutableSourceEagerHydrationData=null)}function w1(a,u,d,g,y,x,C,A,N){return a=new r2(a,u,d,A,N),u===1?(u=1,x===!0&&(u|=8)):u=0,x=Vi(3,null,null,u),a.current=x,x.stateNode=a,x.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ep(x),a}function S1(a){if(!a)return Vn;t:{if(k(a=a._reactInternals)!==a||a.tag!==1)throw Error(s(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(xi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(s(171))}if(a.tag===1){var d=a.type;if(xi(d))return G_(a,d,u)}return u}function b1(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return(a=V(u))===null?null:a.stateNode}function E1(a,u){if((a=a.memoizedState)!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function nc(a,u){E1(a,u),(a=a.alternate)&&E1(a,u)}function n2(a){return(a=V(a))===null?null:a.stateNode}function s2(){return null}return h1=function(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps||ui.current)hi=!0;else{if(!(a.lanes&d)&&!(128&u.flags))return hi=!1,function(it,H,Z){switch(H.tag){case 3:jx(H),No();break;case 5:dx(H);break;case 1:xi(H.type)&&yh(H);break;case 4:Pp(H,H.stateNode.containerInfo);break;case 10:tx(0,H.type._context,H.memoizedProps.value);break;case 13:var lt=H.memoizedState;if(lt!==null)return lt.dehydrated!==null?(Ht(ue,1&ue.current),H.flags|=128,null):Z&H.child.childLanes?Xx(it,H,Z):(Ht(ue,1&ue.current),(it=_n(it,H,Z))!==null?it.sibling:null);Ht(ue,1&ue.current);break;case 19:if(lt=(Z&H.childLanes)!=0,(128&it.flags)!=0){if(lt)return qx(it,H,Z);H.flags|=128}var bt=H.memoizedState;if(bt!==null&&(bt.rendering=null,bt.tail=null,bt.lastEffect=null),Ht(ue,ue.current),lt)break;return null;case 22:case 23:return H.lanes=0,Gx(it,H,Z)}return _n(it,H,Z)}(a,u,d);hi=(131072&a.flags)!=0}else hi=!1,Kt&&1048576&u.flags&&q_(u,Sh,u.index);switch(u.lanes=0,u.tag){case 2:var g=u.type;zh(a,u),a=u.pendingProps;var y=ko(u,je.current);Lo(u,d),y=Dp(null,u,g,a,y,d);var x=Op();return u.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,xi(g)?(x=!0,yh(u)):x=!1,u.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Ep(u),y.updater=Ih,u.stateNode=y,y._reactInternals=u,Cp(u,g,a,d),u=Gp(null,u,g,!0,x,d)):(u.tag=0,Kt&&x&&pp(u),ci(null,u,y,d),u=u.child),u;case 16:g=u.elementType;t:{switch(zh(a,u),a=u.pendingProps,g=(y=g._init)(g._payload),u.type=g,y=u.tag=function(it){if(typeof it=="function")return cm(it)?1:0;if(it!=null){if((it=it.$$typeof)===_)return 11;if(it===b)return 14}return 2}(g),a=pr(g,a),y){case 0:u=Hp(null,u,g,a,d);break t;case 1:u=$x(null,u,g,a,d);break t;case 11:u=Ux(null,u,g,a,d);break t;case 14:u=zx(null,u,g,pr(g.type,a),d);break t}throw Error(s(306,g,""))}return u;case 0:return g=u.type,y=u.pendingProps,Hp(a,u,g,y=u.elementType===g?y:pr(g,y),d);case 1:return g=u.type,y=u.pendingProps,$x(a,u,g,y=u.elementType===g?y:pr(g,y),d);case 3:t:{if(jx(u),a===null)throw Error(s(387));g=u.pendingProps,y=(x=u.memoizedState).element,ix(a,u),Ah(u,g,null,d);var C=u.memoizedState;if(g=C.element,Mt&&x.isDehydrated){if(x={element:g,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},u.updateQueue.baseState=x,u.memoizedState=x,256&u.flags){u=Vx(a,u,g,d,y=Ho(Error(s(423)),u));break t}if(g!==y){u=Vx(a,u,g,d,y=Ho(Error(s(424)),u));break t}for(Mt&&(Hi=pI(u.stateNode.containerInfo),wi=u,Kt=!0,fr=null,ul=!1),d=cx(u,null,g,d),u.child=d;d;)d.flags=-3&d.flags|4096,d=d.sibling}else{if(No(),g===y){u=_n(a,u,d);break t}ci(a,u,g,d)}u=u.child}return u;case 5:return dx(u),a===null&&yp(u),g=u.type,y=u.pendingProps,x=a!==null?a.memoizedProps:null,C=y.children,Ft(g,y)?C=null:x!==null&&Ft(g,x)&&(u.flags|=32),Wx(a,u),ci(a,u,C,d),u.child;case 6:return a===null&&yp(u),null;case 13:return Xx(a,u,d);case 4:return Pp(u,u.stateNode.containerInfo),g=u.pendingProps,a===null?u.child=Bo(u,null,g,d):ci(a,u,g,d),u.child;case 11:return g=u.type,y=u.pendingProps,Ux(a,u,g,y=u.elementType===g?y:pr(g,y),d);case 7:return ci(a,u,u.pendingProps,d),u.child;case 8:case 12:return ci(a,u,u.pendingProps.children,d),u.child;case 10:t:{if(g=u.type._context,y=u.pendingProps,x=u.memoizedProps,tx(0,g,C=y.value),x!==null)if(dr(x.value,C)){if(x.children===y.children&&!ui.current){u=_n(a,u,d);break t}}else for((x=u.child)!==null&&(x.return=u);x!==null;){var A=x.dependencies;if(A!==null){C=x.child;for(var N=A.firstContext;N!==null;){if(N.context===g){if(x.tag===1){(N=vn(-1,d&-d)).tag=2;var U=x.updateQueue;if(U!==null){var G=(U=U.shared).pending;G===null?N.next=N:(N.next=G.next,G.next=N),U.pending=N}}x.lanes|=d,(N=x.alternate)!==null&&(N.lanes|=d),Sp(x.return,d,u),A.lanes|=d;break}N=N.next}}else if(x.tag===10)C=x.type===u.type?null:x.child;else if(x.tag===18){if((C=x.return)===null)throw Error(s(341));C.lanes|=d,(A=C.alternate)!==null&&(A.lanes|=d),Sp(C,d,u),C=x.sibling}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===u){C=null;break}if((x=C.sibling)!==null){x.return=C.return,C=x;break}C=C.return}x=C}ci(a,u,y.children,d),u=u.child}return u;case 9:return y=u.type,g=u.pendingProps.children,Lo(u,d),g=g(y=Gi(y)),u.flags|=1,ci(a,u,g,d),u.child;case 14:return y=pr(g=u.type,u.pendingProps),zx(a,u,g,y=pr(g.type,y),d);case 15:return Hx(a,u,u.type,u.pendingProps,d);case 17:return g=u.type,y=u.pendingProps,y=u.elementType===g?y:pr(g,y),zh(a,u),u.tag=1,xi(g)?(a=!0,yh(u)):a=!1,Lo(u,d),ax(u,g,y),Cp(u,g,y,d),Gp(null,u,g,!0,a,d);case 19:return qx(a,u,d);case 22:return Gx(a,u,d)}throw Error(s(156,u.tag))},t.attemptContinuousHydration=function(a){if(a.tag===13){var u=Wr(a,134217728);u!==null&&ji(u,a,134217728,Ye()),nc(a,134217728)}},t.attemptDiscreteHydration=function(a){if(a.tag===13){var u=Wr(a,1);u!==null&&ji(u,a,1,Ye()),nc(a,1)}},t.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13){var u=Zn(a),d=Wr(a,u);d!==null&&ji(d,a,u,Ye()),nc(a,u)}},t.attemptSynchronousHydration=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var d=al(u.pendingLanes);d!==0&&(hp(u,1|d),di(u,Ce()),!(6&At)&&($o(),Hr()))}break;case 13:f1(function(){var g=Wr(a,1);if(g!==null){var y=Ye();ji(g,a,1,y)}}),nc(a,1)}},t.batchedUpdates=function(a,u){var d=At;At|=1;try{return a(u)}finally{(At=d)===0&&($o(),xh&&Hr())}},t.createComponentSelector=function(a){return{$$typeof:Wh,value:a}},t.createContainer=function(a,u,d,g,y,x,C){return w1(a,u,!1,null,0,g,0,x,C)},t.createHasPseudoClassSelector=function(a){return{$$typeof:$h,value:a}},t.createHydrationContainer=function(a,u,d,g,y,x,C,A,N){return(a=w1(d,g,!0,a,0,x,0,A,N)).context=S1(null),d=a.current,(x=vn(g=Ye(),y=Zn(d))).callback=u??null,Yn(d,x,y),a.current.lanes=y,ll(a,y,g),di(a,g),a},t.createPortal=function(a,u,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:g==null?null:""+g,children:a,containerInfo:u,implementation:d}},t.createRoleSelector=function(a){return{$$typeof:jh,value:a}},t.createTestNameSelector=function(a){return{$$typeof:Vh,value:a}},t.createTextSelector=function(a){return{$$typeof:Xh,value:a}},t.deferredUpdates=function(a){var u=kt,d=fe.transition;try{return fe.transition=null,kt=16,a()}finally{kt=u,fe.transition=d}},t.discreteUpdates=function(a,u,d,g,y){var x=kt,C=fe.transition;try{return fe.transition=null,kt=1,a(u,d,g,y)}finally{kt=x,fe.transition=C,At===0&&$o()}},t.findAllNodes=tm,t.findBoundingRects=function(a,u){if(!nl)throw Error(s(363));u=tm(a,u),a=[];for(var d=0;d<u.length;d++)a.push(HA(u[d]));for(u=a.length-1;0<u;u--)for(var g=(d=a[u]).x,y=g+d.width,x=d.y,C=x+d.height,A=u-1;0<=A;A--)if(u!==A){var N=a[A],U=N.x,G=U+N.width,it=N.y,H=it+N.height;if(g>=U&&x>=it&&y<=G&&C<=H){a.splice(u,1);break}if(!(g!==U||d.width!==N.width||H<x||it>C)){it>x&&(N.height+=it-x,N.y=x),H<C&&(N.height=C-it),a.splice(u,1);break}if(!(x!==it||d.height!==N.height||G<g||U>y)){U>g&&(N.width+=U-g,N.x=g),G<y&&(N.width=y-U),a.splice(u,1);break}}return a},t.findHostInstance=b1,t.findHostInstanceWithNoPortals=function(a){return(a=(a=j(a))!==null?B(a):null)===null?null:a.stateNode},t.findHostInstanceWithWarning=function(a){return b1(a)},t.flushControlled=function(a){var u=At;At|=1;var d=fe.transition,g=kt;try{fe.transition=null,kt=1,a()}finally{kt=g,fe.transition=d,(At=u)===0&&($o(),Hr())}},t.flushPassiveEffects=$s,t.flushSync=f1,t.focusWithin=function(a,u){if(!nl)throw Error(s(363));for(u=u1(a=Kp(a),u),u=Array.from(u),a=0;a<u.length;){var d=u[a++];if(!sl(d)){if(d.tag===5&&$A(d.stateNode))return!0;for(d=d.child;d!==null;)u.push(d),d=d.sibling}}return!1},t.getCurrentUpdatePriority=function(){return kt},t.getFindAllNodesFailureDescription=function(a,u){if(!nl)throw Error(s(363));var d=0,g=[];a=[Kp(a),0];for(var y=0;y<a.length;){var x=a[y++],C=a[y++],A=u[C];if((x.tag!==5||!sl(x))&&(Zp(x,A)&&(g.push(Jp(A)),++C>d&&(d=C)),C<u.length))for(x=x.child;x!==null;)a.push(x,C),x=x.sibling}if(d<u.length){for(a=[];d<u.length;d++)a.push(Jp(u[d]));return`findAllNodes was able to match part of the selector:
  `+g.join(" > ")+`

No matching component was found for:
  `+a.join(" > ")}return null},t.getPublicRootInstance=function(a){return(a=a.current).child?a.child.tag===5?pt(a.child.stateNode):a.child.stateNode:null},t.injectIntoDevTools=function(a){if(a={bundleType:a.bundleType,version:a.version,rendererPackageName:a.rendererPackageName,rendererConfig:a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:n2,findFiberByHostInstance:a.findFiberByHostInstance||s2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)a=!0;else{try{_h=u.inject(a),zr=u}catch{}a=!!u.checkDCE}}return a},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(a,u,d,g){if(!nl)throw Error(s(363));a=tm(a,u);var y=jA(a,d,g).disconnect;return{disconnect:function(){y()}}},t.registerMutableSourceForHydration=function(a,u){var d=u._getVersion;d=d(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,d]:a.mutableSourceEagerHydrationData.push(u,d)},t.runWithPriority=function(a,u){var d=kt;try{return kt=a,u()}finally{kt=d}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(a,u,d,g){var y=u.current,x=Ye(),C=Zn(y);return d=S1(d),u.context===null?u.context=d:u.pendingContext=d,(u=vn(x,C)).payload={element:a},(g=g===void 0?null:g)!==null&&(u.callback=g),(a=Yn(y,u,C))!==null&&(ji(a,y,C,x),Ph(a,y,C)),C},t}),Xw}({get exports(){return ly},set exports(e){ly=e}}).exports=Y3();var q3=w3(ly),NT={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},hy={},Cc={get exports(){return hy},set exports(e){hy=e}};(function(){var e,t,i,r,n,s;typeof performance<"u"&&performance!==null&&performance.now?Cc.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Cc.exports=function(){return(e()-n)/1e6},t=process.hrtime,r=(e=function(){var o;return 1e9*(o=t())[0]+o[1]})(),s=1e9*process.uptime(),n=r-s):Date.now?(Cc.exports=function(){return Date.now()-i},i=Date.now()):(Cc.exports=function(){return new Date().getTime()-i},i=new Date().getTime())}).call(x3);var Qw,la={},Ys={};({get exports(){return la},set exports(e){la=e}}).exports=(Qw||(Qw=1,Ys.ConcurrentRoot=1,Ys.ContinuousEventPriority=4,Ys.DefaultEventPriority=16,Ys.DiscreteEventPriority=1,Ys.IdleEventPriority=536870912,Ys.LegacyRoot=0),Ys);var Q3={};function Zm(e,t){e.addChild&&(e.addChild(t),typeof t.didMount=="function"&&t.didMount(t,e))}function FT(e,t){var i,r,n;(i=e.willUnmount)===null||i===void 0||i.call(e,e,t),((r=e.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(n=e.children)!==null&&n!==void 0&&n.length&&Un(e.children).forEach(function(s){FT(s,e)})}function Kw(e,t){var i;FT(t,e),e.removeChild(t);var r=(i=t.config)!==null&&i!==void 0?i:{},n=r.destroy,s=n===void 0||n,o=r.destroyChildren,l=o===void 0||o,h=r.destroyTexture,c=h!==void 0&&h,f=r.destroyBaseTexture,m=f!==void 0&&f;s&&t.destroy({children:l,texture:c,baseTexture:m})}function Zw(e,t,i){de(t!==i,"pixi-react: PixiFiber cannot insert node before itself"),e.children.indexOf(t)!==-1&&e.removeChild(t);var r=e.getChildIndex(i);e.addChildAt(t,r)}var Jw=null,Pr=q3({getRootHostContext:function(){return Q3},getChildHostContext:function(e){return e},getChildHostContextForEventComponent:function(e){return e},getPublicInstance:function(e){return e},getCurrentEventPriority:function(){return function(){var e,t;if(typeof window>"u")return la.DefaultEventPriority;switch((e=window)===null||e===void 0||(t=e.event)===null||t===void 0?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return la.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return la.ContinuousEventPriority;default:return la.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(e){var t,i,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=$3[e];if(typeof s=="function"&&(t=s(n,r)),!t){var o=OT[e];o&&((t=o.create(r,{root:n})).didMount=o.didMount?o.didMount.bind(t):void 0,t.willUnmount=o.willUnmount?o.willUnmount.bind(t):void 0,t.applyProps=o.applyProps?o.applyProps.bind(t):void 0,t.config=o.config)}return t&&(t.__reactpixi={root:n},(typeof((i=t)===null||i===void 0?void 0:i.applyProps)=="function"?t.applyProps:fn)(t,{},r)),t},hideInstance:function(e){e.visible=!1},unhideInstance:function(e,t){var i=t==null||!t.hasOwnProperty("visible")||t.visible;e.visible=i},finalizeInitialChildren:function(e,t,i){return!1},prepareUpdate:function(e,t,i,r,n,s){return Jw=function(o,l,h,c){var f=null;for(var m in h)!c.hasOwnProperty(m)&&h.hasOwnProperty(m)&&h[m]!==null&&(m===oy||(f||(f=[]),f.push(m,null)));for(var p in c){var v=c[p],_=h!==null?h[p]:void 0;!c.hasOwnProperty(p)||v===_||v===null&&_===null||p===oy||(f||(f=[]),f.push(p,v))}return f}(0,0,i,r)},shouldSetTextContent:function(e,t){return!1},shouldDeprioritizeSubtree:function(e,t){var i=t.alpha===void 0||t.alpha>0,r=t.renderable===void 0||t.renderable===!0,n=t.visible===void 0||t.visible===!0;return!(i&&r&&n)},createTextInstance:function(e,t,i){de(!1,'pixi-react: Error trying to add text node "'.concat(e,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(e,t){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:hy,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var e,t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=Zm.apply(null,r);return(e=r[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var e,t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=Zm.apply(null,r);return(e=r[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var e,t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=Zm.apply(null,r);return(e=r[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var e,t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=Kw.apply(null,r);return(e=r[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var e,t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=Kw.apply(null,r);return(e=r[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:Zw,insertInContainerBefore:function(){for(var e,t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];var s=Zw.apply(null,r);return(e=r[0].__reactpixi)===null||e===void 0||(t=e.root)===null||t===void 0||t.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(e,t,i,r,n){var s,o,l=e&&e.applyProps;typeof l!="function"&&(l=fn),(l(e,r,n)||Jw)&&((s=e.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(e,t,i,r,n){},commitTextUpdate:function(e,t,i){},resetTextContent:function(e){},clearContainer:function(e){},getFundamentalComponentInstance:function(e){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(e){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(e){throw new Error("Not yet implemented.")},getInstanceFromNode:function(e){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(e){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(e){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(e){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(e){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(e){}}),K3=NT.dependencies["react-dom"].replace(/[^0-9.]/g,""),Z3=NT.name;Pr.injectIntoDevTools({bundleType:0,version:K3,rendererPackageName:Z3,findHostInstanceByFiber:Pr.findHostInstance});var ps=new Map;function LT(e){if(de(Ee.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`."),ps.has(e)){var t=ps.get(e).pixiFiberContainer;Pr.updateContainer(null,t,void 0,function(){ps.delete(e)})}}function BT(e){de(Ee.prototype.isPrototypeOf(e),"Invalid argument `container`, expected instance of `PIXI.Container`.");var t=ps.get(e);if(de(!t,"Pixi React: createRoot should only be called once"),!t){var i=Pr.createContainer(e);t={pixiFiberContainer:i,reactRoot:{render:function(r){return Pr.updateContainer(r,i,void 0),Pr.getPublicRootInstance(i)},unmount:function(){LT(e),ps.delete(e)}}},ps.set(e,t)}return t.reactRoot}function J3(e,t,i){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),i!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),ps.has(t)?r=ps.get(t).reactRoot:r=BT(t),r.render(e)}function tO(e){LT(e)}function bu(){return bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},bu.apply(this,arguments)}function eO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iO(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,MT(r.key),r)}}function Sn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dd(e,t){return Dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Dd(e,t)}function rO(e,t){if(t&&(Ri(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}function Od(e){return Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Od(e)}var If=kn.createContext(null),UT=If.Provider,zT=If.Consumer,nO=function(e){var t=kn.forwardRef(function(i,r){return kn.createElement(zT,null,function(n){return kn.createElement(e,bu({},i,{ref:r,app:n}))})});return t.displayName="withPIXIApp(".concat(e.displayName||e.name,")"),t};function sO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var i,r=Od(e);if(t){var n=Od(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return rO(this,i)}}function tS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function Pc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tS(Object(i),!0).forEach(function(r){pe(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tS(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var eS=function(){},HT={width:Vt.number,height:Vt.number,onMount:Vt.func,onUnmount:Vt.func,raf:Vt.bool,renderOnComponentChange:Vt.bool,children:Vt.node,options:Vt.shape({autoStart:Vt.bool,width:Vt.number,height:Vt.number,useContextAlpha:Vt.bool,backgroundAlpha:Vt.number,autoDensity:Vt.bool,antialias:Vt.bool,preserveDrawingBuffer:Vt.bool,resolution:Vt.number,forceCanvas:Vt.bool,backgroundColor:Vt.number,clearBeforeRender:Vt.bool,powerPreference:Vt.string,sharedTicker:Vt.bool,sharedLoader:Vt.bool,resizeTo:function(e,t){var i=e[t];i&&de(i===window||i instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ri(i),", expect `window` or an `HTMLElement`."))},view:function(e,t,i){var r=e[t];r&&de(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ri(r),", supplied to ").concat(i,", expected `<canvas> Element`"))}})},oO={width:800,height:600,onMount:eS,onUnmount:eS,raf:!0,renderOnComponentChange:!0},cy=function(e){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Dd(s,o)})(n,kn.Component);var t,i,r=sO(n);function n(){var s;eO(this,n);for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];return pe(Sn(s=r.call.apply(r,[this].concat(l))),"_canvas",null),pe(Sn(s),"_mediaQuery",null),pe(Sn(s),"_ticker",null),pe(Sn(s),"_needsUpdate",!0),pe(Sn(s),"app",null),pe(Sn(s),"updateSize",function(){var c=s.props,f=c.width,m=c.height,p=c.options;p!=null&&p.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(f,m)}),pe(Sn(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),pe(Sn(s),"renderStage",function(){var c=s.props,f=c.renderOnComponentChange;!c.raf&&f&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return t=n,(i=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,l=s.width,h=s.height,c=s.options,f=s.raf,m=s.renderOnComponentChange;this.app=new tl(Pc(Pc({width:l,height:h,view:this._canvas},c),{},{autoDensity:(c==null?void 0:c.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[f?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Pr.createContainer(this.app.stage),Pr.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),c!=null&&c.autoDensity&&window.matchMedia&&(c==null?void 0:c.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),m&&!f&&(this._ticker=new zt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,l){var h,c=this.props,f=c.width,m=c.height,p=c.raf,v=c.renderOnComponentChange,_=c.options;(_==null?void 0:_.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(_==null?void 0:_.resolution)&&(this.app.renderer.resolution=_.resolution,this.resetInteractionManager()),s.height===m&&s.width===f&&((h=s.options)===null||h===void 0?void 0:h.resolution)===(_==null?void 0:_.resolution)||this.updateSize(),s.raf!==p&&this.app.ticker[p?"start":"stop"](),Pr.updateContainer(this.getChildren(),this.mountNode,this),s.width===f&&s.height===m&&s.raf===p&&s.renderOnComponentChange===v&&s.options===_||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return kn.createElement(UT,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Pr.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,l=this,h=this.props.options;return h&&h.view?(de(h.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):kn.createElement("canvas",bu({},(s=this.props,o=[].concat(Un(Object.keys(HT)),Un(Object.keys(ay))),Object.keys(s).filter(function(c){return!o.includes(c)}).reduce(function(c,f){return Pc(Pc({},c),{},pe({},f,s[f]))},{})),{ref:function(c){return l._canvas=c}}))}}])&&iO(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),n}();cy.propTypes=HT,cy.defaultProps=oO;var aO=cy;function GT(){var e=ne.useContext(If);return de(e instanceof tl,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),e}function lO(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=GT();de(typeof e=="function","`useTick` needs a callback function."),de(i instanceof tl,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var r=ne.useRef(null);ne.useEffect(function(){r.current=e},[e]),ne.useEffect(function(){if(t){var n=function(s){return r.current.apply(i.ticker,[s,i.ticker])};return i.ticker.add(n),function(){i.ticker&&i.ticker.remove(n)}}},[t])}function uO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dy(e,t,i){return dy=uO()?Reflect.construct.bind():function(r,n,s){var o=[null];o.push.apply(o,n);var l=new(Function.bind.apply(r,o));return s&&Dd(l,s.prototype),l},dy.apply(null,arguments)}var hO=["children","apply"];function iS(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,r)}return i}function Ac(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(i),!0).forEach(function(r){pe(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iS(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var cO=function(e,t){de(Ri(t)==="object","Second argument needs to be an indexed object with { prop: Filter }");var i=Object.keys(t),r=function(n){var s=n.children,o=n.apply,l=ks(n,hO),h=ne.useRef(ne.useMemo(function(){return i.map(function(m){var p,v=(l==null||(p=l[m])===null||p===void 0?void 0:p.construct)||[];return dy(t[m],Un(v))})},[i])),c=ne.useMemo(function(){return i.reduce(function(m,p,v){return Ac(Ac({},m),{},pe({},p,h.current[v]))},{})},[i]),f=ne.useMemo(function(){return Object.keys(l).filter(DT(kT(i))).reduce(function(m,p){return Ac(Ac({},m),{},pe({},p,l[p]))},{})},[l,i]);return i.forEach(function(m,p){return Object.assign(h.current[p],l[m])}),o&&function(){for(var m=arguments.length,p=new Array(m),v=0;v<m;v++)p[v]=arguments[v];return p.every(function(_){return typeof _=="function"})}(o)&&o.call(e,c),kn.createElement(e,bu({},f,{filters:h.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:Vt.node,apply:Vt.func},r},dO=_i.BitmapText,fO=_i.Container,pO=_i.Graphics,mO=_i.NineSlicePlane,gO=_i.ParticleContainer,yO=_i.Sprite,vO=_i.AnimatedSprite,_O=_i.Text,xO=_i.TilingSprite,wO=_i.SimpleMesh,SO=_i.SimpleRope;const bO=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:vO,AppConsumer:zT,AppContext:If,AppProvider:UT,BitmapText:dO,Container:fO,Graphics:pO,NineSlicePlane:mO,ParticleContainer:gO,PixiComponent:j3,PixiFiber:Pr,SimpleMesh:wO,SimpleRope:SO,Sprite:yO,Stage:aO,TYPES:_i,Text:_O,TilingSprite:xO,applyDefaultProps:fn,createRoot:BT,eventHandlers:kd,render:J3,unmountComponentAtNode:tO,useApp:GT,useTick:lO,withFilters:cO,withPixiApp:nO},Symbol.toStringTag,{value:"Module"})),EO=Cb(bO);pf.exports=EO;var Ar=pf.exports,WT={exports:{}},Ni={},$T={exports:{}},jT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,$){var M=D.length;D.push($);t:for(;0<M;){var Q=M-1>>>1,rt=D[Q];if(0<n(rt,$))D[Q]=$,D[M]=rt,M=Q;else break t}}function i(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var $=D[0],M=D.pop();if(M!==$){D[0]=M;t:for(var Q=0,rt=D.length,wt=rt>>>1;Q<wt;){var vt=2*(Q+1)-1,Ft=D[vt],Et=vt+1,Ot=D[Et];if(0>n(Ft,M))Et<rt&&0>n(Ot,Ft)?(D[Q]=Ot,D[Et]=M,Q=Et):(D[Q]=Ft,D[vt]=M,Q=vt);else if(Et<rt&&0>n(Ot,M))D[Q]=Ot,D[Et]=M,Q=Et;else break t}}return $}function n(D,$){var M=D.sortIndex-$.sortIndex;return M!==0?M:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var h=[],c=[],f=1,m=null,p=3,v=!1,_=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var $=i(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=D)r(c),$.sortIndex=$.expirationTime,t(h,$);else break;$=i(c)}}function P(D){if(E=!1,w(D),!_)if(i(h)!==null)_=!0,pt(I);else{var $=i(c);$!==null&&et(P,$.startTime-D)}}function I(D,$){_=!1,E&&(E=!1,b(k),k=-1),v=!0;var M=p;try{for(w($),m=i(h);m!==null&&(!(m.expirationTime>$)||D&&!V());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,p=m.priorityLevel;var rt=Q(m.expirationTime<=$);$=e.unstable_now(),typeof rt=="function"?m.callback=rt:m===i(h)&&r(h),w($)}else r(h);m=i(h)}if(m!==null)var wt=!0;else{var vt=i(c);vt!==null&&et(P,vt.startTime-$),wt=!1}return wt}finally{m=null,p=M,v=!1}}var F=!1,O=null,k=-1,X=5,j=-1;function V(){return!(e.unstable_now()-j<X)}function K(){if(O!==null){var D=e.unstable_now();j=D;var $=!0;try{$=O(!0,D)}finally{$?B():(F=!1,O=null)}}else F=!1}var B;if(typeof S=="function")B=function(){S(K)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,gt=z.port2;z.port1.onmessage=K,B=function(){gt.postMessage(null)}}else B=function(){T(K,0)};function pt(D){O=D,F||(F=!0,B())}function et(D,$){k=T(function(){D(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){_||v||(_=!0,pt(I))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var M=p;p=$;try{return D()}finally{p=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var M=p;p=D;try{return $()}finally{p=M}},e.unstable_scheduleCallback=function(D,$,M){var Q=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Q+M:Q):M=Q,D){case 1:var rt=-1;break;case 2:rt=250;break;case 5:rt=1073741823;break;case 4:rt=1e4;break;default:rt=5e3}return rt=M+rt,D={id:f++,callback:$,priorityLevel:D,startTime:M,expirationTime:rt,sortIndex:-1},M>Q?(D.sortIndex=M,t(c,D),i(h)===null&&D===i(c)&&(E?(b(k),k=-1):E=!0,et(P,M-Q))):(D.sortIndex=rt,t(h,D),_||v||(_=!0,pt(I))),D},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(D){var $=p;return function(){var M=p;p=$;try{return D.apply(this,arguments)}finally{p=M}}}})(jT);$T.exports=jT;var TO=$T.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=ne,ki=TO;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XT=new Set,Eu={};function Ao(e,t){Ba(e,t),Ba(e+"Capture",t)}function Ba(e,t){for(Eu[e]=t,e=0;e<t.length;e++)XT.add(t[e])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fy=Object.prototype.hasOwnProperty,CO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rS={},nS={};function PO(e){return fy.call(nS,e)?!0:fy.call(rS,e)?!1:CO.test(e)?nS[e]=!0:(rS[e]=!0,!1)}function AO(e,t,i,r){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function IO(e,t,i,r){if(t===null||typeof t>"u"||AO(e,t,i,r))return!0;if(r)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function li(e,t,i,r,n,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$e[e]=new li(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$e[t]=new li(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$e[e]=new li(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$e[e]=new li(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$e[e]=new li(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$e[e]=new li(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$e[e]=new li(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$e[e]=new li(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$e[e]=new li(e,5,!1,e.toLowerCase(),null,!1,!1)});var p0=/[\-:]([a-z])/g;function m0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(p0,m0);$e[t]=new li(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(p0,m0);$e[t]=new li(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(p0,m0);$e[t]=new li(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$e[e]=new li(e,1,!1,e.toLowerCase(),null,!1,!1)});$e.xlinkHref=new li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$e[e]=new li(e,1,!1,e.toLowerCase(),null,!0,!0)});function g0(e,t,i,r){var n=$e.hasOwnProperty(t)?$e[t]:null;(n!==null?n.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(IO(t,i,n,r)&&(i=null),r||n===null?PO(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=i===null?n.type===3?!1:"":i:(t=n.attributeName,r=n.attributeNamespace,i===null?e.removeAttribute(t):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,r?e.setAttributeNS(r,t,i):e.setAttribute(t,i))))}var $n=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ic=Symbol.for("react.element"),ua=Symbol.for("react.portal"),ha=Symbol.for("react.fragment"),y0=Symbol.for("react.strict_mode"),py=Symbol.for("react.profiler"),YT=Symbol.for("react.provider"),qT=Symbol.for("react.context"),v0=Symbol.for("react.forward_ref"),my=Symbol.for("react.suspense"),gy=Symbol.for("react.suspense_list"),_0=Symbol.for("react.memo"),ns=Symbol.for("react.lazy"),QT=Symbol.for("react.offscreen"),sS=Symbol.iterator;function Ml(e){return e===null||typeof e!="object"?null:(e=sS&&e[sS]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,Jm;function jl(e){if(Jm===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Jm=t&&t[1]||""}return`
`+Jm+e}var tg=!1;function eg(e,t){if(!e||tg)return"";tg=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=r.stack.split(`
`),o=n.length-1,l=s.length-1;1<=o&&0<=l&&n[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(n[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||n[o]!==s[l]){var h=`
`+n[o].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=o&&0<=l);break}}}finally{tg=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?jl(e):""}function RO(e){switch(e.tag){case 5:return jl(e.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return e=eg(e.type,!1),e;case 11:return e=eg(e.type.render,!1),e;case 1:return e=eg(e.type,!0),e;default:return""}}function yy(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ha:return"Fragment";case ua:return"Portal";case py:return"Profiler";case y0:return"StrictMode";case my:return"Suspense";case gy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qT:return(e.displayName||"Context")+".Consumer";case YT:return(e._context.displayName||"Context")+".Provider";case v0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _0:return t=e.displayName||null,t!==null?t:yy(e.type)||"Memo";case ns:t=e._payload,e=e._init;try{return yy(e(t))}catch{}}return null}function MO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yy(t);case 8:return t===y0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function KT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kO(e){var t=KT(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rc(e){e._valueTracker||(e._valueTracker=kO(e))}function ZT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=KT(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function Nd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vy(e,t){var i=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function oS(e,t){var i=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;i=Cs(t.value!=null?t.value:i),e._wrapperState={initialChecked:r,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function JT(e,t){t=t.checked,t!=null&&g0(e,"checked",t,!1)}function _y(e,t){JT(e,t);var i=Cs(t.value),r=t.type;if(i!=null)r==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xy(e,t.type,i):t.hasOwnProperty("defaultValue")&&xy(e,t.type,Cs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function aS(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function xy(e,t,i){(t!=="number"||Nd(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Vl=Array.isArray;function Ea(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+Cs(i),t=null,n=0;n<e.length;n++){if(e[n].value===i){e[n].selected=!0,r&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function wy(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lS(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(q(92));if(Vl(i)){if(1<i.length)throw Error(q(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:Cs(i)}}function tC(e,t){var i=Cs(t.value),r=Cs(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),r!=null&&(e.defaultValue=""+r)}function uS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sy(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mc,iC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,r,n){MSApp.execUnsafeLocalFunction(function(){return e(t,i,r,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mc=Mc||document.createElement("div"),Mc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tu(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DO=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(e){DO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ru[t]=ru[e]})});function rC(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||ru.hasOwnProperty(e)&&ru[e]?(""+t).trim():t+"px"}function nC(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var r=i.indexOf("--")===0,n=rC(i,t[i],r);i==="float"&&(i="cssFloat"),r?e.setProperty(i,n):e[i]=n}}var OO=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function by(e,t){if(t){if(OO[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function Ey(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ty=null;function x0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cy=null,Ta=null,Ca=null;function hS(e){if(e=dh(e)){if(typeof Cy!="function")throw Error(q(280));var t=e.stateNode;t&&(t=Of(t),Cy(e.stateNode,e.type,t))}}function sC(e){Ta?Ca?Ca.push(e):Ca=[e]:Ta=e}function oC(){if(Ta){var e=Ta,t=Ca;if(Ca=Ta=null,hS(e),t)for(e=0;e<t.length;e++)hS(t[e])}}function aC(e,t){return e(t)}function lC(){}var ig=!1;function uC(e,t,i){if(ig)return e(t,i);ig=!0;try{return aC(e,t,i)}finally{ig=!1,(Ta!==null||Ca!==null)&&(lC(),oC())}}function Cu(e,t){var i=e.stateNode;if(i===null)return null;var r=Of(i);if(r===null)return null;i=r[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break t;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(q(231,t,typeof i));return i}var Py=!1;if(zn)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){Py=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{Py=!1}function NO(e,t,i,r,n,s,o,l,h){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(f){this.onError(f)}}var nu=!1,Fd=null,Ld=!1,Ay=null,FO={onError:function(e){nu=!0,Fd=e}};function LO(e,t,i,r,n,s,o,l,h){nu=!1,Fd=null,NO.apply(FO,arguments)}function BO(e,t,i,r,n,s,o,l,h){if(LO.apply(this,arguments),nu){if(nu){var c=Fd;nu=!1,Fd=null}else throw Error(q(198));Ld||(Ld=!0,Ay=c)}}function Io(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function hC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cS(e){if(Io(e)!==e)throw Error(q(188))}function UO(e){var t=e.alternate;if(!t){if(t=Io(e),t===null)throw Error(q(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){i=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===i)return cS(n),e;if(s===r)return cS(n),t;s=s.sibling}throw Error(q(188))}if(i.return!==r.return)i=n,r=s;else{for(var o=!1,l=n.child;l;){if(l===i){o=!0,i=n,r=s;break}if(l===r){o=!0,r=n,i=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===i){o=!0,i=s,r=n;break}if(l===r){o=!0,r=s,i=n;break}l=l.sibling}if(!o)throw Error(q(189))}}if(i.alternate!==r)throw Error(q(190))}if(i.tag!==3)throw Error(q(188));return i.stateNode.current===i?e:t}function cC(e){return e=UO(e),e!==null?dC(e):null}function dC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dC(e);if(t!==null)return t;e=e.sibling}return null}var fC=ki.unstable_scheduleCallback,dS=ki.unstable_cancelCallback,zO=ki.unstable_shouldYield,HO=ki.unstable_requestPaint,ge=ki.unstable_now,GO=ki.unstable_getCurrentPriorityLevel,w0=ki.unstable_ImmediatePriority,pC=ki.unstable_UserBlockingPriority,Bd=ki.unstable_NormalPriority,WO=ki.unstable_LowPriority,mC=ki.unstable_IdlePriority,Rf=null,un=null;function $O(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Rf,e,void 0,(e.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:XO,jO=Math.log,VO=Math.LN2;function XO(e){return e>>>=0,e===0?32:31-(jO(e)/VO|0)|0}var kc=64,Dc=4194304;function Xl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ud(e,t){var i=e.pendingLanes;if(i===0)return 0;var r=0,n=e.suspendedLanes,s=e.pingedLanes,o=i&268435455;if(o!==0){var l=o&~n;l!==0?r=Xl(l):(s&=o,s!==0&&(r=Xl(s)))}else o=i&~n,o!==0?r=Xl(o):s!==0&&(r=Xl(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&n)&&(n=r&-r,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(r&4&&(r|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)i=31-Dr(t),n=1<<i,r|=e[i],t&=~n;return r}function YO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qO(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Dr(s),l=1<<o,h=n[o];h===-1?(!(l&i)||l&r)&&(n[o]=YO(l,t)):h<=t&&(e.expiredLanes|=l),s&=~l}}function Iy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gC(){var e=kc;return kc<<=1,!(kc&4194240)&&(kc=64),e}function rg(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function hh(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dr(t),e[t]=i}function QO(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-Dr(i),s=1<<n;t[n]=0,r[n]=-1,e[n]=-1,i&=~s}}function S0(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Dr(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}var Ut=0;function yC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vC,b0,_C,xC,wC,Ry=!1,Oc=[],ms=null,gs=null,ys=null,Pu=new Map,Au=new Map,os=[],KO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fS(e,t){switch(e){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Pu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(t.pointerId)}}function Dl(e,t,i,r,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},t!==null&&(t=dh(t),t!==null&&b0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function ZO(e,t,i,r,n){switch(t){case"focusin":return ms=Dl(ms,e,t,i,r,n),!0;case"dragenter":return gs=Dl(gs,e,t,i,r,n),!0;case"mouseover":return ys=Dl(ys,e,t,i,r,n),!0;case"pointerover":var s=n.pointerId;return Pu.set(s,Dl(Pu.get(s)||null,e,t,i,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Au.set(s,Dl(Au.get(s)||null,e,t,i,r,n)),!0}return!1}function SC(e){var t=so(e.target);if(t!==null){var i=Io(t);if(i!==null){if(t=i.tag,t===13){if(t=hC(i),t!==null){e.blockedOn=t,wC(e.priority,function(){_C(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function od(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=My(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);Ty=r,i.target.dispatchEvent(r),Ty=null}else return t=dh(i),t!==null&&b0(t),e.blockedOn=i,!1;t.shift()}return!0}function pS(e,t,i){od(e)&&i.delete(t)}function JO(){Ry=!1,ms!==null&&od(ms)&&(ms=null),gs!==null&&od(gs)&&(gs=null),ys!==null&&od(ys)&&(ys=null),Pu.forEach(pS),Au.forEach(pS)}function Ol(e,t){e.blockedOn===t&&(e.blockedOn=null,Ry||(Ry=!0,ki.unstable_scheduleCallback(ki.unstable_NormalPriority,JO)))}function Iu(e){function t(n){return Ol(n,e)}if(0<Oc.length){Ol(Oc[0],e);for(var i=1;i<Oc.length;i++){var r=Oc[i];r.blockedOn===e&&(r.blockedOn=null)}}for(ms!==null&&Ol(ms,e),gs!==null&&Ol(gs,e),ys!==null&&Ol(ys,e),Pu.forEach(t),Au.forEach(t),i=0;i<os.length;i++)r=os[i],r.blockedOn===e&&(r.blockedOn=null);for(;0<os.length&&(i=os[0],i.blockedOn===null);)SC(i),i.blockedOn===null&&os.shift()}var Pa=$n.ReactCurrentBatchConfig,zd=!0;function tN(e,t,i,r){var n=Ut,s=Pa.transition;Pa.transition=null;try{Ut=1,E0(e,t,i,r)}finally{Ut=n,Pa.transition=s}}function eN(e,t,i,r){var n=Ut,s=Pa.transition;Pa.transition=null;try{Ut=4,E0(e,t,i,r)}finally{Ut=n,Pa.transition=s}}function E0(e,t,i,r){if(zd){var n=My(e,t,i,r);if(n===null)fg(e,t,r,Hd,i),fS(e,r);else if(ZO(n,e,t,i,r))r.stopPropagation();else if(fS(e,r),t&4&&-1<KO.indexOf(e)){for(;n!==null;){var s=dh(n);if(s!==null&&vC(s),s=My(e,t,i,r),s===null&&fg(e,t,r,Hd,i),s===n)break;n=s}n!==null&&r.stopPropagation()}else fg(e,t,r,null,i)}}var Hd=null;function My(e,t,i,r){if(Hd=null,e=x0(r),e=so(e),e!==null)if(t=Io(e),t===null)e=null;else if(i=t.tag,i===13){if(e=hC(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hd=e,null}function bC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GO()){case w0:return 1;case pC:return 4;case Bd:case WO:return 16;case mC:return 536870912;default:return 16}default:return 16}}var cs=null,T0=null,ad=null;function EC(){if(ad)return ad;var e,t=T0,i=t.length,r,n="value"in cs?cs.value:cs.textContent,s=n.length;for(e=0;e<i&&t[e]===n[e];e++);var o=i-e;for(r=1;r<=o&&t[i-r]===n[s-r];r++);return ad=n.slice(e,1<r?1-r:void 0)}function ld(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nc(){return!0}function mS(){return!1}function Fi(e){function t(i,r,n,s,o){this._reactName=i,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(i=e[l],this[l]=i?i(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nc:mS,this.isPropagationStopped=mS,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),t}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C0=Fi(el),ch=ae({},el,{view:0,detail:0}),iN=Fi(ch),ng,sg,Nl,Mf=ae({},ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nl&&(Nl&&e.type==="mousemove"?(ng=e.screenX-Nl.screenX,sg=e.screenY-Nl.screenY):sg=ng=0,Nl=e),ng)},movementY:function(e){return"movementY"in e?e.movementY:sg}}),gS=Fi(Mf),rN=ae({},Mf,{dataTransfer:0}),nN=Fi(rN),sN=ae({},ch,{relatedTarget:0}),og=Fi(sN),oN=ae({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),aN=Fi(oN),lN=ae({},el,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uN=Fi(lN),hN=ae({},el,{data:0}),yS=Fi(hN),cN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fN[e])?!!t[e]:!1}function P0(){return pN}var mN=ae({},ch,{key:function(e){if(e.key){var t=cN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ld(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P0,charCode:function(e){return e.type==="keypress"?ld(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ld(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gN=Fi(mN),yN=ae({},Mf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vS=Fi(yN),vN=ae({},ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P0}),_N=Fi(vN),xN=ae({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),wN=Fi(xN),SN=ae({},Mf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),bN=Fi(SN),EN=[9,13,27,32],A0=zn&&"CompositionEvent"in window,su=null;zn&&"documentMode"in document&&(su=document.documentMode);var TN=zn&&"TextEvent"in window&&!su,TC=zn&&(!A0||su&&8<su&&11>=su),_S=String.fromCharCode(32),xS=!1;function CC(e,t){switch(e){case"keyup":return EN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ca=!1;function CN(e,t){switch(e){case"compositionend":return PC(t);case"keypress":return t.which!==32?null:(xS=!0,_S);case"textInput":return e=t.data,e===_S&&xS?null:e;default:return null}}function PN(e,t){if(ca)return e==="compositionend"||!A0&&CC(e,t)?(e=EC(),ad=T0=cs=null,ca=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TC&&t.locale!=="ko"?null:t.data;default:return null}}var AN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AN[e.type]:t==="textarea"}function AC(e,t,i,r){sC(r),t=Gd(t,"onChange"),0<t.length&&(i=new C0("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var ou=null,Ru=null;function IN(e){UC(e,0)}function kf(e){var t=pa(e);if(ZT(t))return e}function RN(e,t){if(e==="change")return t}var IC=!1;if(zn){var ag;if(zn){var lg="oninput"in document;if(!lg){var SS=document.createElement("div");SS.setAttribute("oninput","return;"),lg=typeof SS.oninput=="function"}ag=lg}else ag=!1;IC=ag&&(!document.documentMode||9<document.documentMode)}function bS(){ou&&(ou.detachEvent("onpropertychange",RC),Ru=ou=null)}function RC(e){if(e.propertyName==="value"&&kf(Ru)){var t=[];AC(t,Ru,e,x0(e)),uC(IN,t)}}function MN(e,t,i){e==="focusin"?(bS(),ou=t,Ru=i,ou.attachEvent("onpropertychange",RC)):e==="focusout"&&bS()}function kN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return kf(Ru)}function DN(e,t){if(e==="click")return kf(t)}function ON(e,t){if(e==="input"||e==="change")return kf(t)}function NN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fr=typeof Object.is=="function"?Object.is:NN;function Mu(e,t){if(Fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!fy.call(t,n)||!Fr(e[n],t[n]))return!1}return!0}function ES(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function TS(e,t){var i=ES(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ES(i)}}function MC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kC(){for(var e=window,t=Nd();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Nd(e.document)}return t}function I0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FN(e){var t=kC(),i=e.focusedElem,r=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&MC(i.ownerDocument.documentElement,i)){if(r!==null&&I0(i)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=i.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!e.extend&&s>r&&(n=r,r=s,s=n),n=TS(i,s);var o=TS(i,r);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LN=zn&&"documentMode"in document&&11>=document.documentMode,da=null,ky=null,au=null,Dy=!1;function CS(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Dy||da==null||da!==Nd(r)||(r=da,"selectionStart"in r&&I0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),au&&Mu(au,r)||(au=r,r=Gd(ky,"onSelect"),0<r.length&&(t=new C0("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=da)))}function Fc(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var fa={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},ug={},DC={};zn&&(DC=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function Df(e){if(ug[e])return ug[e];if(!fa[e])return e;var t=fa[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in DC)return ug[e]=t[i];return e}var OC=Df("animationend"),NC=Df("animationiteration"),FC=Df("animationstart"),LC=Df("transitionend"),BC=new Map,PS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(e,t){BC.set(e,t),Ao(t,[e])}for(var hg=0;hg<PS.length;hg++){var cg=PS[hg],BN=cg.toLowerCase(),UN=cg[0].toUpperCase()+cg.slice(1);Ds(BN,"on"+UN)}Ds(OC,"onAnimationEnd");Ds(NC,"onAnimationIteration");Ds(FC,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(LC,"onTransitionEnd");Ba("onMouseEnter",["mouseout","mouseover"]);Ba("onMouseLeave",["mouseout","mouseover"]);Ba("onPointerEnter",["pointerout","pointerover"]);Ba("onPointerLeave",["pointerout","pointerover"]);Ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yl));function AS(e,t,i){var r=e.type||"unknown-event";e.currentTarget=i,BO(r,t,void 0,e),e.currentTarget=null}function UC(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;t:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],h=l.instance,c=l.currentTarget;if(l=l.listener,h!==s&&n.isPropagationStopped())break t;AS(n,l,c),s=h}else for(o=0;o<r.length;o++){if(l=r[o],h=l.instance,c=l.currentTarget,l=l.listener,h!==s&&n.isPropagationStopped())break t;AS(n,l,c),s=h}}}if(Ld)throw e=Ay,Ld=!1,Ay=null,e}function jt(e,t){var i=t[By];i===void 0&&(i=t[By]=new Set);var r=e+"__bubble";i.has(r)||(zC(t,e,2,!1),i.add(r))}function dg(e,t,i){var r=0;t&&(r|=4),zC(i,e,r,t)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function ku(e){if(!e[Lc]){e[Lc]=!0,XT.forEach(function(i){i!=="selectionchange"&&(zN.has(i)||dg(i,!1,e),dg(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lc]||(t[Lc]=!0,dg("selectionchange",!1,t))}}function zC(e,t,i,r){switch(bC(t)){case 1:var n=tN;break;case 4:n=eN;break;default:n=E0}i=n.bind(null,t,i,e),n=void 0,!Py||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),r?n!==void 0?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):n!==void 0?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function fg(e,t,i,r,n){var s=r;if(!(t&1)&&!(t&2)&&r!==null)t:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(o===4)for(o=r.return;o!==null;){var h=o.tag;if((h===3||h===4)&&(h=o.stateNode.containerInfo,h===n||h.nodeType===8&&h.parentNode===n))return;o=o.return}for(;l!==null;){if(o=so(l),o===null)return;if(h=o.tag,h===5||h===6){r=s=o;continue t}l=l.parentNode}}r=r.return}uC(function(){var c=s,f=x0(i),m=[];t:{var p=BC.get(e);if(p!==void 0){var v=C0,_=e;switch(e){case"keypress":if(ld(i)===0)break t;case"keydown":case"keyup":v=gN;break;case"focusin":_="focus",v=og;break;case"focusout":_="blur",v=og;break;case"beforeblur":case"afterblur":v=og;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=gS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=nN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=_N;break;case OC:case NC:case FC:v=aN;break;case LC:v=wN;break;case"scroll":v=iN;break;case"wheel":v=bN;break;case"copy":case"cut":case"paste":v=uN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=vS}var E=(t&4)!==0,T=!E&&e==="scroll",b=E?p!==null?p+"Capture":null:p;E=[];for(var S=c,w;S!==null;){w=S;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,b!==null&&(P=Cu(S,b),P!=null&&E.push(Du(S,P,w)))),T)break;S=S.return}0<E.length&&(p=new v(p,_,null,i,f),m.push({event:p,listeners:E}))}}if(!(t&7)){t:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&i!==Ty&&(_=i.relatedTarget||i.fromElement)&&(so(_)||_[Hn]))break t;if((v||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,v?(_=i.relatedTarget||i.toElement,v=c,_=_?so(_):null,_!==null&&(T=Io(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=c),v!==_)){if(E=gS,P="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(E=vS,P="onPointerLeave",b="onPointerEnter",S="pointer"),T=v==null?p:pa(v),w=_==null?p:pa(_),p=new E(P,S+"leave",v,i,f),p.target=T,p.relatedTarget=w,P=null,so(f)===c&&(E=new E(b,S+"enter",_,i,f),E.target=w,E.relatedTarget=T,P=E),T=P,v&&_)e:{for(E=v,b=_,S=0,w=E;w;w=Ko(w))S++;for(w=0,P=b;P;P=Ko(P))w++;for(;0<S-w;)E=Ko(E),S--;for(;0<w-S;)b=Ko(b),w--;for(;S--;){if(E===b||b!==null&&E===b.alternate)break e;E=Ko(E),b=Ko(b)}E=null}else E=null;v!==null&&IS(m,p,v,E,!1),_!==null&&T!==null&&IS(m,T,_,E,!0)}}t:{if(p=c?pa(c):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var I=RN;else if(wS(p))if(IC)I=ON;else{I=kN;var F=MN}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=DN);if(I&&(I=I(e,c))){AC(m,I,i,f);break t}F&&F(e,p,c),e==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&xy(p,"number",p.value)}switch(F=c?pa(c):window,e){case"focusin":(wS(F)||F.contentEditable==="true")&&(da=F,ky=c,au=null);break;case"focusout":au=ky=da=null;break;case"mousedown":Dy=!0;break;case"contextmenu":case"mouseup":case"dragend":Dy=!1,CS(m,i,f);break;case"selectionchange":if(LN)break;case"keydown":case"keyup":CS(m,i,f)}var O;if(A0)t:{switch(e){case"compositionstart":var k="onCompositionStart";break t;case"compositionend":k="onCompositionEnd";break t;case"compositionupdate":k="onCompositionUpdate";break t}k=void 0}else ca?CC(e,i)&&(k="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(k="onCompositionStart");k&&(TC&&i.locale!=="ko"&&(ca||k!=="onCompositionStart"?k==="onCompositionEnd"&&ca&&(O=EC()):(cs=f,T0="value"in cs?cs.value:cs.textContent,ca=!0)),F=Gd(c,k),0<F.length&&(k=new yS(k,e,null,i,f),m.push({event:k,listeners:F}),O?k.data=O:(O=PC(i),O!==null&&(k.data=O)))),(O=TN?CN(e,i):PN(e,i))&&(c=Gd(c,"onBeforeInput"),0<c.length&&(f=new yS("onBeforeInput","beforeinput",null,i,f),m.push({event:f,listeners:c}),f.data=O))}UC(m,t)})}function Du(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Gd(e,t){for(var i=t+"Capture",r=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=Cu(e,i),s!=null&&r.unshift(Du(e,s,n)),s=Cu(e,t),s!=null&&r.push(Du(e,s,n))),e=e.return}return r}function Ko(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function IS(e,t,i,r,n){for(var s=t._reactName,o=[];i!==null&&i!==r;){var l=i,h=l.alternate,c=l.stateNode;if(h!==null&&h===r)break;l.tag===5&&c!==null&&(l=c,n?(h=Cu(i,s),h!=null&&o.unshift(Du(i,h,l))):n||(h=Cu(i,s),h!=null&&o.push(Du(i,h,l)))),i=i.return}o.length!==0&&e.push({event:t,listeners:o})}var HN=/\r\n?/g,GN=/\u0000|\uFFFD/g;function RS(e){return(typeof e=="string"?e:""+e).replace(HN,`
`).replace(GN,"")}function Bc(e,t,i){if(t=RS(t),RS(e)!==t&&i)throw Error(q(425))}function Wd(){}var Oy=null,Ny=null;function Fy(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ly=typeof setTimeout=="function"?setTimeout:void 0,WN=typeof clearTimeout=="function"?clearTimeout:void 0,MS=typeof Promise=="function"?Promise:void 0,$N=typeof queueMicrotask=="function"?queueMicrotask:typeof MS<"u"?function(e){return MS.resolve(null).then(e).catch(jN)}:Ly;function jN(e){setTimeout(function(){throw e})}function pg(e,t){var i=t,r=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){e.removeChild(n),Iu(t);return}r--}else i!=="$"&&i!=="$?"&&i!=="$!"||r++;i=n}while(i);Iu(t)}function vs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var il=Math.random().toString(36).slice(2),en="__reactFiber$"+il,Ou="__reactProps$"+il,Hn="__reactContainer$"+il,By="__reactEvents$"+il,VN="__reactListeners$"+il,XN="__reactHandles$"+il;function so(e){var t=e[en];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Hn]||i[en]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=kS(e);e!==null;){if(i=e[en])return i;e=kS(e)}return t}e=i,i=e.parentNode}return null}function dh(e){return e=e[en]||e[Hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function Of(e){return e[Ou]||null}var Uy=[],ma=-1;function Os(e){return{current:e}}function Xt(e){0>ma||(e.current=Uy[ma],Uy[ma]=null,ma--)}function Gt(e,t){ma++,Uy[ma]=e.current,e.current=t}var Ps={},ti=Os(Ps),gi=Os(!1),_o=Ps;function Ua(e,t){var i=e.type.contextTypes;if(!i)return Ps;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in i)n[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function yi(e){return e=e.childContextTypes,e!=null}function $d(){Xt(gi),Xt(ti)}function DS(e,t,i){if(ti.current!==Ps)throw Error(q(168));Gt(ti,t),Gt(gi,i)}function HC(e,t,i){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return i;r=r.getChildContext();for(var n in r)if(!(n in t))throw Error(q(108,MO(e)||"Unknown",n));return ae({},i,r)}function jd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ps,_o=ti.current,Gt(ti,e),Gt(gi,gi.current),!0}function OS(e,t,i){var r=e.stateNode;if(!r)throw Error(q(169));i?(e=HC(e,t,_o),r.__reactInternalMemoizedMergedChildContext=e,Xt(gi),Xt(ti),Gt(ti,e)):Xt(gi),Gt(gi,i)}var Cn=null,Nf=!1,mg=!1;function GC(e){Cn===null?Cn=[e]:Cn.push(e)}function YN(e){Nf=!0,GC(e)}function Ns(){if(!mg&&Cn!==null){mg=!0;var e=0,t=Ut;try{var i=Cn;for(Ut=1;e<i.length;e++){var r=i[e];do r=r(!0);while(r!==null)}Cn=null,Nf=!1}catch(n){throw Cn!==null&&(Cn=Cn.slice(e+1)),fC(w0,Ns),n}finally{Ut=t,mg=!1}}return null}var ga=[],ya=0,Vd=null,Xd=0,Ki=[],Zi=0,xo=null,In=1,Rn="";function to(e,t){ga[ya++]=Xd,ga[ya++]=Vd,Vd=e,Xd=t}function WC(e,t,i){Ki[Zi++]=In,Ki[Zi++]=Rn,Ki[Zi++]=xo,xo=e;var r=In;e=Rn;var n=32-Dr(r)-1;r&=~(1<<n),i+=1;var s=32-Dr(t)+n;if(30<s){var o=n-n%5;s=(r&(1<<o)-1).toString(32),r>>=o,n-=o,In=1<<32-Dr(t)+n|i<<n|r,Rn=s+e}else In=1<<s|i<<n|r,Rn=e}function R0(e){e.return!==null&&(to(e,1),WC(e,1,0))}function M0(e){for(;e===Vd;)Vd=ga[--ya],ga[ya]=null,Xd=ga[--ya],ga[ya]=null;for(;e===xo;)xo=Ki[--Zi],Ki[Zi]=null,Rn=Ki[--Zi],Ki[Zi]=null,In=Ki[--Zi],Ki[Zi]=null}var Mi=null,Ai=null,te=!1,Er=null;function $C(e,t){var i=ir(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function NS(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mi=e,Ai=vs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mi=e,Ai=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=xo!==null?{id:In,overflow:Rn}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=ir(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,Mi=e,Ai=null,!0):!1;default:return!1}}function zy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hy(e){if(te){var t=Ai;if(t){var i=t;if(!NS(e,t)){if(zy(e))throw Error(q(418));t=vs(i.nextSibling);var r=Mi;t&&NS(e,t)?$C(r,i):(e.flags=e.flags&-4097|2,te=!1,Mi=e)}}else{if(zy(e))throw Error(q(418));e.flags=e.flags&-4097|2,te=!1,Mi=e}}}function FS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mi=e}function Uc(e){if(e!==Mi)return!1;if(!te)return FS(e),te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fy(e.type,e.memoizedProps)),t&&(t=Ai)){if(zy(e))throw jC(),Error(q(418));for(;t;)$C(e,t),t=vs(t.nextSibling)}if(FS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){Ai=vs(e.nextSibling);break t}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}Ai=null}}else Ai=Mi?vs(e.stateNode.nextSibling):null;return!0}function jC(){for(var e=Ai;e;)e=vs(e.nextSibling)}function za(){Ai=Mi=null,te=!1}function k0(e){Er===null?Er=[e]:Er.push(e)}var qN=$n.ReactCurrentBatchConfig;function wr(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Yd=Os(null),qd=null,va=null,D0=null;function O0(){D0=va=qd=null}function N0(e){var t=Yd.current;Xt(Yd),e._currentValue=t}function Gy(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function Aa(e,t){qd=e,D0=va=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mi=!0),e.firstContext=null)}function sr(e){var t=e._currentValue;if(D0!==e)if(e={context:e,memoizedValue:t,next:null},va===null){if(qd===null)throw Error(q(308));va=e,qd.dependencies={lanes:0,firstContext:e}}else va=va.next=e;return t}var oo=null;function F0(e){oo===null?oo=[e]:oo.push(e)}function VC(e,t,i,r){var n=t.interleaved;return n===null?(i.next=i,F0(t)):(i.next=n.next,n.next=i),t.interleaved=i,Gn(e,r)}function Gn(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var ss=!1;function L0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _s(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Rt&2){var n=r.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Gn(e,i)}return n=r.interleaved,n===null?(t.next=t,F0(r)):(t.next=n.next,n.next=t),r.interleaved=t,Gn(e,i)}function ud(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,S0(e,i)}}function LS(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var n=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?n=s=o:s=s.next=o,i=i.next}while(i!==null);s===null?n=s=t:s=s.next=t}else n=s=t;i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Qd(e,t,i,r){var n=e.updateQueue;ss=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var h=l,c=h.next;h.next=null,o===null?s=c:o.next=c,o=h;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=h))}if(s!==null){var m=n.baseState;o=0,f=c=h=null,l=s;do{var p=l.lane,v=l.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var _=e,E=l;switch(p=t,v=i,E.tag){case 1:if(_=E.payload,typeof _=="function"){m=_.call(v,m,p);break t}m=_;break t;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,p=typeof _=="function"?_.call(v,m,p):_,p==null)break t;m=ae({},m,p);break t;case 2:ss=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=n.effects,p===null?n.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=v,h=m):f=f.next=v,o|=p;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;p=l,l=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(1);if(f===null&&(h=m),n.baseState=h,n.firstBaseUpdate=c,n.lastBaseUpdate=f,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);So|=o,e.lanes=o,e.memoizedState=m}}function BS(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(n!==null){if(r.callback=null,r=i,typeof n!="function")throw Error(q(191,n));n.call(r)}}}var YC=new VT.Component().refs;function Wy(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:ae({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ff={isMounted:function(e){return(e=e._reactInternals)?Io(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=oi(),n=ws(e),s=Dn(r,n);s.payload=t,i!=null&&(s.callback=i),t=_s(e,s,n),t!==null&&(Or(t,e,n,r),ud(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=oi(),n=ws(e),s=Dn(r,n);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=_s(e,s,n),t!==null&&(Or(t,e,n,r),ud(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=oi(),r=ws(e),n=Dn(i,r);n.tag=2,t!=null&&(n.callback=t),t=_s(e,n,r),t!==null&&(Or(t,e,r,i),ud(t,e,r))}};function US(e,t,i,r,n,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Mu(i,r)||!Mu(n,s):!0}function qC(e,t,i){var r=!1,n=Ps,s=t.contextType;return typeof s=="object"&&s!==null?s=sr(s):(n=yi(t)?_o:ti.current,r=t.contextTypes,s=(r=r!=null)?Ua(e,n):Ps),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ff,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function zS(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&Ff.enqueueReplaceState(t,t.state,null)}function $y(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=YC,L0(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=sr(s):(s=yi(t)?_o:ti.current,n.context=Ua(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Wy(e,t,s,i),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Ff.enqueueReplaceState(n,n.state,null),Qd(e,i,n,r),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Fl(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(q(309));var r=i.stateNode}if(!r)throw Error(q(147,e));var n=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=n.refs;l===YC&&(l=n.refs={}),o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(q(284));if(!i._owner)throw Error(q(290,e))}return e}function zc(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function HS(e){var t=e._init;return t(e._payload)}function QC(e){function t(b,S){if(e){var w=b.deletions;w===null?(b.deletions=[S],b.flags|=16):w.push(S)}}function i(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function n(b,S){return b=Ss(b,S),b.index=0,b.sibling=null,b}function s(b,S,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<S?(b.flags|=2,S):w):(b.flags|=2,S)):(b.flags|=1048576,S)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,S,w,P){return S===null||S.tag!==6?(S=Sg(w,b.mode,P),S.return=b,S):(S=n(S,w),S.return=b,S)}function h(b,S,w,P){var I=w.type;return I===ha?f(b,S,w.props.children,P,w.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ns&&HS(I)===S.type)?(P=n(S,w.props),P.ref=Fl(b,S,w),P.return=b,P):(P=md(w.type,w.key,w.props,null,b.mode,P),P.ref=Fl(b,S,w),P.return=b,P)}function c(b,S,w,P){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=bg(w,b.mode,P),S.return=b,S):(S=n(S,w.children||[]),S.return=b,S)}function f(b,S,w,P,I){return S===null||S.tag!==7?(S=go(w,b.mode,P,I),S.return=b,S):(S=n(S,w),S.return=b,S)}function m(b,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Sg(""+S,b.mode,w),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ic:return w=md(S.type,S.key,S.props,null,b.mode,w),w.ref=Fl(b,null,S),w.return=b,w;case ua:return S=bg(S,b.mode,w),S.return=b,S;case ns:var P=S._init;return m(b,P(S._payload),w)}if(Vl(S)||Ml(S))return S=go(S,b.mode,w,null),S.return=b,S;zc(b,S)}return null}function p(b,S,w,P){var I=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return I!==null?null:l(b,S,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ic:return w.key===I?h(b,S,w,P):null;case ua:return w.key===I?c(b,S,w,P):null;case ns:return I=w._init,p(b,S,I(w._payload),P)}if(Vl(w)||Ml(w))return I!==null?null:f(b,S,w,P,null);zc(b,w)}return null}function v(b,S,w,P,I){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(w)||null,l(S,b,""+P,I);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ic:return b=b.get(P.key===null?w:P.key)||null,h(S,b,P,I);case ua:return b=b.get(P.key===null?w:P.key)||null,c(S,b,P,I);case ns:var F=P._init;return v(b,S,w,F(P._payload),I)}if(Vl(P)||Ml(P))return b=b.get(w)||null,f(S,b,P,I,null);zc(S,P)}return null}function _(b,S,w,P){for(var I=null,F=null,O=S,k=S=0,X=null;O!==null&&k<w.length;k++){O.index>k?(X=O,O=null):X=O.sibling;var j=p(b,O,w[k],P);if(j===null){O===null&&(O=X);break}e&&O&&j.alternate===null&&t(b,O),S=s(j,S,k),F===null?I=j:F.sibling=j,F=j,O=X}if(k===w.length)return i(b,O),te&&to(b,k),I;if(O===null){for(;k<w.length;k++)O=m(b,w[k],P),O!==null&&(S=s(O,S,k),F===null?I=O:F.sibling=O,F=O);return te&&to(b,k),I}for(O=r(b,O);k<w.length;k++)X=v(O,b,k,w[k],P),X!==null&&(e&&X.alternate!==null&&O.delete(X.key===null?k:X.key),S=s(X,S,k),F===null?I=X:F.sibling=X,F=X);return e&&O.forEach(function(V){return t(b,V)}),te&&to(b,k),I}function E(b,S,w,P){var I=Ml(w);if(typeof I!="function")throw Error(q(150));if(w=I.call(w),w==null)throw Error(q(151));for(var F=I=null,O=S,k=S=0,X=null,j=w.next();O!==null&&!j.done;k++,j=w.next()){O.index>k?(X=O,O=null):X=O.sibling;var V=p(b,O,j.value,P);if(V===null){O===null&&(O=X);break}e&&O&&V.alternate===null&&t(b,O),S=s(V,S,k),F===null?I=V:F.sibling=V,F=V,O=X}if(j.done)return i(b,O),te&&to(b,k),I;if(O===null){for(;!j.done;k++,j=w.next())j=m(b,j.value,P),j!==null&&(S=s(j,S,k),F===null?I=j:F.sibling=j,F=j);return te&&to(b,k),I}for(O=r(b,O);!j.done;k++,j=w.next())j=v(O,b,k,j.value,P),j!==null&&(e&&j.alternate!==null&&O.delete(j.key===null?k:j.key),S=s(j,S,k),F===null?I=j:F.sibling=j,F=j);return e&&O.forEach(function(K){return t(b,K)}),te&&to(b,k),I}function T(b,S,w,P){if(typeof w=="object"&&w!==null&&w.type===ha&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ic:t:{for(var I=w.key,F=S;F!==null;){if(F.key===I){if(I=w.type,I===ha){if(F.tag===7){i(b,F.sibling),S=n(F,w.props.children),S.return=b,b=S;break t}}else if(F.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ns&&HS(I)===F.type){i(b,F.sibling),S=n(F,w.props),S.ref=Fl(b,F,w),S.return=b,b=S;break t}i(b,F);break}else t(b,F);F=F.sibling}w.type===ha?(S=go(w.props.children,b.mode,P,w.key),S.return=b,b=S):(P=md(w.type,w.key,w.props,null,b.mode,P),P.ref=Fl(b,S,w),P.return=b,b=P)}return o(b);case ua:t:{for(F=w.key;S!==null;){if(S.key===F)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){i(b,S.sibling),S=n(S,w.children||[]),S.return=b,b=S;break t}else{i(b,S);break}else t(b,S);S=S.sibling}S=bg(w,b.mode,P),S.return=b,b=S}return o(b);case ns:return F=w._init,T(b,S,F(w._payload),P)}if(Vl(w))return _(b,S,w,P);if(Ml(w))return E(b,S,w,P);zc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,S!==null&&S.tag===6?(i(b,S.sibling),S=n(S,w),S.return=b,b=S):(i(b,S),S=Sg(w,b.mode,P),S.return=b,b=S),o(b)):i(b,S)}return T}var Ha=QC(!0),KC=QC(!1),fh={},hn=Os(fh),Nu=Os(fh),Fu=Os(fh);function ao(e){if(e===fh)throw Error(q(174));return e}function B0(e,t){switch(Gt(Fu,t),Gt(Nu,e),Gt(hn,fh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sy(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sy(t,e)}Xt(hn),Gt(hn,t)}function Ga(){Xt(hn),Xt(Nu),Xt(Fu)}function ZC(e){ao(Fu.current);var t=ao(hn.current),i=Sy(t,e.type);t!==i&&(Gt(Nu,e),Gt(hn,i))}function U0(e){Nu.current===e&&(Xt(hn),Xt(Nu))}var re=Os(0);function Kd(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gg=[];function z0(){for(var e=0;e<gg.length;e++)gg[e]._workInProgressVersionPrimary=null;gg.length=0}var hd=$n.ReactCurrentDispatcher,yg=$n.ReactCurrentBatchConfig,wo=0,oe=null,Se=null,De=null,Zd=!1,lu=!1,Lu=0,QN=0;function qe(){throw Error(q(321))}function H0(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Fr(e[i],t[i]))return!1;return!0}function G0(e,t,i,r,n,s){if(wo=s,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hd.current=e===null||e.memoizedState===null?tF:eF,e=i(r,n),lu){s=0;do{if(lu=!1,Lu=0,25<=s)throw Error(q(301));s+=1,De=Se=null,t.updateQueue=null,hd.current=iF,e=i(r,n)}while(lu)}if(hd.current=Jd,t=Se!==null&&Se.next!==null,wo=0,De=Se=oe=null,Zd=!1,t)throw Error(q(300));return e}function W0(){var e=Lu!==0;return Lu=0,e}function Jr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?oe.memoizedState=De=e:De=De.next=e,De}function or(){if(Se===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=De===null?oe.memoizedState:De.next;if(t!==null)De=t,Se=e;else{if(e===null)throw Error(q(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},De===null?oe.memoizedState=De=e:De=De.next=e}return De}function Bu(e,t){return typeof t=="function"?t(e):t}function vg(e){var t=or(),i=t.queue;if(i===null)throw Error(q(311));i.lastRenderedReducer=e;var r=Se,n=r.baseQueue,s=i.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}r.baseQueue=n=s,i.pending=null}if(n!==null){s=n.next,r=r.baseState;var l=o=null,h=null,c=s;do{var f=c.lane;if((wo&f)===f)h!==null&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var m={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};h===null?(l=h=m,o=r):h=h.next=m,oe.lanes|=f,So|=f}c=c.next}while(c!==null&&c!==s);h===null?o=r:h.next=l,Fr(r,t.memoizedState)||(mi=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=h,i.lastRenderedState=r}if(e=i.interleaved,e!==null){n=e;do s=n.lane,oe.lanes|=s,So|=s,n=n.next;while(n!==e)}else n===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function _g(e){var t=or(),i=t.queue;if(i===null)throw Error(q(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,s=t.memoizedState;if(n!==null){i.pending=null;var o=n=n.next;do s=e(s,o.action),o=o.next;while(o!==n);Fr(s,t.memoizedState)||(mi=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,r]}function JC(){}function tP(e,t){var i=oe,r=or(),n=t(),s=!Fr(r.memoizedState,n);if(s&&(r.memoizedState=n,mi=!0),r=r.queue,$0(rP.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||De!==null&&De.memoizedState.tag&1){if(i.flags|=2048,Uu(9,iP.bind(null,i,r,n,t),void 0,null),Le===null)throw Error(q(349));wo&30||eP(i,t,n)}return n}function eP(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function iP(e,t,i,r){t.value=i,t.getSnapshot=r,nP(t)&&sP(e)}function rP(e,t,i){return i(function(){nP(t)&&sP(e)})}function nP(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Fr(e,i)}catch{return!0}}function sP(e){var t=Gn(e,1);t!==null&&Or(t,e,1,-1)}function GS(e){var t=Jr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:e},t.queue=e,e=e.dispatch=JN.bind(null,oe,e),[t.memoizedState,e]}function Uu(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e)),e}function oP(){return or().memoizedState}function cd(e,t,i,r){var n=Jr();oe.flags|=e,n.memoizedState=Uu(1|t,i,void 0,r===void 0?null:r)}function Lf(e,t,i,r){var n=or();r=r===void 0?null:r;var s=void 0;if(Se!==null){var o=Se.memoizedState;if(s=o.destroy,r!==null&&H0(r,o.deps)){n.memoizedState=Uu(t,i,s,r);return}}oe.flags|=e,n.memoizedState=Uu(1|t,i,s,r)}function WS(e,t){return cd(8390656,8,e,t)}function $0(e,t){return Lf(2048,8,e,t)}function aP(e,t){return Lf(4,2,e,t)}function lP(e,t){return Lf(4,4,e,t)}function uP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hP(e,t,i){return i=i!=null?i.concat([e]):null,Lf(4,4,uP.bind(null,t,e),i)}function j0(){}function cP(e,t){var i=or();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&H0(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function dP(e,t){var i=or();t=t===void 0?null:t;var r=i.memoizedState;return r!==null&&t!==null&&H0(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function fP(e,t,i){return wo&21?(Fr(i,t)||(i=gC(),oe.lanes|=i,So|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mi=!0),e.memoizedState=i)}function KN(e,t){var i=Ut;Ut=i!==0&&4>i?i:4,e(!0);var r=yg.transition;yg.transition={};try{e(!1),t()}finally{Ut=i,yg.transition=r}}function pP(){return or().memoizedState}function ZN(e,t,i){var r=ws(e);if(i={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null},mP(e))gP(t,i);else if(i=VC(e,t,i,r),i!==null){var n=oi();Or(i,e,r,n),yP(i,t,r)}}function JN(e,t,i){var r=ws(e),n={lane:r,action:i,hasEagerState:!1,eagerState:null,next:null};if(mP(e))gP(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,i);if(n.hasEagerState=!0,n.eagerState=l,Fr(l,o)){var h=t.interleaved;h===null?(n.next=n,F0(t)):(n.next=h.next,h.next=n),t.interleaved=n;return}}catch{}finally{}i=VC(e,t,n,r),i!==null&&(n=oi(),Or(i,e,r,n),yP(i,t,r))}}function mP(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function gP(e,t){lu=Zd=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function yP(e,t,i){if(i&4194240){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,S0(e,i)}}var Jd={readContext:sr,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},tF={readContext:sr,useCallback:function(e,t){return Jr().memoizedState=[e,t===void 0?null:t],e},useContext:sr,useEffect:WS,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,cd(4194308,4,uP.bind(null,t,e),i)},useLayoutEffect:function(e,t){return cd(4194308,4,e,t)},useInsertionEffect:function(e,t){return cd(4,2,e,t)},useMemo:function(e,t){var i=Jr();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=Jr();return t=i!==void 0?i(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ZN.bind(null,oe,e),[r.memoizedState,e]},useRef:function(e){var t=Jr();return e={current:e},t.memoizedState=e},useState:GS,useDebugValue:j0,useDeferredValue:function(e){return Jr().memoizedState=e},useTransition:function(){var e=GS(!1),t=e[0];return e=KN.bind(null,e[1]),Jr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var r=oe,n=Jr();if(te){if(i===void 0)throw Error(q(407));i=i()}else{if(i=t(),Le===null)throw Error(q(349));wo&30||eP(r,t,i)}n.memoizedState=i;var s={value:i,getSnapshot:t};return n.queue=s,WS(rP.bind(null,r,s,e),[e]),r.flags|=2048,Uu(9,iP.bind(null,r,s,i,t),void 0,null),i},useId:function(){var e=Jr(),t=Le.identifierPrefix;if(te){var i=Rn,r=In;i=(r&~(1<<32-Dr(r)-1)).toString(32)+i,t=":"+t+"R"+i,i=Lu++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=QN++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eF={readContext:sr,useCallback:cP,useContext:sr,useEffect:$0,useImperativeHandle:hP,useInsertionEffect:aP,useLayoutEffect:lP,useMemo:dP,useReducer:vg,useRef:oP,useState:function(){return vg(Bu)},useDebugValue:j0,useDeferredValue:function(e){var t=or();return fP(t,Se.memoizedState,e)},useTransition:function(){var e=vg(Bu)[0],t=or().memoizedState;return[e,t]},useMutableSource:JC,useSyncExternalStore:tP,useId:pP,unstable_isNewReconciler:!1},iF={readContext:sr,useCallback:cP,useContext:sr,useEffect:$0,useImperativeHandle:hP,useInsertionEffect:aP,useLayoutEffect:lP,useMemo:dP,useReducer:_g,useRef:oP,useState:function(){return _g(Bu)},useDebugValue:j0,useDeferredValue:function(e){var t=or();return Se===null?t.memoizedState=e:fP(t,Se.memoizedState,e)},useTransition:function(){var e=_g(Bu)[0],t=or().memoizedState;return[e,t]},useMutableSource:JC,useSyncExternalStore:tP,useId:pP,unstable_isNewReconciler:!1};function Wa(e,t){try{var i="",r=t;do i+=RO(r),r=r.return;while(r);var n=i}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function xg(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function jy(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var rF=typeof WeakMap=="function"?WeakMap:Map;function vP(e,t,i){i=Dn(-1,i),i.tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){ef||(ef=!0,ev=r),jy(e,t)},i}function _P(e,t,i){i=Dn(-1,i),i.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var n=t.value;i.payload=function(){return r(n)},i.callback=function(){jy(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){jy(e,t),typeof r!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),i}function $S(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new rF;var n=new Set;r.set(t,n)}else n=r.get(t),n===void 0&&(n=new Set,r.set(t,n));n.has(i)||(n.add(i),e=yF.bind(null,e,t,i),t.then(e,e))}function jS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function VS(e,t,i,r,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Dn(-1,1),t.tag=2,_s(i,t,1))),i.lanes|=1),e)}var nF=$n.ReactCurrentOwner,mi=!1;function ni(e,t,i,r){t.child=e===null?KC(t,null,i,r):Ha(t,e.child,i,r)}function XS(e,t,i,r,n){i=i.render;var s=t.ref;return Aa(t,n),r=G0(e,t,i,r,s,n),i=W0(),e!==null&&!mi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wn(e,t,n)):(te&&i&&R0(t),t.flags|=1,ni(e,t,r,n),t.child)}function YS(e,t,i,r,n){if(e===null){var s=i.type;return typeof s=="function"&&!J0(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=s,xP(e,t,s,r,n)):(e=md(i.type,null,r,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var o=s.memoizedProps;if(i=i.compare,i=i!==null?i:Mu,i(o,r)&&e.ref===t.ref)return Wn(e,t,n)}return t.flags|=1,e=Ss(s,r),e.ref=t.ref,e.return=t,t.child=e}function xP(e,t,i,r,n){if(e!==null){var s=e.memoizedProps;if(Mu(s,r)&&e.ref===t.ref)if(mi=!1,t.pendingProps=r=s,(e.lanes&n)!==0)e.flags&131072&&(mi=!0);else return t.lanes=e.lanes,Wn(e,t,n)}return Vy(e,t,i,r,n)}function wP(e,t,i){var r=t.pendingProps,n=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(xa,Ci),Ci|=i;else{if(!(i&1073741824))return e=s!==null?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(xa,Ci),Ci|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:i,Gt(xa,Ci),Ci|=r}else s!==null?(r=s.baseLanes|i,t.memoizedState=null):r=i,Gt(xa,Ci),Ci|=r;return ni(e,t,n,i),t.child}function SP(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Vy(e,t,i,r,n){var s=yi(i)?_o:ti.current;return s=Ua(t,s),Aa(t,n),i=G0(e,t,i,r,s,n),r=W0(),e!==null&&!mi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wn(e,t,n)):(te&&r&&R0(t),t.flags|=1,ni(e,t,i,n),t.child)}function qS(e,t,i,r,n){if(yi(i)){var s=!0;jd(t)}else s=!1;if(Aa(t,n),t.stateNode===null)dd(e,t),qC(t,i,r),$y(t,i,r,n),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var h=o.context,c=i.contextType;typeof c=="object"&&c!==null?c=sr(c):(c=yi(i)?_o:ti.current,c=Ua(t,c));var f=i.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||h!==c)&&zS(t,o,r,c),ss=!1;var p=t.memoizedState;o.state=p,Qd(t,r,o,n),h=t.memoizedState,l!==r||p!==h||gi.current||ss?(typeof f=="function"&&(Wy(t,i,f,r),h=t.memoizedState),(l=ss||US(t,i,l,r,p,h,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,XC(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:wr(t.type,l),o.props=c,m=t.pendingProps,p=o.context,h=i.contextType,typeof h=="object"&&h!==null?h=sr(h):(h=yi(i)?_o:ti.current,h=Ua(t,h));var v=i.getDerivedStateFromProps;(f=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==h)&&zS(t,o,r,h),ss=!1,p=t.memoizedState,o.state=p,Qd(t,r,o,n);var _=t.memoizedState;l!==m||p!==_||gi.current||ss?(typeof v=="function"&&(Wy(t,i,v,r),_=t.memoizedState),(c=ss||US(t,i,c,r,p,_,h)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,h),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,h)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=_),o.props=r,o.state=_,o.context=h,r=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Xy(e,t,i,r,s,n)}function Xy(e,t,i,r,n,s){SP(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return n&&OS(t,i,!1),Wn(e,t,s);r=t.stateNode,nF.current=t;var l=o&&typeof i.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ha(t,e.child,null,s),t.child=Ha(t,null,l,s)):ni(e,t,l,s),t.memoizedState=r.state,n&&OS(t,i,!0),t.child}function bP(e){var t=e.stateNode;t.pendingContext?DS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&DS(e,t.context,!1),B0(e,t.containerInfo)}function QS(e,t,i,r,n){return za(),k0(n),t.flags|=256,ni(e,t,i,r),t.child}var Yy={dehydrated:null,treeContext:null,retryLane:0};function qy(e){return{baseLanes:e,cachePool:null,transitions:null}}function EP(e,t,i){var r=t.pendingProps,n=re.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),Gt(re,n&1),e===null)return Hy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zf(o,r,0,null),e=go(e,r,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=qy(i),t.memoizedState=Yy,e):V0(t,o));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return sF(e,t,o,r,l,n,i);if(s){s=r.fallback,o=t.mode,n=e.child,l=n.sibling;var h={mode:"hidden",children:r.children};return!(o&1)&&t.child!==n?(r=t.child,r.childLanes=0,r.pendingProps=h,t.deletions=null):(r=Ss(n,h),r.subtreeFlags=n.subtreeFlags&14680064),l!==null?s=Ss(l,s):(s=go(s,o,i,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?qy(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~i,t.memoizedState=Yy,r}return s=e.child,e=s.sibling,r=Ss(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=i),r.return=t,r.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=r,t.memoizedState=null,r}function V0(e,t){return t=zf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hc(e,t,i,r){return r!==null&&k0(r),Ha(t,e.child,null,i),e=V0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sF(e,t,i,r,n,s,o){if(i)return t.flags&256?(t.flags&=-257,r=xg(Error(q(422))),Hc(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,n=t.mode,r=zf({mode:"visible",children:r.children},n,0,null),s=go(s,n,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Ha(t,e.child,null,o),t.child.memoizedState=qy(o),t.memoizedState=Yy,s);if(!(t.mode&1))return Hc(e,t,o,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(q(419)),r=xg(s,r,void 0),Hc(e,t,o,r)}if(l=(o&e.childLanes)!==0,mi||l){if(r=Le,r!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Gn(e,n),Or(r,e,n,-1))}return Z0(),r=xg(Error(q(421))),Hc(e,t,o,r)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=vF.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,Ai=vs(n.nextSibling),Mi=t,te=!0,Er=null,e!==null&&(Ki[Zi++]=In,Ki[Zi++]=Rn,Ki[Zi++]=xo,In=e.id,Rn=e.overflow,xo=t),t=V0(t,r.children),t.flags|=4096,t)}function KS(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Gy(e.return,t,i)}function wg(e,t,i,r,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n)}function TP(e,t,i){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(ni(e,t,r.children,i),r=re.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&KS(e,i,t);else if(e.tag===19)KS(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gt(re,r),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;i!==null;)e=i.alternate,e!==null&&Kd(e)===null&&(n=i),i=i.sibling;i=n,i===null?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),wg(t,!1,n,i,s);break;case"backwards":for(i=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Kd(e)===null){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}wg(t,!0,i,null,s);break;case"together":wg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function dd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),So|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,i=Ss(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Ss(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function oF(e,t,i){switch(t.tag){case 3:bP(t),za();break;case 5:ZC(t);break;case 1:yi(t.type)&&jd(t);break;case 4:B0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Gt(Yd,r._currentValue),r._currentValue=n;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Gt(re,re.current&1),t.flags|=128,null):i&t.child.childLanes?EP(e,t,i):(Gt(re,re.current&1),e=Wn(e,t,i),e!==null?e.sibling:null);Gt(re,re.current&1);break;case 19:if(r=(i&t.childLanes)!==0,e.flags&128){if(r)return TP(e,t,i);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Gt(re,re.current),r)break;return null;case 22:case 23:return t.lanes=0,wP(e,t,i)}return Wn(e,t,i)}var CP,Qy,PP,AP;CP=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Qy=function(){};PP=function(e,t,i,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,ao(hn.current);var s=null;switch(i){case"input":n=vy(e,n),r=vy(e,r),s=[];break;case"select":n=ae({},n,{value:void 0}),r=ae({},r,{value:void 0}),s=[];break;case"textarea":n=wy(e,n),r=wy(e,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wd)}by(i,r);var o;i=null;for(c in n)if(!r.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var l=n[c];for(o in l)l.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Eu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var h=r[c];if(l=n!=null?n[c]:void 0,r.hasOwnProperty(c)&&h!==l&&(h!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in h)h.hasOwnProperty(o)&&l[o]!==h[o]&&(i||(i={}),i[o]=h[o])}else i||(s||(s=[]),s.push(c,i)),i=h;else c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,l=l?l.__html:void 0,h!=null&&l!==h&&(s=s||[]).push(c,h)):c==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(c,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(c)?(h!=null&&c==="onScroll"&&jt("scroll",e),s||l===h||(s=[])):(s=s||[]).push(c,h))}i&&(s=s||[]).push("style",i);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};AP=function(e,t,i,r){i!==r&&(t.flags|=4)};function Ll(e,t){if(!te)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function aF(e,t,i){var r=t.pendingProps;switch(M0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return yi(t.type)&&$d(),Qe(t),null;case 3:return r=t.stateNode,Ga(),Xt(gi),Xt(ti),z0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Uc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Er!==null&&(nv(Er),Er=null))),Qy(e,t),Qe(t),null;case 5:U0(t);var n=ao(Fu.current);if(i=t.type,e!==null&&t.stateNode!=null)PP(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(q(166));return Qe(t),null}if(e=ao(hn.current),Uc(t)){r=t.stateNode,i=t.type;var s=t.memoizedProps;switch(r[en]=t,r[Ou]=s,e=(t.mode&1)!==0,i){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(n=0;n<Yl.length;n++)jt(Yl[n],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":oS(r,s),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jt("invalid",r);break;case"textarea":lS(r,s),jt("invalid",r)}by(i,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Bc(r.textContent,l,e),n=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Bc(r.textContent,l,e),n=["children",""+l]):Eu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&jt("scroll",r)}switch(i){case"input":Rc(r),aS(r,s,!0);break;case"textarea":Rc(r),uS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Wd)}r=n,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eC(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(i,{is:r.is}):(e=o.createElement(i),i==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,i),e[en]=t,e[Ou]=r,CP(e,t,!1,!1),t.stateNode=e;t:{switch(o=Ey(i,r),i){case"dialog":jt("cancel",e),jt("close",e),n=r;break;case"iframe":case"object":case"embed":jt("load",e),n=r;break;case"video":case"audio":for(n=0;n<Yl.length;n++)jt(Yl[n],e);n=r;break;case"source":jt("error",e),n=r;break;case"img":case"image":case"link":jt("error",e),jt("load",e),n=r;break;case"details":jt("toggle",e),n=r;break;case"input":oS(e,r),n=vy(e,r),jt("invalid",e);break;case"option":n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=ae({},r,{value:void 0}),jt("invalid",e);break;case"textarea":lS(e,r),n=wy(e,r),jt("invalid",e);break;default:n=r}by(i,n),l=n;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];s==="style"?nC(e,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&iC(e,h)):s==="children"?typeof h=="string"?(i!=="textarea"||h!=="")&&Tu(e,h):typeof h=="number"&&Tu(e,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eu.hasOwnProperty(s)?h!=null&&s==="onScroll"&&jt("scroll",e):h!=null&&g0(e,s,h,o))}switch(i){case"input":Rc(e),aS(e,r,!1);break;case"textarea":Rc(e),uS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cs(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ea(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ea(e,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Wd)}switch(i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)AP(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(q(166));if(i=ao(Fu.current),ao(hn.current),Uc(t)){if(r=t.stateNode,i=t.memoizedProps,r[en]=t,(s=r.nodeValue!==i)&&(e=Mi,e!==null))switch(e.tag){case 3:Bc(r.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bc(r.nodeValue,i,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(i.nodeType===9?i:i.ownerDocument).createTextNode(r),r[en]=t,t.stateNode=r}return Qe(t),null;case 13:if(Xt(re),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(te&&Ai!==null&&t.mode&1&&!(t.flags&128))jC(),za(),t.flags|=98560,s=!1;else if(s=Uc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[en]=t}else za(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qe(t),s=!1}else Er!==null&&(nv(Er),Er=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||re.current&1?be===0&&(be=3):Z0())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return Ga(),Qy(e,t),e===null&&ku(t.stateNode.containerInfo),Qe(t),null;case 10:return N0(t.type._context),Qe(t),null;case 17:return yi(t.type)&&$d(),Qe(t),null;case 19:if(Xt(re),s=t.memoizedState,s===null)return Qe(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Ll(s,!1);else{if(be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Kd(e),o!==null){for(t.flags|=128,Ll(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=i,i=t.child;i!==null;)s=i,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return Gt(re,re.current&1|2),t.child}e=e.sibling}s.tail!==null&&ge()>$a&&(t.flags|=128,r=!0,Ll(s,!1),t.lanes=4194304)}else{if(!r)if(e=Kd(o),e!==null){if(t.flags|=128,r=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),Ll(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!te)return Qe(t),null}else 2*ge()-s.renderingStartTime>$a&&i!==1073741824&&(t.flags|=128,r=!0,Ll(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(i=s.last,i!==null?i.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ge(),t.sibling=null,i=re.current,Gt(re,r?i&1|2:i&1),t):(Qe(t),null);case 22:case 23:return K0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ci&1073741824&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function lF(e,t){switch(M0(t),t.tag){case 1:return yi(t.type)&&$d(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ga(),Xt(gi),Xt(ti),z0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return U0(t),null;case 13:if(Xt(re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));za()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xt(re),null;case 4:return Ga(),null;case 10:return N0(t.type._context),null;case 22:case 23:return K0(),null;case 24:return null;default:return null}}var Gc=!1,Ze=!1,uF=typeof WeakSet=="function"?WeakSet:Set,at=null;function _a(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(r){he(e,t,r)}else i.current=null}function Ky(e,t,i){try{i()}catch(r){he(e,t,r)}}var ZS=!1;function hF(e,t){if(Oy=zd,e=kC(),I0(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else t:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break t}var o=0,l=-1,h=-1,c=0,f=0,m=e,p=null;e:for(;;){for(var v;m!==i||n!==0&&m.nodeType!==3||(l=o+n),m!==s||r!==0&&m.nodeType!==3||(h=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===e)break e;if(p===i&&++c===n&&(l=o),p===s&&++f===r&&(h=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}i=l===-1||h===-1?null:{start:l,end:h}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ny={focusedElem:e,selectionRange:i},zd=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){t=at;try{var _=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,T=_.memoizedState,b=t.stateNode,S=b.getSnapshotBeforeUpdate(t.elementType===t.type?E:wr(t.type,E),T);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(P){he(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}return _=ZS,ZS=!1,_}function uu(e,t,i){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&Ky(t,i,s)}n=n.next}while(n!==r)}}function Bf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var r=i.create;i.destroy=r()}i=i.next}while(i!==t)}}function Zy(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function IP(e){var t=e.alternate;t!==null&&(e.alternate=null,IP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[en],delete t[Ou],delete t[By],delete t[VN],delete t[XN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function RP(e){return e.tag===5||e.tag===3||e.tag===4}function JS(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||RP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jy(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Wd));else if(r!==4&&(e=e.child,e!==null))for(Jy(e,t,i),e=e.sibling;e!==null;)Jy(e,t,i),e=e.sibling}function tv(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(tv(e,t,i),e=e.sibling;e!==null;)tv(e,t,i),e=e.sibling}var He=null,Sr=!1;function is(e,t,i){for(i=i.child;i!==null;)MP(e,t,i),i=i.sibling}function MP(e,t,i){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Rf,i)}catch{}switch(i.tag){case 5:Ze||_a(i,t);case 6:var r=He,n=Sr;He=null,is(e,t,i),He=r,Sr=n,He!==null&&(Sr?(e=He,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):He.removeChild(i.stateNode));break;case 18:He!==null&&(Sr?(e=He,i=i.stateNode,e.nodeType===8?pg(e.parentNode,i):e.nodeType===1&&pg(e,i),Iu(e)):pg(He,i.stateNode));break;case 4:r=He,n=Sr,He=i.stateNode.containerInfo,Sr=!0,is(e,t,i),He=r,Sr=n;break;case 0:case 11:case 14:case 15:if(!Ze&&(r=i.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ky(i,t,o),n=n.next}while(n!==r)}is(e,t,i);break;case 1:if(!Ze&&(_a(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=i.memoizedProps,r.state=i.memoizedState,r.componentWillUnmount()}catch(l){he(i,t,l)}is(e,t,i);break;case 21:is(e,t,i);break;case 22:i.mode&1?(Ze=(r=Ze)||i.memoizedState!==null,is(e,t,i),Ze=r):is(e,t,i);break;default:is(e,t,i)}}function tb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new uF),t.forEach(function(r){var n=_F.bind(null,e,r);i.has(r)||(i.add(r),r.then(n,n))})}}function yr(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var n=i[r];try{var s=e,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Sr=!1;break t;case 3:He=l.stateNode.containerInfo,Sr=!0;break t;case 4:He=l.stateNode.containerInfo,Sr=!0;break t}l=l.return}if(He===null)throw Error(q(160));MP(s,o,n),He=null,Sr=!1;var h=n.alternate;h!==null&&(h.return=null),n.return=null}catch(c){he(n,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kP(t,e),t=t.sibling}function kP(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yr(t,e),Kr(e),r&4){try{uu(3,e,e.return),Bf(3,e)}catch(E){he(e,e.return,E)}try{uu(5,e,e.return)}catch(E){he(e,e.return,E)}}break;case 1:yr(t,e),Kr(e),r&512&&i!==null&&_a(i,i.return);break;case 5:if(yr(t,e),Kr(e),r&512&&i!==null&&_a(i,i.return),e.flags&32){var n=e.stateNode;try{Tu(n,"")}catch(E){he(e,e.return,E)}}if(r&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,o=i!==null?i.memoizedProps:s,l=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&JT(n,s),Ey(l,o);var c=Ey(l,s);for(o=0;o<h.length;o+=2){var f=h[o],m=h[o+1];f==="style"?nC(n,m):f==="dangerouslySetInnerHTML"?iC(n,m):f==="children"?Tu(n,m):g0(n,f,m,c)}switch(l){case"input":_y(n,s);break;case"textarea":tC(n,s);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Ea(n,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ea(n,!!s.multiple,s.defaultValue,!0):Ea(n,!!s.multiple,s.multiple?[]:"",!1))}n[Ou]=s}catch(E){he(e,e.return,E)}}break;case 6:if(yr(t,e),Kr(e),r&4){if(e.stateNode===null)throw Error(q(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(E){he(e,e.return,E)}}break;case 3:if(yr(t,e),Kr(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Iu(t.containerInfo)}catch(E){he(e,e.return,E)}break;case 4:yr(t,e),Kr(e);break;case 13:yr(t,e),Kr(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(q0=ge())),r&4&&tb(e);break;case 22:if(f=i!==null&&i.memoizedState!==null,e.mode&1?(Ze=(c=Ze)||f,yr(t,e),Ze=c):yr(t,e),Kr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(at=e,f=e.child;f!==null;){for(m=at=f;at!==null;){switch(p=at,v=p.child,p.tag){case 0:case 11:case 14:case 15:uu(4,p,p.return);break;case 1:_a(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,i=p.return;try{t=r,_.props=t.memoizedProps,_.state=t.memoizedState,_.componentWillUnmount()}catch(E){he(r,i,E)}}break;case 5:_a(p,p.return);break;case 22:if(p.memoizedState!==null){ib(m);continue}}v!==null?(v.return=p,at=v):ib(m)}f=f.sibling}t:for(f=null,m=e;;){if(m.tag===5){if(f===null){f=m;try{n=m.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,h=m.memoizedProps.style,o=h!=null&&h.hasOwnProperty("display")?h.display:null,l.style.display=rC("display",o))}catch(E){he(e,e.return,E)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(E){he(e,e.return,E)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break t;for(;m.sibling===null;){if(m.return===null||m.return===e)break t;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:yr(t,e),Kr(e),r&4&&tb(e);break;case 21:break;default:yr(t,e),Kr(e)}}function Kr(e){var t=e.flags;if(t&2){try{t:{for(var i=e.return;i!==null;){if(RP(i)){var r=i;break t}i=i.return}throw Error(q(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(Tu(n,""),r.flags&=-33);var s=JS(e);tv(e,s,n);break;case 3:case 4:var o=r.stateNode.containerInfo,l=JS(e);Jy(e,l,o);break;default:throw Error(q(161))}}catch(h){he(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cF(e,t,i){at=e,DP(e)}function DP(e,t,i){for(var r=(e.mode&1)!==0;at!==null;){var n=at,s=n.child;if(n.tag===22&&r){var o=n.memoizedState!==null||Gc;if(!o){var l=n.alternate,h=l!==null&&l.memoizedState!==null||Ze;l=Gc;var c=Ze;if(Gc=o,(Ze=h)&&!c)for(at=n;at!==null;)o=at,h=o.child,o.tag===22&&o.memoizedState!==null?rb(n):h!==null?(h.return=o,at=h):rb(n);for(;s!==null;)at=s,DP(s),s=s.sibling;at=n,Gc=l,Ze=c}eb(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,at=s):eb(e)}}function eb(e){for(;at!==null;){var t=at;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ze||Bf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ze)if(i===null)r.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:wr(t.type,i.memoizedProps);r.componentDidUpdate(n,i.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&BS(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}BS(t,o,i)}break;case 5:var l=t.stateNode;if(i===null&&t.flags&4){i=l;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&i.focus();break;case"img":h.src&&(i.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Iu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ze||t.flags&512&&Zy(t)}catch(p){he(t,t.return,p)}}if(t===e){at=null;break}if(i=t.sibling,i!==null){i.return=t.return,at=i;break}at=t.return}}function ib(e){for(;at!==null;){var t=at;if(t===e){at=null;break}var i=t.sibling;if(i!==null){i.return=t.return,at=i;break}at=t.return}}function rb(e){for(;at!==null;){var t=at;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Bf(4,t)}catch(h){he(t,i,h)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var n=t.return;try{r.componentDidMount()}catch(h){he(t,n,h)}}var s=t.return;try{Zy(t)}catch(h){he(t,s,h)}break;case 5:var o=t.return;try{Zy(t)}catch(h){he(t,o,h)}}}catch(h){he(t,t.return,h)}if(t===e){at=null;break}var l=t.sibling;if(l!==null){l.return=t.return,at=l;break}at=t.return}}var dF=Math.ceil,tf=$n.ReactCurrentDispatcher,X0=$n.ReactCurrentOwner,nr=$n.ReactCurrentBatchConfig,Rt=0,Le=null,xe=null,We=0,Ci=0,xa=Os(0),be=0,zu=null,So=0,Uf=0,Y0=0,hu=null,pi=null,q0=0,$a=1/0,En=null,ef=!1,ev=null,xs=null,Wc=!1,ds=null,rf=0,cu=0,iv=null,fd=-1,pd=0;function oi(){return Rt&6?ge():fd!==-1?fd:fd=ge()}function ws(e){return e.mode&1?Rt&2&&We!==0?We&-We:qN.transition!==null?(pd===0&&(pd=gC()),pd):(e=Ut,e!==0||(e=window.event,e=e===void 0?16:bC(e.type)),e):1}function Or(e,t,i,r){if(50<cu)throw cu=0,iv=null,Error(q(185));hh(e,i,r),(!(Rt&2)||e!==Le)&&(e===Le&&(!(Rt&2)&&(Uf|=i),be===4&&as(e,We)),vi(e,r),i===1&&Rt===0&&!(t.mode&1)&&($a=ge()+500,Nf&&Ns()))}function vi(e,t){var i=e.callbackNode;qO(e,t);var r=Ud(e,e===Le?We:0);if(r===0)i!==null&&dS(i),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(i!=null&&dS(i),t===1)e.tag===0?YN(nb.bind(null,e)):GC(nb.bind(null,e)),$N(function(){!(Rt&6)&&Ns()}),i=null;else{switch(yC(r)){case 1:i=w0;break;case 4:i=pC;break;case 16:i=Bd;break;case 536870912:i=mC;break;default:i=Bd}i=HP(i,OP.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function OP(e,t){if(fd=-1,pd=0,Rt&6)throw Error(q(327));var i=e.callbackNode;if(Ia()&&e.callbackNode!==i)return null;var r=Ud(e,e===Le?We:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=nf(e,r);else{t=r;var n=Rt;Rt|=2;var s=FP();(Le!==e||We!==t)&&(En=null,$a=ge()+500,mo(e,t));do try{mF();break}catch(l){NP(e,l)}while(1);O0(),tf.current=s,Rt=n,xe!==null?t=0:(Le=null,We=0,t=be)}if(t!==0){if(t===2&&(n=Iy(e),n!==0&&(r=n,t=rv(e,n))),t===1)throw i=zu,mo(e,0),as(e,r),vi(e,ge()),i;if(t===6)as(e,r);else{if(n=e.current.alternate,!(r&30)&&!fF(n)&&(t=nf(e,r),t===2&&(s=Iy(e),s!==0&&(r=s,t=rv(e,s))),t===1))throw i=zu,mo(e,0),as(e,r),vi(e,ge()),i;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(q(345));case 2:eo(e,pi,En);break;case 3:if(as(e,r),(r&130023424)===r&&(t=q0+500-ge(),10<t)){if(Ud(e,0)!==0)break;if(n=e.suspendedLanes,(n&r)!==r){oi(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Ly(eo.bind(null,e,pi,En),t);break}eo(e,pi,En);break;case 4:if(as(e,r),(r&4194240)===r)break;for(t=e.eventTimes,n=-1;0<r;){var o=31-Dr(r);s=1<<o,o=t[o],o>n&&(n=o),r&=~s}if(r=n,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*dF(r/1960))-r,10<r){e.timeoutHandle=Ly(eo.bind(null,e,pi,En),r);break}eo(e,pi,En);break;case 5:eo(e,pi,En);break;default:throw Error(q(329))}}}return vi(e,ge()),e.callbackNode===i?OP.bind(null,e):null}function rv(e,t){var i=hu;return e.current.memoizedState.isDehydrated&&(mo(e,t).flags|=256),e=nf(e,t),e!==2&&(t=pi,pi=i,t!==null&&nv(t)),e}function nv(e){pi===null?pi=e:pi.push.apply(pi,e)}function fF(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var r=0;r<i.length;r++){var n=i[r],s=n.getSnapshot;n=n.value;try{if(!Fr(s(),n))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function as(e,t){for(t&=~Y0,t&=~Uf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Dr(t),r=1<<i;e[i]=-1,t&=~r}}function nb(e){if(Rt&6)throw Error(q(327));Ia();var t=Ud(e,0);if(!(t&1))return vi(e,ge()),null;var i=nf(e,t);if(e.tag!==0&&i===2){var r=Iy(e);r!==0&&(t=r,i=rv(e,r))}if(i===1)throw i=zu,mo(e,0),as(e,t),vi(e,ge()),i;if(i===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,eo(e,pi,En),vi(e,ge()),null}function Q0(e,t){var i=Rt;Rt|=1;try{return e(t)}finally{Rt=i,Rt===0&&($a=ge()+500,Nf&&Ns())}}function bo(e){ds!==null&&ds.tag===0&&!(Rt&6)&&Ia();var t=Rt;Rt|=1;var i=nr.transition,r=Ut;try{if(nr.transition=null,Ut=1,e)return e()}finally{Ut=r,nr.transition=i,Rt=t,!(Rt&6)&&Ns()}}function K0(){Ci=xa.current,Xt(xa)}function mo(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,WN(i)),xe!==null)for(i=xe.return;i!==null;){var r=i;switch(M0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$d();break;case 3:Ga(),Xt(gi),Xt(ti),z0();break;case 5:U0(r);break;case 4:Ga();break;case 13:Xt(re);break;case 19:Xt(re);break;case 10:N0(r.type._context);break;case 22:case 23:K0()}i=i.return}if(Le=e,xe=e=Ss(e.current,null),We=Ci=t,be=0,zu=null,Y0=Uf=So=0,pi=hu=null,oo!==null){for(t=0;t<oo.length;t++)if(i=oo[t],r=i.interleaved,r!==null){i.interleaved=null;var n=r.next,s=i.pending;if(s!==null){var o=s.next;s.next=n,r.next=o}i.pending=r}oo=null}return e}function NP(e,t){do{var i=xe;try{if(O0(),hd.current=Jd,Zd){for(var r=oe.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Zd=!1}if(wo=0,De=Se=oe=null,lu=!1,Lu=0,X0.current=null,i===null||i.return===null){be=1,zu=t,xe=null;break}t:{var s=e,o=i.return,l=i,h=t;if(t=We,l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var c=h,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=jS(o);if(v!==null){v.flags&=-257,VS(v,o,l,s,t),v.mode&1&&$S(s,c,t),t=v,h=c;var _=t.updateQueue;if(_===null){var E=new Set;E.add(h),t.updateQueue=E}else _.add(h);break t}else{if(!(t&1)){$S(s,c,t),Z0();break t}h=Error(q(426))}}else if(te&&l.mode&1){var T=jS(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),VS(T,o,l,s,t),k0(Wa(h,l));break t}}s=h=Wa(h,l),be!==4&&(be=2),hu===null?hu=[s]:hu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var b=vP(s,h,t);LS(s,b);break t;case 1:l=h;var S=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(xs===null||!xs.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var P=_P(s,l,t);LS(s,P);break t}}s=s.return}while(s!==null)}BP(i)}catch(I){t=I,xe===i&&i!==null&&(xe=i=i.return);continue}break}while(1)}function FP(){var e=tf.current;return tf.current=Jd,e===null?Jd:e}function Z0(){(be===0||be===3||be===2)&&(be=4),Le===null||!(So&268435455)&&!(Uf&268435455)||as(Le,We)}function nf(e,t){var i=Rt;Rt|=2;var r=FP();(Le!==e||We!==t)&&(En=null,mo(e,t));do try{pF();break}catch(n){NP(e,n)}while(1);if(O0(),Rt=i,tf.current=r,xe!==null)throw Error(q(261));return Le=null,We=0,be}function pF(){for(;xe!==null;)LP(xe)}function mF(){for(;xe!==null&&!zO();)LP(xe)}function LP(e){var t=zP(e.alternate,e,Ci);e.memoizedProps=e.pendingProps,t===null?BP(e):xe=t,X0.current=null}function BP(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=lF(i,t),i!==null){i.flags&=32767,xe=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{be=6,xe=null;return}}else if(i=aF(i,t,Ci),i!==null){xe=i;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);be===0&&(be=5)}function eo(e,t,i){var r=Ut,n=nr.transition;try{nr.transition=null,Ut=1,gF(e,t,i,r)}finally{nr.transition=n,Ut=r}return null}function gF(e,t,i,r){do Ia();while(ds!==null);if(Rt&6)throw Error(q(327));i=e.finishedWork;var n=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(QO(e,s),e===Le&&(xe=Le=null,We=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Wc||(Wc=!0,HP(Bd,function(){return Ia(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=nr.transition,nr.transition=null;var o=Ut;Ut=1;var l=Rt;Rt|=4,X0.current=null,hF(e,i),kP(i,e),FN(Ny),zd=!!Oy,Ny=Oy=null,e.current=i,cF(i),HO(),Rt=l,Ut=o,nr.transition=s}else e.current=i;if(Wc&&(Wc=!1,ds=e,rf=n),s=e.pendingLanes,s===0&&(xs=null),$O(i.stateNode),vi(e,ge()),t!==null)for(r=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],r(n.value,{componentStack:n.stack,digest:n.digest});if(ef)throw ef=!1,e=ev,ev=null,e;return rf&1&&e.tag!==0&&Ia(),s=e.pendingLanes,s&1?e===iv?cu++:(cu=0,iv=e):cu=0,Ns(),null}function Ia(){if(ds!==null){var e=yC(rf),t=nr.transition,i=Ut;try{if(nr.transition=null,Ut=16>e?16:e,ds===null)var r=!1;else{if(e=ds,ds=null,rf=0,Rt&6)throw Error(q(331));var n=Rt;for(Rt|=4,at=e.current;at!==null;){var s=at,o=s.child;if(at.flags&16){var l=s.deletions;if(l!==null){for(var h=0;h<l.length;h++){var c=l[h];for(at=c;at!==null;){var f=at;switch(f.tag){case 0:case 11:case 15:uu(8,f,s)}var m=f.child;if(m!==null)m.return=f,at=m;else for(;at!==null;){f=at;var p=f.sibling,v=f.return;if(IP(f),f===c){at=null;break}if(p!==null){p.return=v,at=p;break}at=v}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}at=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,at=o;else t:for(;at!==null;){if(s=at,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uu(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,at=b;break t}at=s.return}}var S=e.current;for(at=S;at!==null;){o=at;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,at=w;else t:for(o=S;at!==null;){if(l=at,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Bf(9,l)}}catch(I){he(l,l.return,I)}if(l===o){at=null;break t}var P=l.sibling;if(P!==null){P.return=l.return,at=P;break t}at=l.return}}if(Rt=n,Ns(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Rf,e)}catch{}r=!0}return r}finally{Ut=i,nr.transition=t}}return!1}function sb(e,t,i){t=Wa(i,t),t=vP(e,t,1),e=_s(e,t,1),t=oi(),e!==null&&(hh(e,1,t),vi(e,t))}function he(e,t,i){if(e.tag===3)sb(e,e,i);else for(;t!==null;){if(t.tag===3){sb(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xs===null||!xs.has(r))){e=Wa(i,e),e=_P(t,e,1),t=_s(t,e,1),e=oi(),t!==null&&(hh(t,1,e),vi(t,e));break}}t=t.return}}function yF(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),t=oi(),e.pingedLanes|=e.suspendedLanes&i,Le===e&&(We&i)===i&&(be===4||be===3&&(We&130023424)===We&&500>ge()-q0?mo(e,0):Y0|=i),vi(e,t)}function UP(e,t){t===0&&(e.mode&1?(t=Dc,Dc<<=1,!(Dc&130023424)&&(Dc=4194304)):t=1);var i=oi();e=Gn(e,t),e!==null&&(hh(e,t,i),vi(e,i))}function vF(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),UP(e,i)}function _F(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;n!==null&&(i=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(t),UP(e,i)}var zP;zP=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||gi.current)mi=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return mi=!1,oF(e,t,i);mi=!!(e.flags&131072)}else mi=!1,te&&t.flags&1048576&&WC(t,Xd,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;dd(e,t),e=t.pendingProps;var n=Ua(t,ti.current);Aa(t,i),n=G0(null,t,r,e,n,i);var s=W0();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)?(s=!0,jd(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,L0(t),n.updater=Ff,t.stateNode=n,n._reactInternals=t,$y(t,r,e,i),t=Xy(null,t,r,!0,s,i)):(t.tag=0,te&&s&&R0(t),ni(null,t,n,i),t=t.child),t;case 16:r=t.elementType;t:{switch(dd(e,t),e=t.pendingProps,n=r._init,r=n(r._payload),t.type=r,n=t.tag=wF(r),e=wr(r,e),n){case 0:t=Vy(null,t,r,e,i);break t;case 1:t=qS(null,t,r,e,i);break t;case 11:t=XS(null,t,r,e,i);break t;case 14:t=YS(null,t,r,wr(r.type,e),i);break t}throw Error(q(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:wr(r,n),Vy(e,t,r,n,i);case 1:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:wr(r,n),qS(e,t,r,n,i);case 3:t:{if(bP(t),e===null)throw Error(q(387));r=t.pendingProps,s=t.memoizedState,n=s.element,XC(e,t),Qd(t,r,null,i);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Wa(Error(q(423)),t),t=QS(e,t,r,i,n);break t}else if(r!==n){n=Wa(Error(q(424)),t),t=QS(e,t,r,i,n);break t}else for(Ai=vs(t.stateNode.containerInfo.firstChild),Mi=t,te=!0,Er=null,i=KC(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(za(),r===n){t=Wn(e,t,i);break t}ni(e,t,r,i)}t=t.child}return t;case 5:return ZC(t),e===null&&Hy(t),r=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,o=n.children,Fy(r,n)?o=null:s!==null&&Fy(r,s)&&(t.flags|=32),SP(e,t),ni(e,t,o,i),t.child;case 6:return e===null&&Hy(t),null;case 13:return EP(e,t,i);case 4:return B0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ha(t,null,r,i):ni(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:wr(r,n),XS(e,t,r,n,i);case 7:return ni(e,t,t.pendingProps,i),t.child;case 8:return ni(e,t,t.pendingProps.children,i),t.child;case 12:return ni(e,t,t.pendingProps.children,i),t.child;case 10:t:{if(r=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,Gt(Yd,r._currentValue),r._currentValue=o,s!==null)if(Fr(s.value,o)){if(s.children===n.children&&!gi.current){t=Wn(e,t,i);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var h=l.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=Dn(-1,i&-i),h.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?h.next=h:(h.next=f.next,f.next=h),c.pending=h}}s.lanes|=i,h=s.alternate,h!==null&&(h.lanes|=i),Gy(s.return,i,t),l.lanes|=i;break}h=h.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=i,l=o.alternate,l!==null&&(l.lanes|=i),Gy(o,i,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ni(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,Aa(t,i),n=sr(n),r=r(n),t.flags|=1,ni(e,t,r,i),t.child;case 14:return r=t.type,n=wr(r,t.pendingProps),n=wr(r.type,n),YS(e,t,r,n,i);case 15:return xP(e,t,t.type,t.pendingProps,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:wr(r,n),dd(e,t),t.tag=1,yi(r)?(e=!0,jd(t)):e=!1,Aa(t,i),qC(t,r,n),$y(t,r,n,i),Xy(null,t,r,!0,e,i);case 19:return TP(e,t,i);case 22:return wP(e,t,i)}throw Error(q(156,t.tag))};function HP(e,t){return fC(e,t)}function xF(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,i,r){return new xF(e,t,i,r)}function J0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wF(e){if(typeof e=="function")return J0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===v0)return 11;if(e===_0)return 14}return 2}function Ss(e,t){var i=e.alternate;return i===null?(i=ir(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function md(e,t,i,r,n,s){var o=2;if(r=e,typeof e=="function")J0(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case ha:return go(i.children,n,s,t);case y0:o=8,n|=8;break;case py:return e=ir(12,i,t,n|2),e.elementType=py,e.lanes=s,e;case my:return e=ir(13,i,t,n),e.elementType=my,e.lanes=s,e;case gy:return e=ir(19,i,t,n),e.elementType=gy,e.lanes=s,e;case QT:return zf(i,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case YT:o=10;break t;case qT:o=9;break t;case v0:o=11;break t;case _0:o=14;break t;case ns:o=16,r=null;break t}throw Error(q(130,e==null?e:typeof e,""))}return t=ir(o,i,t,n),t.elementType=e,t.type=r,t.lanes=s,t}function go(e,t,i,r){return e=ir(7,e,r,t),e.lanes=i,e}function zf(e,t,i,r){return e=ir(22,e,r,t),e.elementType=QT,e.lanes=i,e.stateNode={isHidden:!1},e}function Sg(e,t,i){return e=ir(6,e,null,t),e.lanes=i,e}function bg(e,t,i){return t=ir(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SF(e,t,i,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rg(0),this.expirationTimes=rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rg(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function t_(e,t,i,r,n,s,o,l,h){return e=new SF(e,t,i,l,h),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ir(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},L0(s),e}function bF(e,t,i){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:r==null?null:""+r,children:e,containerInfo:t,implementation:i}}function GP(e){if(!e)return Ps;e=e._reactInternals;t:{if(Io(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(yi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var i=e.type;if(yi(i))return HC(e,i,t)}return t}function WP(e,t,i,r,n,s,o,l,h){return e=t_(i,r,!0,e,n,s,o,l,h),e.context=GP(null),i=e.current,r=oi(),n=ws(i),s=Dn(r,n),s.callback=t??null,_s(i,s,n),e.current.lanes=n,hh(e,n,r),vi(e,r),e}function Hf(e,t,i,r){var n=t.current,s=oi(),o=ws(n);return i=GP(i),t.context===null?t.context=i:t.pendingContext=i,t=Dn(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_s(n,t,o),e!==null&&(Or(e,n,o,s),ud(e,n,o)),o}function sf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ob(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function e_(e,t){ob(e,t),(e=e.alternate)&&ob(e,t)}function EF(){return null}var $P=typeof reportError=="function"?reportError:function(e){console.error(e)};function i_(e){this._internalRoot=e}Gf.prototype.render=i_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));Hf(e,t,null,null)};Gf.prototype.unmount=i_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bo(function(){Hf(null,e,null,null)}),t[Hn]=null}};function Gf(e){this._internalRoot=e}Gf.prototype.unstable_scheduleHydration=function(e){if(e){var t=xC();e={blockedOn:null,target:e,priority:t};for(var i=0;i<os.length&&t!==0&&t<os[i].priority;i++);os.splice(i,0,e),i===0&&SC(e)}};function r_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ab(){}function TF(e,t,i,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var c=sf(o);s.call(c)}}var o=WP(t,r,e,0,null,!1,!1,"",ab);return e._reactRootContainer=o,e[Hn]=o.current,ku(e.nodeType===8?e.parentNode:e),bo(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof r=="function"){var l=r;r=function(){var c=sf(h);l.call(c)}}var h=t_(e,0,!1,null,null,!1,!1,"",ab);return e._reactRootContainer=h,e[Hn]=h.current,ku(e.nodeType===8?e.parentNode:e),bo(function(){Hf(t,h,i,r)}),h}function $f(e,t,i,r,n){var s=i._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var l=n;n=function(){var h=sf(o);l.call(h)}}Hf(t,o,e,n)}else o=TF(i,t,e,n,r);return sf(o)}vC=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Xl(t.pendingLanes);i!==0&&(S0(t,i|1),vi(t,ge()),!(Rt&6)&&($a=ge()+500,Ns()))}break;case 13:bo(function(){var r=Gn(e,1);if(r!==null){var n=oi();Or(r,e,1,n)}}),e_(e,1)}};b0=function(e){if(e.tag===13){var t=Gn(e,134217728);if(t!==null){var i=oi();Or(t,e,134217728,i)}e_(e,134217728)}};_C=function(e){if(e.tag===13){var t=ws(e),i=Gn(e,t);if(i!==null){var r=oi();Or(i,e,t,r)}e_(e,t)}};xC=function(){return Ut};wC=function(e,t){var i=Ut;try{return Ut=e,t()}finally{Ut=i}};Cy=function(e,t,i){switch(t){case"input":if(_y(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=Of(r);if(!n)throw Error(q(90));ZT(r),_y(r,n)}}}break;case"textarea":tC(e,i);break;case"select":t=i.value,t!=null&&Ea(e,!!i.multiple,t,!1)}};aC=Q0;lC=bo;var CF={usingClientEntryPoint:!1,Events:[dh,pa,Of,sC,oC,Q0]},Bl={findFiberByHostInstance:so,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},PF={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cC(e),e===null?null:e.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||EF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Rf=$c.inject(PF),un=$c}catch{}}Ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CF;Ni.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!r_(t))throw Error(q(200));return bF(e,t,null,i)};Ni.createRoot=function(e,t){if(!r_(e))throw Error(q(299));var i=!1,r="",n=$P;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=t_(e,1,!1,null,null,i,!1,r,n),e[Hn]=t.current,ku(e.nodeType===8?e.parentNode:e),new i_(t)};Ni.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=cC(t),e=e===null?null:e.stateNode,e};Ni.flushSync=function(e){return bo(e)};Ni.hydrate=function(e,t,i){if(!Wf(t))throw Error(q(200));return $f(null,e,t,!0,i)};Ni.hydrateRoot=function(e,t,i){if(!r_(e))throw Error(q(405));var r=i!=null&&i.hydratedSources||null,n=!1,s="",o=$P;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),t=WP(t,null,e,1,i??null,n,!1,s,o),e[Hn]=t.current,ku(e),r)for(e=0;e<r.length;e++)i=r[e],n=i._getVersion,n=n(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new Gf(t)};Ni.render=function(e,t,i){if(!Wf(t))throw Error(q(200));return $f(null,e,t,!1,i)};Ni.unmountComponentAtNode=function(e){if(!Wf(e))throw Error(q(40));return e._reactRootContainer?(bo(function(){$f(null,null,e,!1,function(){e._reactRootContainer=null,e[Hn]=null})}),!0):!1};Ni.unstable_batchedUpdates=Q0;Ni.unstable_renderSubtreeIntoContainer=function(e,t,i,r){if(!Wf(i))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return $f(e,t,i,!1,r)};Ni.version="18.2.0-next-9e3b772b8-20220608";function jP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jP)}catch(e){console.error(e)}}jP(),WT.exports=Ni;var AF=WT.exports,VP,lb=AF;VP=lb.createRoot,lb.hydrateRoot;const XP=new Yt;qt.prototype._cacheAsBitmap=!1;qt.prototype._cacheData=null;qt.prototype._cacheAsBitmapResolution=null;qt.prototype._cacheAsBitmapMultisample=null;class IF{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(qt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new IF),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});qt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};qt.prototype._initCachedDisplayObject=function(t){var p,v;if((p=this._cacheData)!=null&&p.sprite)return;const i=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(null,!0).clone();if((v=this.filters)!=null&&v.length){const _=this.filters[0].padding;r.pad(_)}r.ceil(nt.RESOLUTION);const n=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,h=Rs.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${Es()}`;this._cacheData.textureCacheId=c,_t.addToCache(h.baseTexture,c),tt.addToCache(h,c);const f=this.transform.localTransform.copyTo(XP).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(n,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const m=new lr(h);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(r.x/r.width),m.anchor.y=-(r.y/r.height),m.alpha=i,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)};qt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};qt.prototype._initCachedDisplayObjectCanvas=function(t){var f;if((f=this._cacheData)!=null&&f.sprite)return;const i=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,s=t._projTransform;i.ceil(nt.RESOLUTION);const o=Rs.create({width:i.width,height:i.height}),l=`cacheAsBitmap_${Es()}`;this._cacheData.textureCacheId=l,_t.addToCache(o.baseTexture,l),tt.addToCache(o,l);const h=XP;this.transform.localTransform.copyTo(h),h.invert(),h.tx-=i.x,h.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new lr(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(i.x/i.width),c.anchor.y=-(i.y/i.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};qt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};qt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};qt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_t.removeFromCache(this._cacheData.textureCacheId),tt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};qt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};qt.prototype.name=null;Ee.prototype.getChildByName=function(t,i){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(i)for(let r=0,n=this.children.length;r<n;r++){const s=this.children[r];if(!s.getChildByName)continue;const o=s.getChildByName(t,!0);if(o)return o}return null};qt.prototype.getGlobalPosition=function(t=new ct,i=!1){return this.parent?this.parent.toGlobal(this.position,t,i):(t.x=this.position.x,t.y=this.position.y),t};var RF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class YP extends Fe{constructor(t=1){super(VE,RF,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const MF={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},kF=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function DF(e){const t=MF[e],i=t.length;let r=kF,n="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let l=0;l<e;l++){let h=s.replace("%index%",l.toString());o=l,l>=i&&(o=e-l-1),h=h.replace("%value%",t[o].toString()),n+=h,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",e.toString()),r}const OF=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function NF(e,t){const i=Math.ceil(e/2);let r=OF,n="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let l=s.replace("%index%",o.toString());l=l.replace("%sampleIndex%",`${o-(i-1)}.0`),n+=l,n+=`
`}return r=r.replace("%blur%",n),r=r.replace("%size%",e.toString()),r}class of extends Fe{constructor(t,i=8,r=4,n=Fe.defaultResolution,s=5){const o=NF(s,t),l=DF(s);super(o,l),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=r,this.blur=i}apply(t,i,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/i.width):this.uniforms.strength=1/r.height*(r.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,r,n);else{const s=t.getFilterTexture(),o=t.renderer;let l=i,h=s;this.state.blend=!1,t.applyFilter(this,l,h,br.CLEAR);for(let c=1;c<this.passes-1;c++){t.bindAndClear(l,br.BLIT),this.uniforms.uSampler=h;const f=h;h=l,l=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,h,r,n),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class n_ extends Fe{constructor(t=8,i=4,r=Fe.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new of(!0,t,i,r,n),this.blurYFilter=new of(!1,t,i,r,n),this.resolution=r,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,r,n){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const l=t.getFilterTexture();this.blurXFilter.apply(t,i,l,br.CLEAR),this.blurYFilter.apply(t,l,r,n),t.returnFilterTexture(l)}else o?this.blurYFilter.apply(t,i,r,n):this.blurXFilter.apply(t,i,r,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var FF=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class af extends Fe{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(i0,FF,t),this.alpha=1}_loadMatrix(t,i=!1){let r=t;i&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(t,i,r){return t[0]=i[0]*r[0]+i[1]*r[5]+i[2]*r[10]+i[3]*r[15],t[1]=i[0]*r[1]+i[1]*r[6]+i[2]*r[11]+i[3]*r[16],t[2]=i[0]*r[2]+i[1]*r[7]+i[2]*r[12]+i[3]*r[17],t[3]=i[0]*r[3]+i[1]*r[8]+i[2]*r[13]+i[3]*r[18],t[4]=i[0]*r[4]+i[1]*r[9]+i[2]*r[14]+i[3]*r[19]+i[4],t[5]=i[5]*r[0]+i[6]*r[5]+i[7]*r[10]+i[8]*r[15],t[6]=i[5]*r[1]+i[6]*r[6]+i[7]*r[11]+i[8]*r[16],t[7]=i[5]*r[2]+i[6]*r[7]+i[7]*r[12]+i[8]*r[17],t[8]=i[5]*r[3]+i[6]*r[8]+i[7]*r[13]+i[8]*r[18],t[9]=i[5]*r[4]+i[6]*r[9]+i[7]*r[14]+i[8]*r[19]+i[9],t[10]=i[10]*r[0]+i[11]*r[5]+i[12]*r[10]+i[13]*r[15],t[11]=i[10]*r[1]+i[11]*r[6]+i[12]*r[11]+i[13]*r[16],t[12]=i[10]*r[2]+i[11]*r[7]+i[12]*r[12]+i[13]*r[17],t[13]=i[10]*r[3]+i[11]*r[8]+i[12]*r[13]+i[13]*r[18],t[14]=i[10]*r[4]+i[11]*r[9]+i[12]*r[14]+i[13]*r[19]+i[14],t[15]=i[15]*r[0]+i[16]*r[5]+i[17]*r[10]+i[18]*r[15],t[16]=i[15]*r[1]+i[16]*r[6]+i[17]*r[11]+i[18]*r[16],t[17]=i[15]*r[2]+i[16]*r[7]+i[17]*r[12]+i[18]*r[17],t[18]=i[15]*r[3]+i[16]*r[8]+i[17]*r[13]+i[18]*r[18],t[19]=i[15]*r[4]+i[16]*r[9]+i[17]*r[14]+i[18]*r[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,i)}tint(t,i){const[r,n,s]=It.shared.setValue(t).toArray(),o=[r,0,0,0,0,0,n,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,i)}greyscale(t,i){const r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const r=Math.cos(t),n=Math.sin(t),s=Math.sqrt,o=1/3,l=s(o),h=r+(1-r)*o,c=o*(1-r)-l*n,f=o*(1-r)+l*n,m=o*(1-r)+l*n,p=r+o*(1-r),v=o*(1-r)-l*n,_=o*(1-r)-l*n,E=o*(1-r)+l*n,T=r+o*(1-r),b=[h,c,f,0,0,m,p,v,0,0,_,E,T,0,0,0,0,0,1,0];this._loadMatrix(b,i)}contrast(t,i){const r=(t||0)+1,n=-.5*(r-1),s=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(s,i)}saturate(t=0,i){const r=t*2/3+1,n=(r-1)*-.5,s=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(s,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,r,n,s){t=t||.2,i=i||.15,r=r||16770432,n=n||3375104;const o=It.shared,[l,h,c]=o.setValue(r).toArray(),[f,m,p]=o.setValue(n).toArray(),v=[.3,.59,.11,0,0,l,h,c,t,0,f,m,p,i,0,l-f,h-m,c-p,0,0];this._loadMatrix(v,s)}night(t,i){t=t||.1;const r=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(r,i)}predator(t,i){const r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}af.prototype.grayscale=af.prototype.greyscale;var LF=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,BF=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class qP extends Fe{constructor(t,i){const r=new Yt;t.renderable=!1,super(BF,LF,{mapSampler:t._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=r,i==null&&(i=20),this.scale=new ct(i,i)}apply(t,i,r,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),t.applyFilter(this,i,r,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var UF=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,zF=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class QP extends Fe{constructor(){super(zF,UF)}}var HF=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class KP extends Fe{constructor(t=.5,i=Math.random()){super(i0,HF,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const sv={AlphaFilter:YP,BlurFilter:n_,BlurFilterPass:of,ColorMatrixFilter:af,DisplacementFilter:qP,FXAAFilter:QP,NoiseFilter:KP};Object.entries(sv).forEach(([e,t])=>{Object.defineProperty(sv,e,{get(){return xt("7.1.0",`filters.${e} has moved to ${e}`),t}})});class GF{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(zt.system.add(this.tickerUpdate,this,Bn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(zt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const ls=new GF;class rl{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=rl.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ct,this.page=new ct,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,r,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Hu extends rl{constructor(){super(...arguments),this.client=new ct,this.movement=new ct,this.offset=new ct,this.global=new ct,this.screen=new ct}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,i,r){return t.worldTransform.applyInverse(r||this.global,i)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,r,n,s,o,l,h,c,f,m,p,v,_,E){throw new Error("Method not implemented.")}}class Xi extends Hu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Eo extends Hu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Eo.DOM_DELTA_PIXEL=0;Eo.DOM_DELTA_LINE=1;Eo.DOM_DELTA_PAGE=2;const WF=2048,$F=new ct,Eg=new ct;class ZP{constructor(t){this.dispatch=new Ur,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((r,n)=>r.priority-n.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let r=0,n=i.length;r<n;r++)i[r].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){ls.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[n](this.rootTarget,this.rootTarget.eventMode,$F.set(t,i),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,i){if(!t.target)return;const r=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,s=r.length-1;n<s;n++)if(t.currentTarget=r[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(t.currentTarget=r[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,r=this._allInteractiveElements){if(r.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(i)?i:[i];for(let s=r.length-1;s>=0;s--)n.forEach(o=>{t.currentTarget=r[s],this.notifyTarget(t,o)})}propagationPath(t){const i=[t];for(let r=0;r<WF&&t!==this.rootTarget;r++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestMoveRecursive(t,i,r,n,s,o=!1){let l=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(ls.pauseUpdate=!1),t.interactiveChildren&&t.children){const f=t.children;for(let m=f.length-1;m>=0;m--){const p=f[m],v=this.hitTestMoveRecursive(p,this._isInteractive(i)?i:p.eventMode,r,n,s,o||s(t,r));if(v){if(v.length>0&&!v[v.length-1].parent)continue;const _=t.isInteractive();(v.length>0||_)&&(_&&this._allInteractiveElements.push(t),v.push(t)),this._hitElements.length===0&&(this._hitElements=v),l=!0}}}const h=this._isInteractive(i),c=t.isInteractive();return c&&c&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:l?this._hitElements:h&&!s(t,r)&&n(t,r)?c?[t]:[]:null}hitTestRecursive(t,i,r,n,s){if(this._interactivePrune(t)||s(t,r))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(ls.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let c=h.length-1;c>=0;c--){const f=h[c],m=this.hitTestRecursive(f,this._isInteractive(i)?i:f.eventMode,r,n,s);if(m){if(m.length>0&&!m[m.length-1].parent)continue;const p=t.isInteractive();return(m.length>0||p)&&m.push(t),m}}}const o=this._isInteractive(i),l=t.isInteractive();return o&&n(t,r)?l?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,i){var r;if(t.hitArea&&(t.worldTransform.applyInverse(i,Eg),!t.hitArea.contains(Eg.x,Eg.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!((r=n.containsPoint)!=null&&r.call(n,i)))return!0}return!1}hitTestFn(t,i){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){var s,o;i=i??t.type;const r=`on${i}`;(o=(s=t.currentTarget)[r])==null||o.call(s,t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof Xi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const n=i.button===2;this.dispatchEvent(i,n?"rightdown":"mousedown")}const r=this.trackingData(t.pointerId);r.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){var h,c;if(!(t instanceof Xi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const r=i.pointerType==="mouse"||i.pointerType==="pen",n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.overTargets);if(((h=n.overTargets)==null?void 0:h.length)>0&&s!==i.target){const f=t.type==="mousemove"?"mouseout":"pointerout",m=this.createPointerEvent(t,f,s);if(this.dispatchEvent(m,"pointerout"),r&&this.dispatchEvent(m,"mouseout"),!i.composedPath().includes(s)){const p=this.createPointerEvent(t,"pointerleave",s);for(p.eventPhase=p.AT_TARGET;p.target&&!i.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),r&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(m)}if(s!==i.target){const f=t.type==="mousemove"?"mouseover":"pointerover",m=this.clonePointerEvent(i,f);this.dispatchEvent(m,"pointerover"),r&&this.dispatchEvent(m,"mouseover");let p=s==null?void 0:s.parent;for(;p&&p!==this.rootTarget.parent&&p!==i.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const _=this.clonePointerEvent(i,"pointerenter");for(_.eventPhase=_.AT_TARGET;_.target&&_.target!==s&&_.target!==this.rootTarget.parent;)_.currentTarget=_.target,this.notifyTarget(_),r&&this.notifyTarget(_,"mouseenter"),_.target=_.target.parent;this.freeEvent(_)}this.freeEvent(m)}const o=[],l=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(i,"pointermove"),l&&o.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),l&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),l&&o.push("globalmousemove"),this.cursor=(c=i.target)==null?void 0:c.cursor),o.length>0&&this.all(i,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){var o;if(!(t instanceof Xi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),r=this.createPointerEvent(t),n=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;i.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof Xi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const r=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(i.overTargets),s=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Xi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.dispatchEvent(r,l?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[t.button]);let o=s;if(s&&!r.composedPath().includes(s)){let l=s;for(;l&&!r.composedPath().includes(l);){if(r.currentTarget=l,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const h=r.button===2;this.notifyTarget(r,h?"rightupoutside":"mouseupoutside")}l=l.parent}delete n.pressTargetsByButton[t.button],o=l}if(o){const l=this.clonePointerEvent(r,"click");l.target=o,l.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:l.target,timeStamp:i});const h=n.clicksByButton[t.button];if(h.target===l.target&&i-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=l.target,h.timeStamp=i,l.detail=h.clickCount,l.pointerType==="mouse"){const c=l.button===2;this.dispatchEvent(l,c?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(r)}mapPointerUpOutside(t){if(!(t instanceof Xi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),r=this.findMountedTarget(i.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(r){let s=r;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof Eo)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let r=1;r<t.length&&t[r].parent===i;r++)i=t[r];return i}createPointerEvent(t,i,r){const n=this.allocateEvent(Xi);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=r??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof i=="string"&&(n.type=i),n}createWheelEvent(t){const i=this.allocateEvent(Eo);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const r=this.allocateEvent(Xi);return r.nativeEvent=t.nativeEvent,r.originalEvent=t.originalEvent,this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.target=t.target,r.path=t.composedPath().slice(),r.type=i??r.type,r}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof Xi&&i instanceof Xi&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof Hu&&i instanceof Hu&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.shiftKey=t.shiftKey,i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const r=t.currentTarget._events[i];if(r&&t.currentTarget.isInteractive())if("fn"in r)r.once&&t.currentTarget.removeListener(i,r.fn,void 0,!0),r.fn.call(r.context,t);else for(let n=0,s=r.length;n<s&&!t.propagationImmediatelyStopped;n++)r[n].once&&t.currentTarget.removeListener(i,r[n].fn,void 0,!0),r[n].fn.call(r[n].context,t)}}const jF=1,VF={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ov=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new ZP(null),ls.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Xi(null),this.rootWheelEvent=new Eo(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...ov.defaultEventFeatures},{set:(t,i,r)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),t[i]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,ov._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=t.length;i<r;i++){const n=t[i],s=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;ls.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",r=this.normalizeToPointerData(e);for(let n=0,s=r.length;n<s;n++){const o=this.bootstrapEvent(this.rootPointerEvent,r[n]);o.type+=i,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,ls.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ls.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ls.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){let r;this.domElement.parentElement?r=this.domElement.getBoundingClientRect():r={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const n=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*n,e.y=(i-r.top)*(this.domElement.height/r.height)*n}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){const n=e.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=jF),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=VF[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let ja=ov;ja.extension={name:"events",type:[st.RendererSystem,st.CanvasRendererSystem]};ja.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};dt.add(ja);function ub(e){return e==="dynamic"||e==="static"}const JP={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??ub(ja.defaultEventMode)},set interactive(e){xt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??ja.defaultEventMode},set eventMode(e){this._internalInteractive=ub(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const r=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=r?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,n)},removeEventListener(e,t,i){const r=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=r?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof rl))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};qt.mixin(JP);const tA={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};qt.mixin(tA);const XF=9,jc=100,YF=0,qF=0,hb=2,cb=1,QF=-1e3,KF=-1e3,ZF=2;class s_{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Cr.tablet||Cr.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${jc}px`,i.style.height=`${jc}px`,i.style.position="absolute",i.style.top=`${YF}px`,i.style.left=`${qF}px`,i.style.zIndex=hb.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${cb}px`,t.style.height=`${cb}px`,t.style.position="absolute",t.style.top=`${QF}px`,t.style.left=`${KF}px`,t.style.zIndex=ZF.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let r=0;r<i.length;r++)this.updateAccessibleObjects(i[r])}update(){const t=performance.now();if(Cr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:r,width:n,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:l,resolution:h}=this.renderer,c=n/o*h,f=s/l*h;let m=this.div;m.style.left=`${i}px`,m.style.top=`${r}px`,m.style.width=`${o}px`,m.style.height=`${l}px`;for(let p=0;p<this.children.length;p++){const v=this.children[p];if(v.renderId!==this.renderId)v._accessibleActive=!1,co(this.children,p,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,p--;else{m=v._accessibleDiv;let _=v.hitArea;const E=v.worldTransform;v.hitArea?(m.style.left=`${(E.tx+_.x*E.a)*c}px`,m.style.top=`${(E.ty+_.y*E.d)*f}px`,m.style.width=`${_.width*E.a*c}px`,m.style.height=`${_.height*E.d*f}px`):(_=v.getBounds(),this.capHitArea(_),m.style.left=`${_.x*c}px`,m.style.top=`${_.y*f}px`,m.style.width=`${_.width*c}px`,m.style.height=`${_.height*f}px`,m.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(m.title=v.accessibleTitle),m.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&m.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==m.title||v.tabIndex!==m.tabIndex)&&(m.title=v.accessibleTitle,m.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:r}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>r&&(t.height=r-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${jc}px`,i.style.height=`${jc}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=hb.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:r}=t.target,n=this.renderer.events.rootBoundary,s=Object.assign(new rl(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,i.forEach(o=>n.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===XF&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}s_.extension={name:"accessibility",type:[st.RendererPlugin,st.CanvasRendererPlugin]};dt.add(s_);var fi=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(fi||{});const Gu={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let bn,ra;function db(){ra={s3tc:bn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:bn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:bn.getExtension("WEBGL_compressed_texture_etc"),etc1:bn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:bn.getExtension("WEBGL_compressed_texture_pvrtc")||bn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:bn.getExtension("WEBGL_compressed_texture_atc"),astc:bn.getExtension("WEBGL_compressed_texture_astc")}}const eA={extension:{type:st.DetectionParser,priority:2},test:async()=>{const t=nt.ADAPTER.createCanvas().getContext("webgl");return t?(bn=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{ra||db();const t=[];for(const i in ra)ra[i]&&t.push(i);return[...t,...e]},remove:async e=>(ra||db(),e.filter(t=>!(t in ra)))};dt.add(eA);class iA extends Za{constructor(t,i={width:1,height:1,autoLoad:!0}){let r,n;typeof t=="string"?(r=t,n=new Uint8Array):(r=null,n=t),super(n,i),this.origin=r,this.buffer=n?new Ed(n):null,this._load=null,this.loaded=!1,this.origin!==null&&i.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Ed(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class bs extends iA{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=bs._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||bs._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,r){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,l=this.levels;o<l;o++){const{levelID:h,levelWidth:c,levelHeight:f,levelBuffer:m}=this._levelBuffers[o];n.compressedTexImage2D(n.TEXTURE_2D,h,this.format,c,f,0,m)}return!0}onBlobLoaded(){this._levelBuffers=bs._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,i,r,n,s,o,l){const h=new Array(r);let c=t.byteOffset,f=o,m=l,p=f+n-1&~(n-1),v=m+s-1&~(s-1),_=p*v*Gu[i];for(let E=0;E<r;E++)h[E]={levelID:E,levelWidth:r>1?f:p,levelHeight:r>1?m:v,levelBuffer:new Uint8Array(t.buffer,c,_)},c+=_,f=f>>1||1,m=m>>1||1,p=f+n-1&~(n-1),v=m+s-1&~(s-1),_=p*v*Gu[i];return h}}const Tg=4,Vc=124,JF=32,fb=20,tL=542327876,Xc={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},eL={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Yc={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},iL=1,rL=2,nL=4,sL=64,oL=512,aL=131072,lL=827611204,uL=861165636,hL=894720068,cL=808540228,dL=4,fL={[lL]:fi.COMPRESSED_RGBA_S3TC_DXT1_EXT,[uL]:fi.COMPRESSED_RGBA_S3TC_DXT3_EXT,[hL]:fi.COMPRESSED_RGBA_S3TC_DXT5_EXT},pL={70:fi.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:fi.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:fi.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:fi.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:fi.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:fi.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:fi.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:fi.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:fi.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function rA(e){const t=new Uint32Array(e);if(t[0]!==tL)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(e,0,Vc/Uint32Array.BYTES_PER_ELEMENT),n=r[Xc.HEIGHT],s=r[Xc.WIDTH],o=r[Xc.MIPMAP_COUNT],l=new Uint32Array(e,Xc.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,JF/Uint32Array.BYTES_PER_ELEMENT),h=l[iL];if(h&nL){const c=l[eL.FOURCC];if(c!==cL){const w=fL[c],P=Tg+Vc,I=new Uint8Array(e,P);return[new bs(I,{format:w,width:s,height:n,levels:o})]}const f=Tg+Vc,m=new Uint32Array(t.buffer,f,fb/Uint32Array.BYTES_PER_ELEMENT),p=m[Yc.DXGI_FORMAT],v=m[Yc.RESOURCE_DIMENSION],_=m[Yc.MISC_FLAG],E=m[Yc.ARRAY_SIZE],T=pL[p];if(T===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${p}`);if(_===dL)throw new Error("DDSParser does not support cubemap textures");if(v===6)throw new Error("DDSParser does not supported 3D texture data");const b=new Array,S=Tg+Vc+fb;if(E===1)b.push(new Uint8Array(e,S));else{const w=Gu[T];let P=0,I=s,F=n;for(let k=0;k<o;k++){const X=Math.max(1,I+3&-4),j=Math.max(1,F+3&-4),V=X*j*w;P+=V,I=I>>>1,F=F>>>1}let O=S;for(let k=0;k<E;k++)b.push(new Uint8Array(e,O,P)),O+=P}return b.map(w=>new bs(w,{format:T,width:s,height:n,levels:o}))}throw h&sL?new Error("DDSParser does not support uncompressed texture data."):h&oL?new Error("DDSParser does not supported YUV uncompressed texture data."):h&aL?new Error("DDSParser does not support single-channel (lumninance) texture data!"):h&rL?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const pb=[171,75,84,88,32,49,49,187,13,10,26,10],mL=67305985,vr={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},av=64,lv={[yt.UNSIGNED_BYTE]:1,[yt.UNSIGNED_SHORT]:2,[yt.INT]:4,[yt.UNSIGNED_INT]:4,[yt.FLOAT]:4,[yt.HALF_FLOAT]:8},nA={[J.RGBA]:4,[J.RGB]:3,[J.RG]:2,[J.RED]:1,[J.LUMINANCE]:1,[J.LUMINANCE_ALPHA]:2,[J.ALPHA]:1},sA={[yt.UNSIGNED_SHORT_4_4_4_4]:2,[yt.UNSIGNED_SHORT_5_5_5_1]:2,[yt.UNSIGNED_SHORT_5_6_5]:2};function oA(e,t,i=!1){const r=new DataView(t);if(!gL(e,r))return null;const n=r.getUint32(vr.ENDIANNESS,!0)===mL,s=r.getUint32(vr.GL_TYPE,n),o=r.getUint32(vr.GL_FORMAT,n),l=r.getUint32(vr.GL_INTERNAL_FORMAT,n),h=r.getUint32(vr.PIXEL_WIDTH,n),c=r.getUint32(vr.PIXEL_HEIGHT,n)||1,f=r.getUint32(vr.PIXEL_DEPTH,n)||1,m=r.getUint32(vr.NUMBER_OF_ARRAY_ELEMENTS,n)||1,p=r.getUint32(vr.NUMBER_OF_FACES,n),v=r.getUint32(vr.NUMBER_OF_MIPMAP_LEVELS,n),_=r.getUint32(vr.BYTES_OF_KEY_VALUE_DATA,n);if(c===0||f!==1)throw new Error("Only 2D textures are supported");if(p!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(m!==1)throw new Error("WebGL does not support array textures");const E=4,T=4,b=h+3&-4,S=c+3&-4,w=new Array(m);let P=h*c;s===0&&(P=b*S);let I;if(s!==0?lv[s]?I=lv[s]*nA[o]:I=sA[s]:I=Gu[l],I===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const F=i?vL(r,_,n):null;let k=P*I,X=h,j=c,V=b,K=S,B=av+_;for(let z=0;z<v;z++){const gt=r.getUint32(B,n);let pt=B+4;for(let et=0;et<m;et++){let D=w[et];D||(D=w[et]=new Array(v)),D[z]={levelID:z,levelWidth:v>1||s!==0?X:V,levelHeight:v>1||s!==0?j:K,levelBuffer:new Uint8Array(t,pt,k)},pt+=k}B+=gt+4,B=B%4!==0?B+4-B%4:B,X=X>>1||1,j=j>>1||1,V=X+E-1&~(E-1),K=j+T-1&~(T-1),k=V*K*I}return s!==0?{uncompressed:w.map(z=>{let gt=z[0].levelBuffer,pt=!1;return s===yt.FLOAT?gt=new Float32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4):s===yt.UNSIGNED_INT?(pt=!0,gt=new Uint32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4)):s===yt.INT&&(pt=!0,gt=new Int32Array(z[0].levelBuffer.buffer,z[0].levelBuffer.byteOffset,z[0].levelBuffer.byteLength/4)),{resource:new Za(gt,{width:z[0].levelWidth,height:z[0].levelHeight}),type:s,format:pt?yL(o):o}}),kvData:F}:{compressed:w.map(z=>new bs(null,{format:l,width:h,height:c,levels:v,levelBuffers:z})),kvData:F}}function gL(e,t){for(let i=0;i<pb.length;i++)if(t.getUint8(i)!==pb[i])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function yL(e){switch(e){case J.RGBA:return J.RGBA_INTEGER;case J.RGB:return J.RGB_INTEGER;case J.RG:return J.RG_INTEGER;case J.RED:return J.RED_INTEGER;default:return e}}function vL(e,t,i){const r=new Map;let n=0;for(;n<t;){const s=e.getUint32(av+n,i),o=av+n+4,l=3-(s+3)%4;if(s===0||s>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let h=0;for(;h<s&&e.getUint8(o+h)!==0;h++);if(h===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(e.buffer,o,h)),f=new DataView(e.buffer,o+h+1,s-h-1);r.set(c,f),n+=4+s+l}return r}const aA={extension:{type:st.LoadParser,priority:ur.High},name:"loadDDS",test(e){return Ms(e,".dds")},async load(e,t,i){const n=await(await nt.ADAPTER.fetch(e)).arrayBuffer(),o=rA(n).map(l=>{const h=new _t(l,{mipmap:Nr.OFF,alphaMode:ar.NO_PREMULTIPLIED_ALPHA,resolution:Nn(e),...t.data});return ah(h,i,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};dt.add(aA);const lA={extension:{type:st.LoadParser,priority:ur.High},name:"loadKTX",test(e){return Ms(e,".ktx")},async load(e,t,i){const n=await(await nt.ADAPTER.fetch(e)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:l}=oA(e,n),h=s??o,c={mipmap:Nr.OFF,alphaMode:ar.NO_PREMULTIPLIED_ALPHA,resolution:Nn(e),...t.data},f=h.map(m=>{h===o&&Object.assign(c,{type:m.type,format:m.format});const p=new _t(m,c);return p.ktxKeyValueData=l,ah(p,i,e)});return f.length===1?f[0]:f},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};dt.add(lA);const uA={extension:st.ResolveParser,test:e=>{const i=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(i)},parse:e=>{var r,n;if(e.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>e.endsWith(o)))return{resolution:parseFloat(((r=nt.RETINA_PREFIX.exec(e))==null?void 0:r[1])??"1"),format:s.find(o=>e.endsWith(o)),src:e}}return{resolution:parseFloat(((n=nt.RETINA_PREFIX.exec(e))==null?void 0:n[1])??"1"),format:e.split(".").pop(),src:e}}};dt.add(uA);const _L=new St,xL=4,ql=class{constructor(e){this.renderer=e}async image(e,t,i){const r=new Image;return r.src=await this.base64(e,t,i),r}async base64(e,t,i){const r=this.canvas(e);if(r.toBlob!==void 0)return new Promise((n,s)=>{r.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const l=new FileReader;l.onload=()=>n(l.result),l.onerror=s,l.readAsDataURL(o)},t,i)});if(r.toDataURL!==void 0)return r.toDataURL(t,i);if(r.convertToBlob!==void 0){const n=await r.convertToBlob({type:t,quality:i});return new Promise((s,o)=>{const l=new FileReader;l.onload=()=>s(l.result),l.onerror=o,l.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:r,height:n,flipY:s}=this._rawPixels(e,t);s&&ql._flipY(i,r,n),ql._unpremultiplyAlpha(i);const o=new mE(r,n,1),l=new ImageData(new Uint8ClampedArray(i.buffer),r,n);return o.context.putImageData(l,0,0),o.canvas}pixels(e,t){const{pixels:i,width:r,height:n,flipY:s}=this._rawPixels(e,t);return s&&ql._flipY(i,r,n),ql._unpremultiplyAlpha(i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let r,n=!1,s,o=!1;if(e&&(e instanceof Rs?s=e:(s=i.generateTexture(e,{resolution:i.resolution,multisample:i.multisample}),o=!0)),s){if(r=s.baseTexture.resolution,t=t??s.frame,n=!1,!o){i.renderTexture.bind(s);const m=s.framebuffer.glFramebuffers[i.CONTEXT_UID];m.blitFramebuffer&&i.framebuffer.bind(m.blitFramebuffer)}}else r=i.resolution,t||(t=_L,t.width=i.width/r,t.height=i.height/r),n=!0,i.renderTexture.bind();const l=Math.round(t.width*r),h=Math.round(t.height*r),c=new Uint8Array(xL*l*h),f=i.gl;return f.readPixels(Math.round(t.x*r),Math.round(t.y*r),l,h,f.RGBA,f.UNSIGNED_BYTE,c),o&&(s==null||s.destroy(!0)),{pixels:c,width:l,height:h,flipY:n}}destroy(){this.renderer=null}static _flipY(e,t,i){const r=t<<2,n=i>>1,s=new Uint8Array(r);for(let o=0;o<n;o++){const l=o*r,h=(i-o-1)*r;s.set(e.subarray(l,l+r)),e.copyWithin(l,h,h+r),e.set(s,h)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let i=0;i<t;i+=4){const r=e[i+3];if(r!==0){const n=255.001/r;e[i]=e[i]*n+.5,e[i+1]=e[i+1]*n+.5,e[i+2]=e[i+2]*n+.5}}}};let o_=ql;o_.extension={name:"extract",type:st.RendererSystem};dt.add(o_);class hA{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function wL(e,t){var r;let i=!1;if((r=e==null?void 0:e._textures)!=null&&r.length){for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof tt){const s=e._textures[n].baseTexture;t.includes(s)||(t.push(s),i=!0)}}return i}function SL(e,t){if(e.baseTexture instanceof _t){const i=e.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function bL(e,t){if(e._texture&&e._texture instanceof tt){const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function EL(e,t){return t instanceof sh?(t.updateText(!0),!0):!1}function TL(e,t){if(t instanceof cn){const i=t.toFontString();return Oe.measureFont(i),!0}return!1}function CL(e,t){if(e instanceof sh){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function PL(e,t){return e instanceof cn?(t.includes(e)||t.push(e),!0):!1}const cA=class{constructor(e){this.limiter=new hA(cA.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(CL),this.registerFindHook(PL),this.registerFindHook(wL),this.registerFindHook(SL),this.registerFindHook(bL),this.registerUploadHook(EL),this.registerUploadHook(TL)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,zt.system.addOnce(this.tick,this,Bn.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)zt.system.addOnce(this.tick,this,Bn.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Ee)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&zt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Wu=cA;Wu.uploadsPerFrame=4;Object.defineProperties(nt,{UPLOADS_PER_FRAME:{get(){return Wu.uploadsPerFrame},set(e){xt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Wu.uploadsPerFrame=e}}});function dA(e,t){return t instanceof _t?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function AL(e,t){if(!(t instanceof fs))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:r}=i;for(let n=0;n<r.length;n++){const{texture:s}=r[n].style;s&&dA(e,s.baseTexture)}return i.batchable||e.geometry.bind(i,t._resolveDirectShader(e)),!0}function IL(e,t){return e instanceof fs?(t.push(e),!0):!1}class a_ extends Wu{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(IL),this.registerUploadHook(dA),this.registerUploadHook(AL)}}a_.extension={name:"prepare",type:st.RendererSystem};dt.add(a_);class RL{constructor(t){this.maxMilliseconds=t,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}const Ql=class{constructor(e,t,i=null){this.linkedSheets=[],this._texture=e instanceof tt?e:null,this.baseTexture=e instanceof _t?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=Nn(e,null);return i===null&&(i=parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Ql.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Ql.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const r=this._frameKeys[t],n=this._frames[r],s=n.frame;if(s){let o=null,l=null;const h=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,c=new St(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);n.rotated?o=new St(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new St(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new St(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[r]=new tt(this.baseTexture,o,c,l,n.rotated?2:0,n.anchor,n.borders),tt.addToCache(this.textures[r],r)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const r=e[t][i];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ql.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ql.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let lf=Ql;lf.BATCH_SIZE=1e3;const ML=["jpg","png","jpeg","avif","webp"];function fA(e,t,i){const r={};if(e.forEach(n=>{r[n]=t}),Object.keys(t.textures).forEach(n=>{r[n]=t.textures[n]}),!i){const n=ye.dirname(e[0]);t.linkedSheets.forEach((s,o)=>{const l=fA([`${n}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(r,l)})}return r}const pA={extension:st.Asset,cache:{test:e=>e instanceof lf,getCacheableAssets:(e,t)=>fA(e,t,!1)},resolver:{test:e=>{const i=e.split("?")[0].split("."),r=i.pop(),n=i.pop();return r==="json"&&ML.includes(n)},parse:e=>{var i;const t=e.split(".");return{resolution:parseFloat(((i=nt.RETINA_PREFIX.exec(e))==null?void 0:i[1])??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:st.LoadParser,priority:ur.Normal},async testParse(e,t){return ye.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,i){var c,f;let r=ye.dirname(t.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");let n=r+e.meta.image;n=Md(n,t.src);const o=(await i.load([n]))[n],l=new lf(o.baseTexture,e,t.src);await l.parse();const h=(c=e==null?void 0:e.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(h)){const m=[];for(const v of h){if(typeof v!="string")continue;let _=r+v;(f=t.data)!=null&&f.ignoreMultiPack||(_=Md(_,t.src),m.push(i.load({src:_,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(m);l.linkedSheets=p,p.forEach(v=>{v.linkedSheets=[l].concat(l.linkedSheets.filter(_=>_!==v))})}return l},unload(e){e.destroy(!0)}}};dt.add(pA);const na=class extends cn{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new na(Object.keys(na.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete na.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=na;if(i[e]){const r=i[e];return this._fonts.push(r),r.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return nt.ADAPTER.fetch(e).then(r=>r.blob()).then(async r=>new Promise((n,s)=>{const o=URL.createObjectURL(r),l=new FileReader;l.onload=()=>n([o,l.result]),l.onerror=s,l.readAsDataURL(r)})).then(async([r,n])=>{const s=Object.assign({family:ye.basename(e,ye.extname(e)),weight:"normal",style:"normal",src:r,dataSrc:n,refs:1,originalUrl:e,fontFace:null},t);i[e]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=cE(e)),typeof e=="number"?hE(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${n} ${e}`}reset(){Object.assign(this,na.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=nt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Ra=na;Ra.availableFonts={};Ra.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const sa=class extends lr{constructor(e="",t={}){super(tt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const i=new Image,r=tt.from(i,{scaleMode:nt.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new St,r.trim=new St,this.texture=r;const n="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(n,"svg"),l=document.createElementNS(n,"foreignObject"),h=document.createElementNS(s,"div"),c=document.createElementNS(s,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",o.appendChild(l),this.maxWidth=sa.defaultMaxWidth,this.maxHeight=sa.defaultMaxHeight,this._domElement=h,this._styleElement=c,this._svgRoot=o,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(h),this._image=i,this._loadImage=new Image,this._autoResolution=sa.defaultAutoResolution,this._resolution=sa.defaultResolution??nt.RESOLUTION,this.text=e,this.style=t}measureText(e){var l,h;const{text:t,style:i,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(r)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(n.width)),o=Math.min(this.maxHeight,Math.ceil(n.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(l=this._style)==null?void 0:l.toCSS(r)}),this._styleElement.textContent=(h=this._style)==null?void 0:h.toGlobalCSS()),{width:s+i.padding*2,height:o+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:r}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:n,height:s}=this.measureText();i.width=r.width=Math.ceil(Math.max(1,n)),i.height=r.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{r.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,i.src=r.src,r.onload=null,r.src="",this.updateTexture(),o()};const l=new XMLSerializer().serializeToString(this._svgRoot);r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:r}=this,{padding:n}=e,{baseTexture:s}=t;t.trim.width=t._frame.width=i.width/r,t.trim.height=t._frame.height=i.height/r,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),s.setRealSize(i.width,i.height,r),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var i,r,n,s,o;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},sa.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=t,(r=this._svgRoot)==null||r.remove(),this._svgRoot=t,(n=this._domElement)==null||n.remove(),this._domElement=t,(s=this._foreignObject)==null||s.remove(),this._foreignObject=t,(o=this._styleElement)==null||o.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Pn(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Pn(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Ra?(this.ownsStyle=!1,this._style=e):e instanceof cn?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Ra.from(e)):(this.ownsStyle=!0,this._style=new Ra(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let ph=sa;ph.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};ph.defaultMaxWidth=2024;ph.defaultMaxHeight=2024;ph.defaultAutoResolution=!0;const kL=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:ar,AbstractMultiResource:o0,AccessibilityManager:s_,AlphaFilter:YP,AnimatedSprite:La,Application:tl,ArrayResource:XE,Assets:An,AssetsClass:hT,Attribute:gu,BLEND_MODES:ft,BUFFER_BITS:gd,BUFFER_TYPE:Rr,BackgroundSystem:th,BaseImageResource:Ln,BasePrepare:Wu,BaseRenderTexture:Fv,BaseTexture:_t,BatchDrawCall:Cd,BatchGeometry:Ov,BatchRenderer:qi,BatchShaderGenerator:RE,BatchSystem:Nv,BatchTextureArray:Pd,BitmapFont:si,BitmapFontData:_u,BitmapText:l0,BlobResource:iA,BlurFilter:n_,BlurFilterPass:of,Bounds:vu,BrowserAdapter:Bb,Buffer:ce,BufferResource:Za,BufferSystem:n0,CLEAR_MODES:br,COLOR_MASK_BITS:Lb,Cache:ia,CanvasResource:YE,Circle:xf,Color:It,ColorMatrixFilter:af,CompressedTextureResource:bs,Container:Ee,ContextSystem:eh,CountLimiter:hA,CubeResource:a0,DEG_TO_RAD:wE,DRAW_MODES:Ji,DisplacementFilter:qP,DisplayObject:qt,ENV:As,Ellipse:wf,EventBoundary:ZP,EventSystem:ja,ExtensionType:st,Extract:o_,FORMATS:J,FORMATS_TO_COMPONENTS:nA,FXAAFilter:QP,FederatedDisplayObject:JP,FederatedEvent:rl,FederatedMouseEvent:Hu,FederatedPointerEvent:Xi,FederatedWheelEvent:Eo,FillStyle:uh,Filter:Fe,FilterState:kE,FilterSystem:Hv,Framebuffer:Ad,FramebufferSystem:Gv,GC_MODES:mf,GLFramebuffer:DE,GLProgram:LE,GLTexture:ed,GRAPHICS_CURVES:s3,GenerateTextureSystem:qv,Geometry:Fn,GeometrySystem:Wv,Graphics:fs,GraphicsData:Su,GraphicsGeometry:h0,HTMLText:ph,HTMLTextStyle:Ra,IGLUniformData:aD,INSTALLED:Td,INTERNAL_FORMATS:fi,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Gu,ImageBitmapResource:no,ImageResource:Lv,LINE_CAP:hs,LINE_JOIN:Yi,LineStyle:Pf,LoaderParserPriority:ur,MASK_TYPES:_e,MIPMAP_MODES:Nr,MSAA_QUALITY:me,MaskData:NE,MaskSystem:$v,Matrix:Yt,Mesh:vo,MeshBatchUvs:JE,MeshGeometry:oh,MeshMaterial:Fa,MultisampleSystem:r0,NineSlicePlane:ET,NoiseFilter:KP,ObjectRenderer:Ju,ObjectRendererSystem:s0,ObservablePoint:sn,PI_2:yu,PRECISION:Pi,ParticleContainer:PT,ParticleRenderer:c0,PlaneGeometry:wT,PluginSystem:Xv,Point:ct,Polygon:fo,Prepare:a_,Program:er,ProjectionSystem:Yv,Quad:ME,QuadUv:zv,RAD_TO_DEG:xE,RENDERER_TYPE:wv,Rectangle:St,RenderTexture:Rs,RenderTexturePool:Uv,RenderTextureSystem:Qv,Renderer:Po,ResizePlugin:f0,Resource:Oa,RopeGeometry:ST,RoundedRectangle:Sf,Runner:Ii,SAMPLER_TYPES:yd,SCALE_MODES:nn,SHAPES:Ne,SVGResource:Na,ScissorSystem:jv,Shader:kr,ShaderSystem:Kv,SimpleMesh:TT,SimplePlane:bT,SimpleRope:CT,Sprite:lr,SpriteMaskFilter:OE,Spritesheet:lf,StartupSystem:ih,State:pn,StateSystem:Zv,StencilSystem:Vv,SystemManager:WE,TARGETS:lo,TEXT_GRADIENT:nh,TYPES:yt,TYPES_TO_BYTES_PER_COMPONENT:lv,TYPES_TO_BYTES_PER_PIXEL:sA,TemporaryDisplayObject:QE,Text:sh,TextFormat:iu,TextMetrics:Oe,TextStyle:cn,Texture:tt,TextureGCSystem:Qi,TextureMatrix:bf,TextureSystem:Jv,TextureUvs:Bv,Ticker:zt,TickerPlugin:e0,TilingSprite:Af,TilingSpriteRenderer:d0,TimeLimiter:RL,Transform:Zu,TransformFeedback:ED,TransformFeedbackSystem:t0,UPDATE_PRIORITY:Bn,UniformGroup:rr,VERSION:qE,VideoResource:Ef,ViewSystem:rh,ViewableBuffer:Ed,WRAP_MODES:an,XMLFormat:Id,XMLStringFormat:Rd,accessibleTarget:tA,autoDetectFormat:KE,autoDetectRenderer:jE,autoDetectResource:Dv,cacheTextureArray:cT,checkDataUrl:Ja,checkExtension:Ms,checkMaxIfStatementsInShader:_E,convertToList:ln,copySearchParams:Md,createStringVariations:rT,createTexture:ah,createUBOElements:zE,curves:Ts,defaultFilterVertex:i0,defaultVertex:VE,detectAvif:dT,detectCompressedTextures:eA,detectDefaults:pT,detectWebp:fT,extensions:dt,filters:sv,generateProgram:BE,generateUniformBufferSync:GE,getFontFamilyName:oT,getTestContext:CE,getUBOData:HE,graphicsUtils:l3,groupD8:Jt,isMobile:Cr,isSingleItem:xu,loadBitmapFont:gT,loadDDS:aA,loadImageBitmap:lT,loadJson:nT,loadKTX:lA,loadSVG:uT,loadTextures:lh,loadTxt:sT,loadWebFont:aT,parseDDS:rA,parseKTX:oA,resolveCompressedTextureUrl:uA,resolveTextureUrl:mT,settings:nt,spritesheetAsset:pA,uniformParsers:po,unsafeEvalSupported:IE,utils:Rk},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/particle-emitter - v5.0.8
 * Compiled Mon, 28 Nov 2022 04:01:38 UTC
 *
 * @pixi/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class on{constructor(t,i,r){this.value=t,this.time=i,this.next=null,this.isStepped=!1,r?this.ease=typeof r=="function"?r:yA(r):this.ease=null}static createList(t){if("list"in t){const r=t.list;let n;const{value:s,time:o}=r[0],l=n=new on(typeof s=="string"?qc(s):s,o,t.ease);if(r.length>2||r.length===2&&r[1].value!==s)for(let h=1;h<r.length;++h){const{value:c,time:f}=r[h];n.next=new on(typeof c=="string"?qc(c):c,f),n=n.next}return l.isStepped=!!t.isStepped,l}const i=new on(typeof t.start=="string"?qc(t.start):t.start,0);return t.end!==t.start&&(i.next=new on(typeof t.end=="string"?qc(t.end):t.end,1)),i}}let $u=tt.from;const rn=Math.PI/180;function On(e,t){if(!e)return;const i=Math.sin(e),r=Math.cos(e),n=t.x*r-t.y*i,s=t.x*i+t.y*r;t.x=n,t.y=s}function jf(e,t,i){return e<<16|t<<8|i}function mA(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function DL(e){const t=1/mA(e);e.x*=t,e.y*=t}function gA(e,t){e.x*=t,e.y*=t}function qc(e,t){t||(t={}),e.charAt(0)==="#"?e=e.substr(1):e.indexOf("0x")===0&&(e=e.substr(2));let i;return e.length===8&&(i=e.substr(0,2),e=e.substr(2)),t.r=parseInt(e.substr(0,2),16),t.g=parseInt(e.substr(2,2),16),t.b=parseInt(e.substr(4,2),16),i&&(t.a=parseInt(i,16)),t}function yA(e){const t=e.length,i=1/t;return function(r){const n=t*r|0,s=(r-n*i)*t,o=e[n]||e[t-1];return o.s+s*(2*(1-s)*(o.cp-o.s)+s*(o.e-o.s))}}function OL(e){return e?(e=e.toUpperCase().replace(/ /g,"_"),ft[e]||ft.NORMAL):ft.NORMAL}class Cg extends lr{constructor(t){super(),this.prevChild=this.nextChild=null,this.emitter=t,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(t){this.maxLife=t,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}var Wt;(function(e){e[e.Spawn=0]="Spawn",e[e.Normal=2]="Normal",e[e.Late=5]="Late"})(Wt||(Wt={}));const Pg=zt.shared,qs=Symbol("Position particle per emitter position");let ee=class Kl{constructor(t,i){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new ct,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new ct,this._prevEmitterPos=new ct,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,i&&this.init(i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(t){Kl.knownBehaviors[t.type]=t}get frequency(){return this._frequency}set frequency(t){typeof t=="number"&&t>0?this._frequency=t:this._frequency=1}get parent(){return this._parent}set parent(t){this.cleanup(),this._parent=t}init(t){if(!t)return;this.cleanup(),this._origConfig=t,this.minLifetime=t.lifetime.min,this.maxLifetime=t.lifetime.max,t.ease?this.customEase=typeof t.ease=="function"?t.ease:yA(t.ease):this.customEase=null,this.particlesPerWave=1,t.particlesPerWave&&t.particlesPerWave>1&&(this.particlesPerWave=t.particlesPerWave),this.frequency=t.frequency,this.spawnChance=typeof t.spawnChance=="number"&&t.spawnChance>0?t.spawnChance:1,this.emitterLifetime=t.emitterLifetime||-1,this.maxParticles=t.maxParticles>0?t.maxParticles:1e3,this.addAtBack=!!t.addAtBack,this.rotation=0,this.ownerPos.set(0),t.pos?this.spawnPos.copyFrom(t.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=t.emit===void 0?!0:!!t.emit,this.autoUpdate=!!t.autoUpdate;const i=t.behaviors.map(r=>{const n=Kl.knownBehaviors[r.type];return n?new n(r.config):(console.error(`Unknown behavior: ${r.type}`),null)}).filter(r=>!!r);i.push(qs),i.sort((r,n)=>r===qs?n.order===Wt.Spawn?1:-1:n===qs?r.order===Wt.Spawn?-1:1:r.order-n.order),this.initBehaviors=i.slice(),this.updateBehaviors=i.filter(r=>r!==qs&&r.updateParticle),this.recycleBehaviors=i.filter(r=>r!==qs&&r.recycleParticle)}getBehavior(t){return Kl.knownBehaviors[t]&&this.initBehaviors.find(i=>i instanceof Kl.knownBehaviors[t])||null}fillPool(t){for(;t>0;--t){const i=new Cg(this);i.next=this._poolFirst,this._poolFirst=i}}recycle(t,i=!1){for(let r=0;r<this.recycleBehaviors.length;++r)this.recycleBehaviors[r].recycleParticle(t,!i);t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount}rotate(t){if(this.rotation===t)return;const i=t-this.rotation;this.rotation=t,On(i,this.spawnPos),this._posChanged=!0}updateSpawnPos(t,i){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=i}updateOwnerPos(t,i){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=i}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){this._autoUpdate&&!t?Pg.remove(this.update,this):!this._autoUpdate&&t&&Pg.add(this.update,this),this._autoUpdate=!!t}playOnceAndDestroy(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t}playOnce(t){this.emit=!0,this._completeCallback=t}update(t){if(this._autoUpdate&&(t=Pg.elapsedMS*.001),!this._parent)return;for(let o=this._activeParticlesFirst,l;o;o=l)if(l=o.next,o.age+=t,o.age>o.maxLife||o.age<0)this.recycle(o);else{let h=o.age*o.oneOverLife;this.customEase&&(this.customEase.length===4?h=this.customEase(h,0,1,1):h=this.customEase(h)),o.agePercent=h;for(let c=0;c<this.updateBehaviors.length;++c)if(this.updateBehaviors[c].updateParticle(o,t)){this.recycle(o);break}}let i,r;this._prevPosIsValid&&(i=this._prevEmitterPos.x,r=this._prevEmitterPos.y);const n=this.ownerPos.x+this.spawnPos.x,s=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let o,l;if(this._prevPosIsValid&&this._posChanged){const f=1+this._spawnTimer/t;o=(n-i)*f+i,l=(s-r)*f+r}else o=n,l=s;let h=null,c=null;for(let f=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),m=0;m<f;++m){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let p;if(this.minLifetime===this.maxLifetime?p=this.minLifetime:p=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=p)continue;let v;this._poolFirst?(v=this._poolFirst,this._poolFirst=this._poolFirst.next,v.next=null):v=new Cg(this),v.init(p),this.addAtBack?this._parent.addChildAt(v,0):this._parent.addChild(v),h?(c.next=v,v.prev=c,c=v):c=h=v,++this.particleCount}if(h){this._activeParticlesLast?(this._activeParticlesLast.next=h,h.prev=this._activeParticlesLast,this._activeParticlesLast=c):(this._activeParticlesFirst=h,this._activeParticlesLast=c);for(let f=0;f<this.initBehaviors.length;++f){const m=this.initBehaviors[f];if(m===qs)for(let p=h,v;p;p=v){v=p.next,this.rotation!==0&&(On(this.rotation,p.position),p.rotation+=this.rotation),p.position.x+=o,p.position.y+=l,p.age+=-this._spawnTimer;let _=p.age*p.oneOverLife;this.customEase&&(this.customEase.length===4?_=this.customEase(_,0,1,1):_=this.customEase(_)),p.agePercent=_}else m.initParticles(h)}for(let f=h,m;f;f=m){m=f.next;for(let p=0;p<this.updateBehaviors.length;++p)if(this.updateBehaviors[p].updateParticle(f,-this._spawnTimer)){this.recycle(f);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=n,this._prevEmitterPos.y=s,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const o=this._completeCallback;this._completeCallback=null,o()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const t=this.ownerPos.x+this.spawnPos.x,i=this.ownerPos.y+this.spawnPos.y;let r=null,n=null;for(let s=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),o=0;o<s;++o){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let l;this._poolFirst?(l=this._poolFirst,this._poolFirst=this._poolFirst.next,l.next=null):l=new Cg(this);let h;this.minLifetime===this.maxLifetime?h=this.minLifetime:h=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,l.init(h),this.addAtBack?this._parent.addChildAt(l,0):this._parent.addChild(l),r?(n.next=l,l.prev=n,n=l):n=r=l,++this.particleCount}if(r){this._activeParticlesLast?(this._activeParticlesLast.next=r,r.prev=this._activeParticlesLast,this._activeParticlesLast=n):(this._activeParticlesFirst=r,this._activeParticlesLast=n);for(let s=0;s<this.initBehaviors.length;++s){const o=this.initBehaviors[s];if(o===qs)for(let l=r,h;l;l=h)h=l.next,this.rotation!==0&&(On(this.rotation,l.position),l.rotation+=this.rotation),l.position.x+=t,l.position.y+=i;else o.initParticles(r)}}}cleanup(){let t,i;for(t=this._activeParticlesFirst;t;t=i)i=t.next,this.recycle(t,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let t;for(let i=this._poolFirst;i;i=t)t=i.next,i.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}};ee.knownBehaviors={};class l_{constructor(t){this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h}getRandPos(t){t.x=Math.random()*this.w+this.x,t.y=Math.random()*this.h+this.y}}l_.type="rect";l_.editorConfig=null;class Vf{constructor(t){this.x=t.x||0,this.y=t.y||0,this.radius=t.radius,this.innerRadius=t.innerRadius||0,this.rotation=!!t.affectRotation}getRandPos(t){this.innerRadius!==this.radius?t.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:t.x=this.radius,t.y=0;const i=Math.random()*Math.PI*2;this.rotation&&(t.rotation+=i),On(i,t.position),t.position.x+=this.x,t.position.y+=this.y}}Vf.type="torus";Vf.editorConfig=null;class u_{constructor(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}init(t){if(!t||!t.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(t[0]))for(let i=0;i<t.length;++i){const r=t[i];let n=r[0];for(let s=1;s<r.length;++s){const o=r[s];this.segments.push({p1:n,p2:o,l:0}),n=o}}else{let i=t[0];for(let r=1;r<t.length;++r){const n=t[r];this.segments.push({p1:i,p2:n,l:0}),i=n}}for(let i=0;i<this.segments.length;++i){const{p1:r,p2:n}=this.segments[i],s=Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y));this.segments[i].l=s,this.totalLength+=s,this.countingLengths.push(this.totalLength)}}getRandPos(t){const i=Math.random()*this.totalLength;let r,n;if(this.segments.length===1)r=this.segments[0],n=i;else for(let l=0;l<this.countingLengths.length;++l)if(i<this.countingLengths[l]){r=this.segments[l],n=l===0?i:i-this.countingLengths[l-1];break}n/=r.l||1;const{p1:s,p2:o}=r;t.x=s.x+n*(o.x-s.x),t.y=s.y+n*(o.y-s.y)}}u_.type="polygonalChain";u_.editorConfig=null;class h_{constructor(t){var i;this.order=Wt.Late,this.minStart=t.minStart,this.maxStart=t.maxStart,this.accel=t.accel,this.rotate=!!t.rotate,this.maxSpeed=(i=t.maxSpeed)!==null&&i!==void 0?i:0}initParticles(t){let i=t;for(;i;){const r=Math.random()*(this.maxStart-this.minStart)+this.minStart;i.config.velocity?i.config.velocity.set(r,0):i.config.velocity=new ct(r,0),On(i.rotation,i.config.velocity),i=i.next}}updateParticle(t,i){const r=t.config.velocity,n=r.x,s=r.y;if(r.x+=this.accel.x*i,r.y+=this.accel.y*i,this.maxSpeed){const o=mA(r);o>this.maxSpeed&&gA(r,this.maxSpeed/o)}t.x+=(n+r.x)/2*i,t.y+=(s+r.y)/2*i,this.rotate&&(t.rotation=Math.atan2(r.y,r.x))}}h_.type="moveAcceleration";h_.editorConfig=null;function NL(e){return this.ease&&(e=this.ease(e)),(this.first.next.value-this.first.value)*e+this.first.value}function FL(e){this.ease&&(e=this.ease(e));const t=this.first.value,i=this.first.next.value,r=(i.r-t.r)*e+t.r,n=(i.g-t.g)*e+t.g,s=(i.b-t.b)*e+t.b;return jf(r,n,s)}function LL(e){this.ease&&(e=this.ease(e));let t=this.first,i=t.next;for(;e>i.time;)t=i,i=i.next;return e=(e-t.time)/(i.time-t.time),(i.value-t.value)*e+t.value}function BL(e){this.ease&&(e=this.ease(e));let t=this.first,i=t.next;for(;e>i.time;)t=i,i=i.next;e=(e-t.time)/(i.time-t.time);const r=t.value,n=i.value,s=(n.r-r.r)*e+r.r,o=(n.g-r.g)*e+r.g,l=(n.b-r.b)*e+r.b;return jf(s,o,l)}function UL(e){this.ease&&(e=this.ease(e));let t=this.first;for(;t.next&&e>t.next.time;)t=t.next;return t.value}function zL(e){this.ease&&(e=this.ease(e));let t=this.first;for(;t.next&&e>t.next.time;)t=t.next;const i=t.value;return jf(i.r,i.g,i.b)}class mh{constructor(t=!1){this.first=null,this.isColor=!!t,this.interpolate=null,this.ease=null}reset(t){this.first=t,t.next&&t.next.time>=1?this.interpolate=this.isColor?FL:NL:t.isStepped?this.interpolate=this.isColor?zL:UL:this.interpolate=this.isColor?BL:LL,this.ease=this.first.ease}}class c_{constructor(t){this.order=Wt.Normal,this.list=new mh(!1),this.list.reset(on.createList(t.alpha))}initParticles(t){let i=t;for(;i;)i.alpha=this.list.first.value,i=i.next}updateParticle(t){t.alpha=this.list.interpolate(t.agePercent)}}c_.type="alpha";c_.editorConfig=null;class d_{constructor(t){this.order=Wt.Normal,this.value=t.alpha}initParticles(t){let i=t;for(;i;)i.alpha=this.value,i=i.next}}d_.type="alphaStatic";d_.editorConfig=null;function vA(e){const t=[];for(let i=0;i<e.length;++i){let r=e[i];if(typeof r=="string")t.push($u(r));else if(r instanceof tt)t.push(r);else{let n=r.count||1;for(typeof r.texture=="string"?r=$u(r.texture):r=r.texture;n>0;--n)t.push(r)}}return t}class f_{constructor(t){this.order=Wt.Normal,this.anims=[];for(let i=0;i<t.anims.length;++i){const r=t.anims[i],n=vA(r.textures),s=r.framerate<0?-1:r.framerate>0?r.framerate:60,o={textures:n,duration:s>0?n.length/s:0,framerate:s,loop:s>0?!!r.loop:!1};this.anims.push(o)}}initParticles(t){let i=t;for(;i;){const r=Math.floor(Math.random()*this.anims.length),n=i.config.anim=this.anims[r];i.texture=n.textures[0],i.config.animElapsed=0,n.framerate===-1?(i.config.animDuration=i.maxLife,i.config.animFramerate=n.textures.length/i.maxLife):(i.config.animDuration=n.duration,i.config.animFramerate=n.framerate),i=i.next}}updateParticle(t,i){const r=t.config,n=r.anim;r.animElapsed+=i,r.animElapsed>=r.animDuration&&(r.anim.loop?r.animElapsed=r.animElapsed%r.animDuration:r.animElapsed=r.animDuration-1e-6);const s=r.animElapsed*r.animFramerate+1e-7|0;t.texture=n.textures[s]||n.textures[n.textures.length-1]||tt.EMPTY}}f_.type="animatedRandom";f_.editorConfig=null;class p_{constructor(t){this.order=Wt.Normal;const i=t.anim,r=vA(i.textures),n=i.framerate<0?-1:i.framerate>0?i.framerate:60;this.anim={textures:r,duration:n>0?r.length/n:0,framerate:n,loop:n>0?!!i.loop:!1}}initParticles(t){let i=t;const r=this.anim;for(;i;)i.texture=r.textures[0],i.config.animElapsed=0,r.framerate===-1?(i.config.animDuration=i.maxLife,i.config.animFramerate=r.textures.length/i.maxLife):(i.config.animDuration=r.duration,i.config.animFramerate=r.framerate),i=i.next}updateParticle(t,i){const r=this.anim,n=t.config;n.animElapsed+=i,n.animElapsed>=n.animDuration&&(r.loop?n.animElapsed=n.animElapsed%n.animDuration:n.animElapsed=n.animDuration-1e-6);const s=n.animElapsed*n.animFramerate+1e-7|0;t.texture=r.textures[s]||r.textures[r.textures.length-1]||tt.EMPTY}}p_.type="animatedSingle";p_.editorConfig=null;class m_{constructor(t){this.order=Wt.Normal,this.value=t.blendMode}initParticles(t){let i=t;for(;i;)i.blendMode=OL(this.value),i=i.next}}m_.type="blendMode";m_.editorConfig=null;class g_{constructor(t){this.order=Wt.Spawn,this.spacing=t.spacing*rn,this.start=t.start*rn,this.distance=t.distance}initParticles(t){let i=0,r=t;for(;r;){let n;this.spacing?n=this.start+this.spacing*i:n=Math.random()*Math.PI*2,r.rotation=n,this.distance&&(r.position.x=this.distance,On(n,r.position)),r=r.next,++i}}}g_.type="spawnBurst";g_.editorConfig=null;class y_{constructor(t){this.order=Wt.Normal,this.list=new mh(!0),this.list.reset(on.createList(t.color))}initParticles(t){let i=t;const r=this.list.first.value,n=jf(r.r,r.g,r.b);for(;i;)i.tint=n,i=i.next}updateParticle(t){t.tint=this.list.interpolate(t.agePercent)}}y_.type="color";y_.editorConfig=null;class v_{constructor(t){this.order=Wt.Normal;let i=t.color;i.charAt(0)==="#"?i=i.substr(1):i.indexOf("0x")===0&&(i=i.substr(2)),this.value=parseInt(i,16)}initParticles(t){let i=t;for(;i;)i.tint=this.value,i=i.next}}v_.type="colorStatic";v_.editorConfig=null;class __{constructor(t){this.order=Wt.Normal,this.index=0,this.textures=t.textures.map(i=>typeof i=="string"?$u(i):i)}initParticles(t){let i=t;for(;i;)i.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),i=i.next}}__.type="textureOrdered";__.editorConfig=null;const Zo=new ct,_A=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],HL=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(_A).join("|"),"g");function GL(e){const t=e.match(HL);for(let i=t.length-1;i>=0;--i)_A.indexOf(t[i])>=0&&(t[i]=`Math.${t[i]}`);return e=t.join(""),new Function("x",`return ${e};`)}class x_{constructor(t){var i;if(this.order=Wt.Late,t.path)if(typeof t.path=="function")this.path=t.path;else try{this.path=GL(t.path)}catch{this.path=null}else this.path=r=>r;this.list=new mh(!1),this.list.reset(on.createList(t.speed)),this.minMult=(i=t.minMult)!==null&&i!==void 0?i:1}initParticles(t){let i=t;for(;i;){i.config.initRotation=i.rotation,i.config.initPosition?i.config.initPosition.copyFrom(i.position):i.config.initPosition=new ct(i.x,i.y),i.config.movement=0;const r=Math.random()*(1-this.minMult)+this.minMult;i.config.speedMult=r,i=i.next}}updateParticle(t,i){const r=this.list.interpolate(t.agePercent)*t.config.speedMult;t.config.movement+=r*i,Zo.x=t.config.movement,Zo.y=this.path(Zo.x),On(t.config.initRotation,Zo),t.position.x=t.config.initPosition.x+Zo.x,t.position.y=t.config.initPosition.y+Zo.y}}x_.type="movePath";x_.editorConfig=null;class w_{constructor(){this.order=Wt.Spawn}initParticles(t){}}w_.type="spawnPoint";w_.editorConfig=null;class S_{constructor(t){this.order=Wt.Normal,this.textures=t.textures.map(i=>typeof i=="string"?$u(i):i)}initParticles(t){let i=t;for(;i;){const r=Math.floor(Math.random()*this.textures.length);i.texture=this.textures[r],i=i.next}}}S_.type="textureRandom";S_.editorConfig=null;class b_{constructor(t){this.order=Wt.Normal,this.minStart=t.minStart*rn,this.maxStart=t.maxStart*rn,this.minSpeed=t.minSpeed*rn,this.maxSpeed=t.maxSpeed*rn,this.accel=t.accel*rn}initParticles(t){let i=t;for(;i;)this.minStart===this.maxStart?i.rotation+=this.maxStart:i.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,i.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,i=i.next}updateParticle(t,i){if(this.accel){const r=t.config.rotSpeed;t.config.rotSpeed+=this.accel*i,t.rotation+=(t.config.rotSpeed+r)/2*i}else t.rotation+=t.config.rotSpeed*i}}b_.type="rotation";b_.editorConfig=null;class E_{constructor(t){this.order=Wt.Normal,this.min=t.min*rn,this.max=t.max*rn}initParticles(t){let i=t;for(;i;)this.min===this.max?i.rotation+=this.max:i.rotation+=Math.random()*(this.max-this.min)+this.min,i=i.next}}E_.type="rotationStatic";E_.editorConfig=null;class T_{constructor(t){this.order=Wt.Late+1,this.rotation=(t.rotation||0)*rn}initParticles(t){let i=t;for(;i;)i.rotation=this.rotation,i=i.next}}T_.type="noRotation";T_.editorConfig=null;class C_{constructor(t){var i;this.order=Wt.Normal,this.list=new mh(!1),this.list.reset(on.createList(t.scale)),this.minMult=(i=t.minMult)!==null&&i!==void 0?i:1}initParticles(t){let i=t;for(;i;){const r=Math.random()*(1-this.minMult)+this.minMult;i.config.scaleMult=r,i.scale.x=i.scale.y=this.list.first.value*r,i=i.next}}updateParticle(t){t.scale.x=t.scale.y=this.list.interpolate(t.agePercent)*t.config.scaleMult}}C_.type="scale";C_.editorConfig=null;class P_{constructor(t){this.order=Wt.Normal,this.min=t.min,this.max=t.max}initParticles(t){let i=t;for(;i;){const r=Math.random()*(this.max-this.min)+this.min;i.scale.x=i.scale.y=r,i=i.next}}}P_.type="scaleStatic";P_.editorConfig=null;class Lr{constructor(t){this.order=Wt.Spawn;const i=Lr.shapes[t.type];if(!i)throw new Error(`No shape found with type '${t.type}'`);this.shape=new i(t.data)}static registerShape(t,i){Lr.shapes[i||t.type]=t}initParticles(t){let i=t;for(;i;)this.shape.getRandPos(i),i=i.next}}Lr.type="spawnShape";Lr.editorConfig=null;Lr.shapes={};Lr.registerShape(u_);Lr.registerShape(l_);Lr.registerShape(Vf);Lr.registerShape(Vf,"circle");class A_{constructor(t){this.order=Wt.Normal,this.texture=typeof t.texture=="string"?$u(t.texture):t.texture}initParticles(t){let i=t;for(;i;)i.texture=this.texture,i=i.next}}A_.type="textureSingle";A_.editorConfig=null;class I_{constructor(t){var i;this.order=Wt.Late,this.list=new mh(!1),this.list.reset(on.createList(t.speed)),this.minMult=(i=t.minMult)!==null&&i!==void 0?i:1}initParticles(t){let i=t;for(;i;){const r=Math.random()*(1-this.minMult)+this.minMult;i.config.speedMult=r,i.config.velocity?i.config.velocity.set(this.list.first.value*r,0):i.config.velocity=new ct(this.list.first.value*r,0),On(i.rotation,i.config.velocity),i=i.next}}updateParticle(t,i){const r=this.list.interpolate(t.agePercent)*t.config.speedMult,n=t.config.velocity;DL(n),gA(n,r),t.x+=n.x*i,t.y+=n.y*i}}I_.type="moveSpeed";I_.editorConfig=null;class R_{constructor(t){this.order=Wt.Late,this.min=t.min,this.max=t.max}initParticles(t){let i=t;for(;i;){const r=Math.random()*(this.max-this.min)+this.min;i.config.velocity?i.config.velocity.set(r,0):i.config.velocity=new ct(r,0),On(i.rotation,i.config.velocity),i=i.next}}updateParticle(t,i){const r=t.config.velocity;t.x+=r.x*i,t.y+=r.y*i}}R_.type="moveSpeedStatic";R_.editorConfig=null;ee.registerBehavior(h_);ee.registerBehavior(c_);ee.registerBehavior(d_);ee.registerBehavior(f_);ee.registerBehavior(p_);ee.registerBehavior(m_);ee.registerBehavior(g_);ee.registerBehavior(y_);ee.registerBehavior(v_);ee.registerBehavior(__);ee.registerBehavior(x_);ee.registerBehavior(w_);ee.registerBehavior(S_);ee.registerBehavior(b_);ee.registerBehavior(E_);ee.registerBehavior(T_);ee.registerBehavior(C_);ee.registerBehavior(P_);ee.registerBehavior(Lr);ee.registerBehavior(A_);ee.registerBehavior(I_);ee.registerBehavior(R_);const xA=Ar.PixiComponent("Emitter",{create(){return new Ee},applyProps(e,t,i){const{config:r,onCreate:n}=i;let s=this._emitter;if(!s){s=new ee(e,r);let o=Date.now();const l=()=>{s.raf=requestAnimationFrame(l);const h=Date.now();s.update((h-o)*.001),o=h};s.emit=!0,this._emitter=s,n==null||n(s),l()}},willUnmount(){const e=this._emitter;e&&(e.emit=!1,cancelAnimationFrame(e.raf))}}),mb=e=>{let t;const i=new Set,r=(h,c)=>{const f=typeof h=="function"?h(t):h;if(!Object.is(f,t)){const m=t;t=c??typeof f!="object"?f:Object.assign({},t,f),i.forEach(p=>p(t,m))}},n=()=>t,l={setState:r,getState:n,subscribe:h=>(i.add(h),()=>i.delete(h)),destroy:()=>{i.clear()}};return t=e(r,n,l),l},WL=e=>e?mb(e):mb;var wA={exports:{}},SA={},bA={exports:{}},EA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=ne;function $L(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jL=typeof Object.is=="function"?Object.is:$L,VL=Va.useState,XL=Va.useEffect,YL=Va.useLayoutEffect,qL=Va.useDebugValue;function QL(e,t){var i=t(),r=VL({inst:{value:i,getSnapshot:t}}),n=r[0].inst,s=r[1];return YL(function(){n.value=i,n.getSnapshot=t,Ag(n)&&s({inst:n})},[e,i,t]),XL(function(){return Ag(n)&&s({inst:n}),e(function(){Ag(n)&&s({inst:n})})},[e]),qL(i),i}function Ag(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!jL(e,i)}catch{return!0}}function KL(e,t){return t()}var ZL=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?KL:QL;EA.useSyncExternalStore=Va.useSyncExternalStore!==void 0?Va.useSyncExternalStore:ZL;bA.exports=EA;var JL=bA.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xf=ne,tB=JL;function eB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iB=typeof Object.is=="function"?Object.is:eB,rB=tB.useSyncExternalStore,nB=Xf.useRef,sB=Xf.useEffect,oB=Xf.useMemo,aB=Xf.useDebugValue;SA.useSyncExternalStoreWithSelector=function(e,t,i,r,n){var s=nB(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=oB(function(){function h(v){if(!c){if(c=!0,f=v,v=r(v),n!==void 0&&o.hasValue){var _=o.value;if(n(_,v))return m=_}return m=v}if(_=m,iB(f,v))return _;var E=r(v);return n!==void 0&&n(_,E)?_:(f=v,m=E)}var c=!1,f,m,p=i===void 0?null:i;return[function(){return h(t())},p===null?void 0:function(){return h(p())}]},[t,i,r,n]);var l=rB(e,s[0],s[1]);return sB(function(){o.hasValue=!0,o.value=l},[l]),aB(l),l};wA.exports=SA;var lB=wA.exports;const uB=qu(lB),{useSyncExternalStoreWithSelector:hB}=uB;function cB(e,t=e.getState,i){const r=hB(e.subscribe,e.getState,e.getServerState||e.getState,t,i);return ne.useDebugValue(r),r}const gb=e=>{const t=typeof e=="function"?WL(e):e,i=(r,n)=>cB(t,r,n);return Object.assign(i,t),i},dB=e=>e?gb(e):gb;var TA=Symbol.for("immer-nothing"),yb=Symbol.for("immer-draftable"),Di=Symbol.for("immer-state");function Tr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xa=Object.getPrototypeOf;function Ya(e){return!!e&&!!e[Di]}function To(e){var t;return e?CA(e)||Array.isArray(e)||!!e[yb]||!!((t=e.constructor)!=null&&t[yb])||qf(e)||Qf(e):!1}var fB=Object.prototype.constructor.toString();function CA(e){if(!e||typeof e!="object")return!1;const t=Xa(e);if(t===null)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===fB}function ju(e,t){Yf(e)===0?Object.entries(e).forEach(([i,r])=>{t(i,r,e)}):e.forEach((i,r)=>t(r,i,e))}function Yf(e){const t=e[Di];return t?t.type_:Array.isArray(e)?1:qf(e)?2:Qf(e)?3:0}function uv(e,t){return Yf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function PA(e,t,i){const r=Yf(e);r===2?e.set(t,i):r===3?e.add(i):e[t]=i}function pB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function qf(e){return e instanceof Map}function Qf(e){return e instanceof Set}function io(e){return e.copy_||e.base_}function hv(e,t){if(qf(e))return new Map(e);if(Qf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&CA(e))return Xa(e)?{...e}:Object.assign(Object.create(null),e);const i=Object.getOwnPropertyDescriptors(e);delete i[Di];let r=Reflect.ownKeys(i);for(let n=0;n<r.length;n++){const s=r[n],o=i[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Xa(e),i)}function M_(e,t=!1){return Kf(e)||Ya(e)||!To(e)||(Yf(e)>1&&(e.set=e.add=e.clear=e.delete=mB),Object.freeze(e),t&&ju(e,(i,r)=>M_(r,!0))),e}function mB(){Tr(2)}function Kf(e){return Object.isFrozen(e)}var gB={};function Co(e){const t=gB[e];return t||Tr(0,e),t}var Vu;function AA(){return Vu}function yB(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function vb(e,t){t&&(Co("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cv(e){dv(e),e.drafts_.forEach(vB),e.drafts_=null}function dv(e){e===Vu&&(Vu=e.parent_)}function _b(e){return Vu=yB(Vu,e)}function vB(e){const t=e[Di];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function xb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[Di].modified_&&(cv(t),Tr(4)),To(e)&&(e=uf(t,e),t.parent_||hf(t,e)),t.patches_&&Co("Patches").generateReplacementPatches_(i[Di].base_,e,t.patches_,t.inversePatches_)):e=uf(t,i,[]),cv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==TA?e:void 0}function uf(e,t,i){if(Kf(t))return t;const r=t[Di];if(!r)return ju(t,(n,s)=>wb(e,r,t,n,s,i)),t;if(r.scope_!==e)return t;if(!r.modified_)return hf(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const n=r.copy_;let s=n,o=!1;r.type_===3&&(s=new Set(n),n.clear(),o=!0),ju(s,(l,h)=>wb(e,r,n,l,h,i,o)),hf(e,n,!1),i&&e.patches_&&Co("Patches").generatePatches_(r,i,e.patches_,e.inversePatches_)}return r.copy_}function wb(e,t,i,r,n,s,o){if(Ya(n)){const l=s&&t&&t.type_!==3&&!uv(t.assigned_,r)?s.concat(r):void 0,h=uf(e,n,l);if(PA(i,r,h),Ya(h))e.canAutoFreeze_=!1;else return}else o&&i.add(n);if(To(n)&&!Kf(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;uf(e,n),(!t||!t.scope_.parent_)&&hf(e,n)}}function hf(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&M_(t,i)}function _B(e,t){const i=Array.isArray(e),r={type_:i?1:0,scope_:t?t.scope_:AA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=r,s=k_;i&&(n=[r],s=Xu);const{revoke:o,proxy:l}=Proxy.revocable(n,s);return r.draft_=l,r.revoke_=o,l}var k_={get(e,t){if(t===Di)return e;const i=io(e);if(!uv(i,t))return xB(e,i,t);const r=i[t];return e.finalized_||!To(r)?r:r===Ig(e.base_,t)?(Rg(e),e.copy_[t]=pv(r,e)):r},has(e,t){return t in io(e)},ownKeys(e){return Reflect.ownKeys(io(e))},set(e,t,i){const r=IA(io(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,i),!0;if(!e.modified_){const n=Ig(io(e),t),s=n==null?void 0:n[Di];if(s&&s.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(pB(i,n)&&(i!==void 0||uv(e.base_,t)))return!0;Rg(e),fv(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ig(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Rg(e),fv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=io(e),r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:i[t]}},defineProperty(){Tr(11)},getPrototypeOf(e){return Xa(e.base_)},setPrototypeOf(){Tr(12)}},Xu={};ju(k_,(e,t)=>{Xu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Xu.deleteProperty=function(e,t){return Xu.set.call(this,e,t,void 0)};Xu.set=function(e,t,i){return k_.set.call(this,e[0],t,i,e[0])};function Ig(e,t){const i=e[Di];return(i?io(i):e)[t]}function xB(e,t,i){var n;const r=IA(t,i);return r?"value"in r?r.value:(n=r.get)==null?void 0:n.call(e.draft_):void 0}function IA(e,t){if(!(t in e))return;let i=Xa(e);for(;i;){const r=Object.getOwnPropertyDescriptor(i,t);if(r)return r;i=Xa(i)}}function fv(e){e.modified_||(e.modified_=!0,e.parent_&&fv(e.parent_))}function Rg(e){e.copy_||(e.copy_=hv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,i,r)=>{if(typeof t=="function"&&typeof i!="function"){const s=i;i=t;const o=this;return function(h=s,...c){return o.produce(h,f=>i.call(this,f,...c))}}typeof i!="function"&&Tr(6),r!==void 0&&typeof r!="function"&&Tr(7);let n;if(To(t)){const s=_b(this),o=pv(t,void 0);let l=!0;try{n=i(o),l=!1}finally{l?cv(s):dv(s)}return vb(s,r),xb(n,s)}else if(!t||typeof t!="object"){if(n=i(t),n===void 0&&(n=t),n===TA&&(n=void 0),this.autoFreeze_&&M_(n,!0),r){const s=[],o=[];Co("Patches").generateReplacementPatches_(t,n,s,o),r(s,o)}return n}else Tr(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,h=>t(h,...l));let r,n;return[this.produce(t,i,(o,l)=>{r=o,n=l}),r,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){To(e)||Tr(8),Ya(e)&&(e=SB(e));const t=_b(this),i=pv(e,void 0);return i[Di].isManual_=!0,dv(t),i}finishDraft(e,t){const i=e&&e[Di];(!i||!i.isManual_)&&Tr(9);const{scope_:r}=i;return vb(r,t),xb(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const n=t[i];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}i>-1&&(t=t.slice(i+1));const r=Co("Patches").applyPatches_;return Ya(e)?r(e,t):this.produce(e,n=>r(n,t))}};function pv(e,t){const i=qf(e)?Co("MapSet").proxyMap_(e,t):Qf(e)?Co("MapSet").proxySet_(e,t):_B(e,t);return(t?t.scope_:AA()).drafts_.push(i),i}function SB(e){return Ya(e)||Tr(10,e),RA(e)}function RA(e){if(!To(e)||Kf(e))return e;const t=e[Di];let i;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=hv(e,t.scope_.immer_.useStrictShallowCopy_)}else i=hv(e,!0);return ju(i,(r,n)=>{PA(i,r,RA(n))}),t&&(t.finalized_=!1),i}var Oi=new wB,Sb=Oi.produce;Oi.produceWithPatches.bind(Oi);Oi.setAutoFreeze.bind(Oi);Oi.setUseStrictShallowCopy.bind(Oi);Oi.applyPatches.bind(Oi);Oi.createDraft.bind(Oi);Oi.finishDraft.bind(Oi);const bb=.06;let MA;function bB(e){return MA=e,e}function Br(){return MA}let EB=0;const mv=class extends Ur{constructor(e){super(),this.id=EB++,this.init(e)}set(e,t){if(this[e]===void 0)throw new Error(`Property with name ${e} does not exist.`);switch(e){case"speed":this.speed=t;break;case"volume":this.volume=t;break;case"paused":this.paused=t;break;case"loop":this.loop=t;break;case"muted":this.muted=t;break}return this}get progress(){const{currentTime:e}=this._source;return e/this._duration}get paused(){return this._paused}set paused(e){this._paused=e,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(e){this._playing=!1,this._duration=e.source.duration;const t=this._source=e.source.cloneNode(!1);t.src=e.parent.url,t.onplay=this._onPlay.bind(this),t.onpause=this._onPause.bind(this),e.context.on("refresh",this.refresh,this),e.context.on("refreshPaused",this.refreshPaused,this),this._media=e}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(e){this._speed=e,this.refresh()}get volume(){return this._volume}set volume(e){this._volume=e,this.refresh()}get loop(){return this._loop}set loop(e){this._loop=e,this.refresh()}get muted(){return this._muted}set muted(e){this._muted=e,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(e){console.warn("HTML Audio does not support filters")}refresh(){const e=this._media.context,t=this._media.parent;this._source.loop=this._loop||t.loop;const i=e.volume*(e.muted?0:1),r=t.volume*(t.muted?0:1),n=this._volume*(this._muted?0:1);this._source.volume=n*i*r,this._source.playbackRate=this._speed*e.speed*t.speed}refreshPaused(){const e=this._media.context,t=this._media.parent,i=this._paused||t.paused||e.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))}play(e){const{start:t,end:i,speed:r,loop:n,volume:s,muted:o}=e;i&&console.assert(i>t,"End time is before start time"),this._speed=r,this._volume=s,this._loop=!!n,this._muted=o,this.refresh(),this.loop&&i!==null&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=t,this._end=i||this._duration,this._start=Math.max(0,this._start-mv.PADDING),this._end=Math.min(this._end+mv.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=t,this._source.onloadedmetadata=null,this.emit("progress",t,this._duration),zt.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){zt.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){zt.shared.remove(this._onUpdate,this),this.removeAllListeners();const e=this._source;e&&(e.onended=null,e.onplay=null,e.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let kA=mv;kA.PADDING=.1;class TB extends Ur{init(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)}create(){return new kA(this)}get isPlayable(){return!!this._source&&this._source.readyState===4}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(t){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(t){const i=this._source,r=this.parent;if(i.readyState===4){r.isLoaded=!0;const h=r.autoPlayStart();t&&setTimeout(()=>{t(null,r,h)},0);return}if(!r.url){t(new Error("sound.url or sound.source must be set"));return}i.src=r.url;const n=()=>{l(),r.isLoaded=!0;const h=r.autoPlayStart();t&&t(null,r,h)},s=()=>{l(),t&&t(new Error("Sound loading has been aborted"))},o=()=>{l();const h=`Failed to load audio element (code: ${i.error.code})`;t?t(new Error(h)):console.error(h)},l=()=>{i.removeEventListener("canplaythrough",n),i.removeEventListener("load",n),i.removeEventListener("abort",s),i.removeEventListener("error",o)};i.addEventListener("canplaythrough",n,!1),i.addEventListener("load",n,!1),i.addEventListener("abort",s,!1),i.addEventListener("error",o,!1),i.load()}}class CB{constructor(t,i){this.parent=t,Object.assign(this,i),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const cf=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],PB=["audio/mpeg","audio/ogg"],gv={};function AB(e){const t={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"',...e||{}},i=document.createElement("audio"),r={},n=/^no$/;cf.forEach(s=>{const o=i.canPlayType(`audio/${s}`).replace(n,""),l=t[s]?i.canPlayType(t[s]).replace(n,""):"";r[s]=!!o||!!l}),Object.assign(gv,r)}AB();class Ir{static setParamValue(t,i){if(t.setValueAtTime){const r=Br().context;t.setValueAtTime(i,r.audioContext.currentTime)}else t.value=i;return i}}let IB=0;class RB extends Ur{constructor(t){super(),this.id=IB++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(t)}set(t,i){if(this[t]===void 0)throw new Error(`Property with name ${t} does not exist.`);switch(t){case"speed":this.speed=i;break;case"volume":this.volume=i;break;case"muted":this.muted=i;break;case"loop":this.loop=i;break;case"paused":this.paused=i;break}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(t){this._speed=t,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(t){this._volume=t,this.refresh()}get muted(){return this._muted}set muted(t){this._muted=t,this.refresh()}get loop(){return this._loop}set loop(t){this._loop=t,this.refresh()}get filters(){return this._filters}set filters(t){var i;this._filters&&((i=this._filters)==null||i.filter(r=>r).forEach(r=>r.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=t!=null&&t.length?t.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const t=this._media.context,i=this._media.parent;this._source.loop=this._loop||i.loop;const r=t.volume*(t.muted?0:1),n=i.volume*(i.muted?0:1),s=this._volume*(this._muted?0:1);Ir.setParamValue(this._gain.gain,s*n*r),Ir.setParamValue(this._source.playbackRate,this._speed*i.speed*t.speed),this.applyFilters()}applyFilters(){var t;if((t=this._filters)!=null&&t.length){this._source.disconnect();let i=this._source;this._filters.forEach(r=>{i.connect(r.destination),i=r}),i.connect(this._gain)}}refreshPaused(){const t=this._media.context,i=this._media.parent,r=this._paused||i.paused||t.paused;r!==this._pausedReal&&(this._pausedReal=r,r?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",r))}play(t){const{start:i,end:r,speed:n,loop:s,volume:o,muted:l,filters:h}=t;r&&console.assert(r>i,"End time is before start time"),this._paused=!1;const{source:c,gain:f}=this._media.nodes.cloneBufferSource();this._source=c,this._gain=f,this._speed=n,this._volume=o,this._loop=!!s,this._muted=l,this._filters=h,this.refresh();const m=this._source.buffer.duration;this._duration=m,this._end=r,this._lastUpdate=this._now(),this._elapsed=i,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=r,this._source.loopStart=i,this._source.start(0,i)):r?this._source.start(0,i,r-i):this._source.start(0,i),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(t){zt.shared.remove(this._updateListener,this),t&&zt.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(t){this._paused=t,this.refreshPaused()}destroy(){var t;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),(t=this._filters)==null||t.forEach(i=>i.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(t=!1){if(this._source){const i=this._now(),r=i-this._lastUpdate;if(r>0||t){const n=this._source.playbackRate.value;this._elapsed+=r*n,this._lastUpdate=i;const s=this._duration;let o;if(this._source.loopStart){const l=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%l)/s}else o=this._elapsed%s/s;this._progress=o,this.emit("progress",this._progress,s)}}}init(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class DA{constructor(t,i){this._output=i,this._input=t}get destination(){return this._input}get filters(){return this._filters}set filters(t){if(this._filters&&(this._filters.forEach(i=>{i&&i.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();let i=null;t.forEach(r=>{i===null?this._input.connect(r.destination):i.connect(r.destination),i=r}),i.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const OA=class extends DA{constructor(e){const t=e.audioContext,i=t.createBufferSource(),r=t.createGain(),n=t.createAnalyser();i.connect(n),n.connect(r),r.connect(e.destination),super(n,r),this.context=e,this.bufferSource=i,this.gain=r,this.analyser=n}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(OA.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const e=this.bufferSource,t=this.context.audioContext.createBufferSource();t.buffer=e.buffer,Ir.setParamValue(t.playbackRate,e.playbackRate.value),t.loop=e.loop;const i=this.context.audioContext.createGain();return t.connect(i),i.connect(this.destination),{source:t,gain:i}}get bufferSize(){return this.script.bufferSize}};let NA=OA;NA.BUFFER_SIZE=0;class MB{init(t){this.parent=t,this._nodes=new NA(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(t){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",t)}this._source=null,this.source=null}create(){return new RB(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(t){this._nodes.filters=t}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(t){this._source.buffer=t}get nodes(){return this._nodes}load(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t?t(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(t){const i=this.parent.url,r=await nt.ADAPTER.fetch(i);this._decode(await r.arrayBuffer(),t)}_decode(t,i){const r=(n,s)=>{if(n)i&&i(n);else{this.parent.isLoaded=!0,this.buffer=s;const o=this.parent.autoPlayStart();i&&i(null,this.parent,o)}};t instanceof AudioBuffer?r(null,t):this.parent.context.decode(t,r)}}const oa=class{static from(e){let t={};typeof e=="string"?t.url=e:e instanceof ArrayBuffer||e instanceof AudioBuffer||e instanceof HTMLAudioElement?t.source=e:Array.isArray(e)?t.url=e:t=e,t={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...t},Object.freeze(t);const i=Br().useLegacy?new TB:new MB;return new oa(i,t)}constructor(e,t){this.media=e,this.options=t,this._instances=[],this._sprites={},this.media.init(this);const i=t.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=t.autoPlay,this.singleInstance=t.singleInstance,this.preload=t.preload||this.autoPlay,this.url=Array.isArray(t.url)?this.preferUrl(t.url):t.url,this.speed=t.speed,this.volume=t.volume,this.loop=t.loop,t.sprites&&this.addSprites(t.sprites),this.preload&&this._preload(t.loaded)}preferUrl(e){const[{url:t}]=e.map(i=>({url:i,ext:ye.extname(i).slice(1)})).sort((i,r)=>cf.indexOf(i.ext)-cf.indexOf(r.ext));return t}get context(){return Br().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(e){this._paused=e,this.refreshPaused()}get speed(){return this._speed}set speed(e){this._speed=e,this.refresh()}get filters(){return this.media.filters}set filters(e){this.media.filters=e}addSprites(e,t){if(typeof e=="object"){const r={};for(const n in e)r[n]=this.addSprites(n,e[n]);return r}console.assert(!this._sprites[e],`Alias ${e} is already taken`);const i=new CB(this,t);return this._sprites[e]=i,i}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(e){if(e){const t=this._sprites[e];t!==void 0&&(t.destroy(),delete this._sprites[e])}else for(const t in this._sprites)this.removeSprites(t);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let e=this._instances.length-1;e>=0;e--)this._instances[e].stop();return this}play(e,t){let i;if(typeof e=="string"?i={sprite:e,loop:this.loop,complete:t}:typeof e=="function"?(i={},i.complete=e):i=e,i={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...i||{}},i.sprite){const n=i.sprite;console.assert(!!this._sprites[n],`Alias ${n} is not available`);const s=this._sprites[n];i.start=s.start+(i.start||0),i.end=s.end,i.speed=s.speed||1,i.loop=s.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return this._preloadQueue?new Promise(n=>{this._preloadQueue.push(()=>{n(this.play(i))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=i,new Promise((n,s)=>{this._preload((o,l,h)=>{this._preloadQueue.forEach(c=>c()),this._preloadQueue=null,o?s(o):(i.loaded&&i.loaded(o,l,h),n(h))})}));(this.singleInstance||i.singleInstance)&&this._removeInstances();const r=this._createInstance();return this._instances.push(r),this.isPlaying=!0,r.once("end",()=>{i.complete&&i.complete(this),this._onComplete(r)}),r.once("stop",()=>{this._onComplete(r)}),r.play(i),r}refresh(){const e=this._instances.length;for(let t=0;t<e;t++)this._instances[t].refresh()}refreshPaused(){const e=this._instances.length;for(let t=0;t<e;t++)this._instances[t].refreshPaused()}get volume(){return this._volume}set volume(e){this._volume=e,this.refresh()}get muted(){return this._muted}set muted(e){this._muted=e,this.refresh()}get loop(){return this._loop}set loop(e){this._loop=e,this.refresh()}_preload(e){this.media.load(e)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let e;return this.autoPlay&&(e=this.play(this._autoPlayOptions)),e}_removeInstances(){for(let e=this._instances.length-1;e>=0;e--)this._poolInstance(this._instances[e]);this._instances.length=0}_onComplete(e){if(this._instances){const t=this._instances.indexOf(e);t>-1&&this._instances.splice(t,1),this.isPlaying=this._instances.length>0}this._poolInstance(e)}_createInstance(){if(oa._pool.length>0){const e=oa._pool.pop();return e.init(this.media),e}return this.media.create()}_poolInstance(e){e.destroy(),oa._pool.indexOf(e)<0&&oa._pool.push(e)}};let df=oa;df._pool=[];class kB extends Ur{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(t){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}class Yu extends DA{constructor(){const t=window,i=new Yu.AudioContext,r=i.createDynamicsCompressor(),n=i.createAnalyser();n.connect(r),r.connect(i.destination),super(n,r),this.autoPause=!0,this._ctx=i,this._offlineCtx=new Yu.OfflineAudioContext(1,2,t.OfflineAudioContext?Math.max(8e3,Math.min(96e3,i.sampleRate)):44100),this.compressor=r,this.analyser=n,this.events=new Ur,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked=i.state==="suspended"&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){const t=this._ctx.state;(t==="suspended"||t==="interrupted"||!this._locked)&&(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){!this._locked&&this.autoPause&&(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused())}_unlock(){this._locked&&(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),t.context.state==="suspended"&&t.context.resume()}static get AudioContext(){const t=window;return t.AudioContext||t.webkitAudioContext||null}static get OfflineAudioContext(){const t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null}destroy(){super.destroy();const t=this._ctx;typeof t.close<"u"&&t.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(t){t&&this._ctx.state==="running"?this._ctx.suspend():!t&&this._ctx.state==="suspended"&&this._ctx.resume(),this._paused=t}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(t,i){const r=s=>{i(new Error((s==null?void 0:s.message)||"Unable to decode file"))},n=this._offlineCtx.decodeAudioData(t,s=>{i(null,s)},r);n&&n.catch(r)}}class DB{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new Yu),this._htmlAudioContext=new kB,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(t){this.useLegacy||(this._context.filters=t)}get supported(){return Yu.AudioContext!==null}add(t,i){if(typeof t=="object"){const s={};for(const o in t){const l=this._getOptions(t[o],i);s[o]=this.add(o,l)}return s}if(console.assert(!this._sounds[t],`Sound with alias ${t} already exists.`),i instanceof df)return this._sounds[t]=i,i;const r=this._getOptions(i),n=df.from(r);return this._sounds[t]=n,n}_getOptions(t,i){let r;return typeof t=="string"?r={url:t}:Array.isArray(t)?r={url:t}:t instanceof ArrayBuffer||t instanceof AudioBuffer||t instanceof HTMLAudioElement?r={source:t}:r=t,r={...r,...i||{}},r}get useLegacy(){return this._useLegacy}set useLegacy(t){this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(t){this._webAudioContext.autoPause=!t}remove(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this}get volumeAll(){return this._context.volume}set volumeAll(t){this._context.volume=t,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(t){this._context.speed=t,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this}stopAll(){for(const t in this._sounds)this._sounds[t].stop();return this}exists(t,i=!1){const r=!!this._sounds[t];return i&&console.assert(r,`No sound matching alias '${t}'.`),r}isPlaying(){for(const t in this._sounds)if(this._sounds[t].isPlaying)return!0;return!1}find(t){return this.exists(t,!0),this._sounds[t]}play(t,i){return this.find(t).play(i)}stop(t){return this.find(t).stop()}pause(t){return this.find(t).pause()}resume(t){return this.find(t).resume()}volume(t,i){const r=this.find(t);return i!==void 0&&(r.volume=i),r.volume}speed(t,i){const r=this.find(t);return i!==void 0&&(r.speed=i),r.speed}duration(t){return this.find(t).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}}class D_{constructor(t,i){this.init(t,i)}init(t,i){this.destination=t,this.source=i||t}connect(t){var i;(i=this.source)==null||i.connect(t)}disconnect(){var t;(t=this.source)==null||t.disconnect()}destroy(){this.disconnect(),this.destination=null,this.source=null}}const Nt=class extends D_{constructor(e=0,t=0,i=0,r=0,n=0,s=0,o=0,l=0,h=0,c=0){let f=[];const m=[{f:Nt.F32,type:"lowshelf",gain:e},{f:Nt.F64,type:"peaking",gain:t},{f:Nt.F125,type:"peaking",gain:i},{f:Nt.F250,type:"peaking",gain:r},{f:Nt.F500,type:"peaking",gain:n},{f:Nt.F1K,type:"peaking",gain:s},{f:Nt.F2K,type:"peaking",gain:o},{f:Nt.F4K,type:"peaking",gain:l},{f:Nt.F8K,type:"peaking",gain:h},{f:Nt.F16K,type:"highshelf",gain:c}];Br().useLegacy||(f=m.map(p=>{const v=Br().context.audioContext.createBiquadFilter();return v.type=p.type,Ir.setParamValue(v.Q,1),v.frequency.value=p.f,Ir.setParamValue(v.gain,p.gain),v})),super(f[0],f[f.length-1]),this.bands=f,this.bandsMap={};for(let p=0;p<this.bands.length;p++){const v=this.bands[p];p>0&&this.bands[p-1].connect(v),this.bandsMap[v.frequency.value]=v}}setGain(e,t=0){if(!this.bandsMap[e])throw new Error(`No band found for frequency ${e}`);Ir.setParamValue(this.bandsMap[e].gain,t)}getGain(e){if(!this.bandsMap[e])throw new Error(`No band found for frequency ${e}`);return this.bandsMap[e].gain.value}set f32(e){this.setGain(Nt.F32,e)}get f32(){return this.getGain(Nt.F32)}set f64(e){this.setGain(Nt.F64,e)}get f64(){return this.getGain(Nt.F64)}set f125(e){this.setGain(Nt.F125,e)}get f125(){return this.getGain(Nt.F125)}set f250(e){this.setGain(Nt.F250,e)}get f250(){return this.getGain(Nt.F250)}set f500(e){this.setGain(Nt.F500,e)}get f500(){return this.getGain(Nt.F500)}set f1k(e){this.setGain(Nt.F1K,e)}get f1k(){return this.getGain(Nt.F1K)}set f2k(e){this.setGain(Nt.F2K,e)}get f2k(){return this.getGain(Nt.F2K)}set f4k(e){this.setGain(Nt.F4K,e)}get f4k(){return this.getGain(Nt.F4K)}set f8k(e){this.setGain(Nt.F8K,e)}get f8k(){return this.getGain(Nt.F8K)}set f16k(e){this.setGain(Nt.F16K,e)}get f16k(){return this.getGain(Nt.F16K)}reset(){this.bands.forEach(e=>{Ir.setParamValue(e.gain,0)})}destroy(){this.bands.forEach(e=>{e.disconnect()}),this.bands=null,this.bandsMap=null}};let mn=Nt;mn.F32=32;mn.F64=64;mn.F125=125;mn.F250=250;mn.F500=500;mn.F1K=1e3;mn.F2K=2e3;mn.F4K=4e3;mn.F8K=8e3;mn.F16K=16e3;class FA extends D_{constructor(t=3,i=2,r=!1){super(null),this._seconds=this._clamp(t,1,50),this._decay=this._clamp(i,0,100),this._reverse=r,this._rebuild()}_clamp(t,i,r){return Math.min(r,Math.max(i,t))}get seconds(){return this._seconds}set seconds(t){this._seconds=this._clamp(t,1,50),this._rebuild()}get decay(){return this._decay}set decay(t){this._decay=this._clamp(t,0,100),this._rebuild()}get reverse(){return this._reverse}set reverse(t){this._reverse=t,this._rebuild()}_rebuild(){if(Br().useLegacy)return;const{audioContext:t}=Br().context,i=t.sampleRate,r=i*this._seconds,n=t.createBuffer(2,r,i),s=n.getChannelData(0),o=n.getChannelData(1);let l;for(let c=0;c<r;c++)l=this._reverse?r-c:c,s[c]=(Math.random()*2-1)*Math.pow(1-l/r,this._decay),o[c]=(Math.random()*2-1)*Math.pow(1-l/r,this._decay);const h=t.createConvolver();h.buffer=n,this.init(h)}}class LA extends D_{constructor(){let t,i;if(!Br().useLegacy){const{audioContext:r}=Br().context,n=r.createBiquadFilter(),s=r.createBiquadFilter(),o=r.createBiquadFilter(),l=r.createBiquadFilter();n.type="lowpass",Ir.setParamValue(n.frequency,2e3),s.type="lowpass",Ir.setParamValue(s.frequency,2e3),o.type="highpass",Ir.setParamValue(o.frequency,500),l.type="highpass",Ir.setParamValue(l.frequency,500),n.connect(s),s.connect(o),o.connect(l),t=n,i=l}super(t,i)}}const Eb=e=>{var i;const t=e.src;return((i=e==null?void 0:e.alias)==null?void 0:i[0])??ye.basename(t,ye.extname(t))},OB={extension:st.Asset,detection:{test:async()=>!0,add:async e=>[...e,...cf.filter(t=>gv[t])],remove:async e=>e.filter(t=>e.includes(t))},loader:{extension:{type:[st.LoadParser],priority:ur.High},test(e){const t=ye.extname(e).slice(1);return!!gv[t]||PB.some(i=>e.startsWith(`data:${i}`))},async load(e,t){const i=await new Promise((r,n)=>df.from({...t.data,url:e,preload:!0,loaded(s,o){var l,h;s?n(s):r(o),(h=(l=t.data)==null?void 0:l.loaded)==null||h.call(l,s,o)}}));return Br().add(Eb(t),i),i},async unload(e,t){Br().remove(Eb(t))}}};dt.add(OB);const qa=bB(new DB),Mn=dB((e,t)=>({WEIGHTS:{PLAYER_ATTRACTION:10,CENTER_OF_SCREEN_ATTRACTION:1,ATTRACTION_RADIUS:300,FORCE_RADIUS:400,COHESION:5,ALIGNMENT:5,SEPARATION:100,HIGH_SPEED_THRESHOLD:500},player:{position:{x:400,y:270},velocity:{x:0,y:0},lastVelocity:{x:0,y:0},acceleration:0,destination:{x:400,y:270},speedBoost:1,rotation:0,torque:0},setPlayer:i=>e(Sb(r=>{i(r.player)})),birds:[],setBirds:i=>e(Sb(r=>{i(r.birds)})),updatePlayer:i=>{var E;const{player:r,setPlayer:n,WEIGHTS:s}=t(),{position:o,destination:l,lastVelocity:h}=r,c={x:l.x-o.x,y:l.y-o.y},f=Math.sqrt(Math.pow(c.x,2)+Math.pow(c.y,2)),m=qa.find("fan_loop");m.volume=.1+f/1e3*.4,m.speed=f/1e3,c.x/=f,c.y/=f;const p={x:h.x*.97+c.x*.03,y:h.y*.97+c.y*.03};Math.sqrt(Math.pow(p.x,2)+Math.pow(p.y,2))<.02&&(p.x=0,p.y=0);const _=Math.atan2(p.y,p.x);(E=r.emitter)==null||E.rotate(_+Math.PI),r.emitter.particlesPerWave=1,r.emitter.spawnPos.x=o.x-Math.cos(_+Math.PI/4)*16-Math.cos(_)*4,r.emitter.spawnPos.y=o.y-Math.sin(_+Math.PI/4)*16-Math.sin(_)*4,r.emitter.emitNow(),r.emitter.spawnPos.x=o.x-Math.cos(_-Math.PI/4)*16-Math.cos(_)*4,r.emitter.spawnPos.y=o.y-Math.sin(_-Math.PI/4)*16-Math.sin(_)*4,r.emitter.emitNow(),r.emitter.spawnChance=Math.max((f-s.HIGH_SPEED_THRESHOLD)/s.HIGH_SPEED_THRESHOLD,0)+Math.min(r.torque,0)*2,r.torque>.08&&!r.playingSound&&(qa.play("woosh",{volume:.03,speed:1+Math.random()*.2-.1,complete:()=>{n(T=>{T.playingSound=!1})}}),n(T=>{T.playingSound=!0})),n(T=>{T.position={x:o.x+p.x*i*Math.min(30,bb*f*(T.speedBoost||1)),y:o.y+p.y*i*Math.min(30,bb*f*(T.speedBoost||1))},T.velocity=p,T.lastVelocity=p,T.rotation=_,T.torque=Math.abs(T.rotation-(T.lastRotation||0)),T.lastRotation=_,T.acceleration=f})},updateBirds:i=>{const{player:r,setBirds:n,WEIGHTS:s}=t();n(o=>{var X;let l,h,c,f,m,p,v,_,E,T,b,S,w,P,I;const F={x:0,y:0},k=document.querySelector("canvas").getBoundingClientRect();F.x=k.width/2,F.y=k.height/2;for(let j=0;j<o.length;j++){l=o[j],h=l.position,c=l.lastVelocity,f={x:r.position.x-h.x,y:r.position.y-h.y},m=Math.sqrt(Math.pow(f.x,2)+Math.pow(f.y,2));const V=m<s.ATTRACTION_RADIUS;V||(f.x=0,f.y=0),r.acceleration>s.HIGH_SPEED_THRESHOLD&&(f.x*=-10,f.y*=-10),p={x:F.x-h.x,y:F.y-h.y},S={x:0,y:0},w={x:0,y:0},P={x:0,y:0};let K=0;for(let B=0;B<o.length;B++)j!==B&&(I=Math.sqrt(Math.pow(o[B].position.x-h.x,2)+Math.pow(o[B].position.y-h.y,2)),I<s.FORCE_RADIUS&&(S.x+=o[B].position.x,S.y+=o[B].position.y,w.x+=o[B].velocity.x,w.y+=o[B].velocity.y,P.x+=(o[B].position.x-h.x)/I,P.y+=(o[B].position.y-h.y)/I,K++));K>0&&(S.x=S.x/K-h.x,S.y=S.y/K-h.y,w.x/=K,w.y/=K,P.x*=-1,P.y*=-1),v={x:f.x*(V&&r.acceleration>s.HIGH_SPEED_THRESHOLD?10:1)*s.PLAYER_ATTRACTION+p.x*s.CENTER_OF_SCREEN_ATTRACTION+S.x*s.COHESION+w.x*s.ALIGNMENT+P.x*s.SEPARATION,y:f.y*(V&&r.acceleration>s.HIGH_SPEED_THRESHOLD?100:1)*s.PLAYER_ATTRACTION+p.y*s.CENTER_OF_SCREEN_ATTRACTION+S.y*s.COHESION+w.y*s.ALIGNMENT+P.y*s.SEPARATION},_=Math.sqrt(Math.pow(v.x,2)+Math.pow(v.y,2)),!(_<.01)&&(v.x/=_,v.y/=_,E={x:c.x*.989+v.x*.011,y:c.y*.989+v.y*.011},T=Math.sqrt(Math.pow(E.x,2)+Math.pow(E.y,2)),E.x/=T,E.y/=T,E.x*=.2,E.y*=.2,b=Math.atan2(E.y,E.x),l.position={x:h.x+E.x*i*((V&&r.acceleration>s.HIGH_SPEED_THRESHOLD?r.acceleration/19:25)+Math.random()-.5),y:h.y+E.y*i*((V&&r.acceleration>s.HIGH_SPEED_THRESHOLD?r.acceleration/19:25)+Math.random()-.5)},l.velocity=E,l.lastVelocity=E,l.rotation=b,l.torque=Math.abs(l.rotation-(l.lastRotation||0)),l.lastRotation=b,l.acceleration=_,(X=l.emitter)==null||X.rotate(b+Math.PI),l.emitter.particlesPerWave=1,l.emitter.spawnPos.x=h.x-Math.cos(b+Math.PI/4)*16-Math.cos(b)*4,l.emitter.spawnPos.y=h.y-Math.sin(b+Math.PI/4)*16-Math.sin(b)*4,l.emitter.emitNow(),l.emitter.spawnPos.x=h.x-Math.cos(b-Math.PI/4)*16-Math.cos(b)*4,l.emitter.spawnPos.y=h.y-Math.sin(b-Math.PI/4)*16-Math.sin(b)*4,l.emitter.emitNow(),l.emitter.spawnChance=Math.max((_-1e5)/1e5,0)+Math.min(l.torque*.1,.01))}})},viewport:null,setViewport:i=>e({viewport:i})}));function NB(){const e=Ar.useApp(),t=Mn(o=>o.birds),i=Mn(o=>o.setBirds),r=Mn(o=>o.updateBirds),[n,s]=ne.useState([]);return ne.useEffect(()=>{(async()=>{const o=An.get("female_jay_sheet.json"),l=Object.keys(o.data.frames).map(h=>tt.from(h));s(l)})()},[]),ne.useEffect(()=>{i(o=>{for(let l=0;l<25;l++){const h=Math.random();o.push({position:{x:Math.random()*e.screen.width,y:Math.random()*e.screen.height},velocity:{x:Math.random()*2-1,y:Math.random()*2-1},lastVelocity:{x:0,y:0},destination:{x:0,y:0},rotation:0,acceleration:0,torque:0,tint:`rgb(${255-h*100}, ${255-h*100}, ${255-h*100})`})}})},[e,i]),Ar.useTick(o=>{r(o)}),n.length===0?null:Ge.jsx(Ge.Fragment,{children:t.map((o,l)=>Ge.jsxs(ne.Fragment,{children:[Ge.jsx(xA,{config:BA,onCreate:h=>i(c=>{c[l].emitter=h})}),Ge.jsx(Ar.AnimatedSprite,{isPlaying:!0,animationSpeed:Math.min(.5,1-Math.pow(Math.min(o.acceleration/250,250),2)),textures:n,tint:o.tint,x:o.position.x,y:o.position.y,rotation:o.rotation,anchor:{x:.5,y:.5},scale:{x:1+Math.min((o.acceleration*.001||0)*.1,.1),y:1-Math.min((o.torque||0)*2,.5)}})]},l))})}function FB(){const e=Mn(h=>h.player),t=Mn(h=>h.setPlayer),i=Mn(h=>h.updatePlayer),r=Ar.useApp(),n=Mn(h=>h.viewport),[s,o]=ne.useState([]);ne.useEffect(()=>{(async()=>{const h=An.get("jay_sheet.json"),c=Object.keys(h.data.frames).map(f=>tt.from(f));o(c)})()},[]),ne.useEffect(()=>{n==null||n.follow(l.current,{})},[e.acceleration,n]),ne.useEffect(()=>{window.addEventListener("resize",()=>{r.renderer.resize(window.innerWidth,window.innerHeight),n==null||n.resize(window.innerWidth,window.innerHeight)})},[r,n]);const l=ne.useRef(null);return Ar.useTick(h=>{const c=document.querySelector("canvas"),f=r.renderer.plugins.interaction.pointer,m=c==null?void 0:c.getBoundingClientRect(),p=n==null?void 0:n.toLocal(new ct(f.x,f.y)),v=((p==null?void 0:p.x)||0)-((m==null?void 0:m.x)||0),_=((p==null?void 0:p.y)||0)-((m==null?void 0:m.y)||0);t(E=>{E.destination={x:v,y:_}}),i(h)}),s.length===0?null:Ge.jsxs(Ge.Fragment,{children:[Ge.jsx(Ar.Sprite,{image:"elevatelol_top_down_pixel_art_town_view_from_directly_above_2f835eab-997a-4488-87b5-e690850e337a-jF59VqmRb-transformed.png",x:0,y:0,filters:[new n_(32,32)],tint:15658734,scale:{x:1.5,y:1.5}}),Ge.jsx(xA,{config:BA,onCreate:h=>t(c=>{c.emitter=h})}),Ge.jsx(Ar.AnimatedSprite,{ref:l,isPlaying:!0,animationSpeed:Math.min(.25,1-Math.pow(Math.min(e.acceleration/500,500),2)),textures:s,x:e.position.x,y:e.position.y,rotation:e.rotation,anchor:{x:.5,y:.5},scale:{x:1+Math.min(e.acceleration*.1,.1),y:1-Math.min((e.torque||0)*2,.5)}}),Ge.jsx(NB,{})]})}class LB{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new St(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(t){if(this.viewport.pause||!this.viewport.worldVisible)return;if(t.data.pointerType==="mouse"?this.isMouseDown=!0:this.get(t.data.pointerId)||this.touches.push({id:t.data.pointerId,last:null}),this.count()===1){this.last=t.data.global.clone();const r=this.viewport.plugins.get("decelerate",!0),n=this.viewport.plugins.get("bounce",!0);(!r||!r.isActive())&&(!n||!n.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const i=this.viewport.plugins.move(t);if(this.clickedAvailable){const r=t.data.global.x-this.last.x,n=t.data.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(n))&&(this.clickedAvailable=!1)}i&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.worldVisible)return;t.data.pointerType==="mouse"&&(this.isMouseDown=!1),t.data.pointerType!=="mouse"&&this.remove(t.data.pointerId);const i=this.viewport.plugins.up(t);this.clickedAvailable&&this.count()===0&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),i&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){let i=new ct;return this.viewport.options.interaction?this.viewport.options.interaction.mapPositionToPoint(i,t.clientX,t.clientY):(i.x=t.clientX,i.y=t.clientY),i}handleWheel(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const i=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=i.x&&i.x<=this.viewport.right&&this.viewport.top<=i.y&&i.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(let i of this.touches)if(i.id===t)return i;return null}remove(t){for(let i=0;i<this.touches.length;i++)if(this.touches[i].id===t){this.touches.splice(i,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const Ul=["drag","pinch","wheel","follow","mouse-edges","decelerate","aniamte","bounce","snap-zoom","clamp-zoom","snap","clamp"];class BB{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,i,r=Ul.length){this.plugins[t]=i;const n=Ul.indexOf(t);n!==-1&&Ul.splice(n,1),Ul.splice(r,0,t),this.sort()}get(t,i){return i&&typeof this.plugins[t]<"u"&&this.plugins[t].paused?null:this.plugins[t]}update(t){for(let i of this.list)i.update(t)}resize(){for(let t of this.list)t.resize()}reset(){for(let t of this.list)t.reset()}remove(t){this.plugins[t]&&(this.plugins[t]=null,this.viewport.emit(t+"-remove"),this.sort())}pause(t){this.plugins[t]&&this.plugins[t].pause()}resume(t){this.plugins[t]&&this.plugins[t].resume()}sort(){this.list=[];for(let t of Ul)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let i=!1;for(let r of this.list)r.down(t)&&(i=!0);return i}move(t){let i=!1;for(let r of this.viewport.plugins.list)r.move(t)&&(i=!0);return i}up(t){let i=!1;for(let r of this.list)r.up(t)&&(i=!0);return i}wheel(t){let i=!1;for(let r of this.list)r.wheel(t)&&(i=!0);return i}}class hr{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(){return!1}move(){return!1}up(){return!1}wheel(){return!1}update(){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}const UB={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1};class zB extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},UB,i),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){parent.addEventListener("keydown",i=>{t.includes(i.code)&&(this.keyIsPressed=!0)}),parent.addEventListener("keyup",i=>{t.includes(i.code)&&(this.keyIsPressed=!1)})}mouseButtons(t){!t||t==="all"?this.mouse=[!0,!0,!0]:this.mouse=[t.indexOf("left")!==-1,t.indexOf("middle")!==-1,t.indexOf("right")!==-1]}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=t.indexOf("left")!==-1?-1:t.indexOf("right")!==-1?1:0,this.underflowY=t.indexOf("top")!==-1?-1:t.indexOf("bottom")!==-1?1:0)}checkButtons(t){const i=t.data.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!i||this.mouse[t.data.button]))}checkKeyPress(t){return!!(!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&t.data.pointerType==="touch")}down(t){if(!(this.paused||!this.options.pressDrag)){if(this.checkButtons(t)&&this.checkKeyPress(t))return this.last={x:t.data.global.x,y:t.data.global.y},this.current=t.data.pointerId,!0;this.last=null}}get active(){return this.moved}move(t){if(!(this.paused||!this.options.pressDrag)&&this.last&&this.current===t.data.pointerId){const i=t.data.global.x,r=t.data.global.y,n=this.parent.input.count();if(n===1||n>1&&!this.parent.plugins.get("pinch",!0)){const s=i-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const l={x:i,y:r};return this.xDirection&&(this.parent.x+=(l.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(l.y-this.last.y)*this.options.factor),this.last=l,this.moved||this.parent.emit("drag-start",{event:t,screen:new ct(this.last.x,this.last.y),world:this.parent.toWorld(new ct(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}}up(t){if(this.paused)return;const i=this.parent.input.touches;if(i.length===1){const r=i[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new ct(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}}wheel(t){if(!this.paused&&this.options.wheel&&!this.parent.plugins.get("wheel",!0))return this.xDirection&&(this.parent.x+=t.deltaX*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=t.deltaY*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),!0}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const HB={noDrag:!1,percent:1,center:null,factor:1};class GB extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},HB,i)}down(){if(this.parent.input.count()>=2)return this.active=!0,!0}move(t){if(this.paused||!this.active)return;const i=t.data.global.x,r=t.data.global.y,n=this.parent.input.touches;if(n.length>=2){const s=n[0],o=n[1],l=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===t.data.pointerId?s.last={x:i,y:r,data:t.data}:o.id===t.data.pointerId&&(o.last={x:i,y:r,data:t.data}),l){let h;const c={x:s.last.x+(o.last.x-s.last.x)/2,y:s.last.y+(o.last.y-s.last.y)/2};this.options.center||(h=this.parent.toLocal(c));let f=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));f=f===0?f=1e-10:f;const m=(1-l/f)*this.options.percent*this.parent.scale.x;this.parent.scale.x+=m,this.parent.scale.y+=m,this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const p=this.parent.plugins.get("clamp-zoom",!0);if(p&&p.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const v=this.parent.toGlobal(h);this.parent.x+=(c.x-v.x)*this.options.factor,this.parent.y+=(c.y-v.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}}up(){if(this.pinching&&this.parent.input.touches.length<=1)return this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0}}const WB={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class $B extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},WB,i),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="none"?this.noUnderflow=!0:t==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=t.indexOf("left")!==-1?-1:t.indexOf("right")!==-1?1:0,this.underflowY=t.indexOf("top")!==-1?-1:t.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t={x:this.parent.x,y:this.parent.y},i=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(this.parent.screenWorldWidth<this.parent.screenWidth){if(!this.noUnderflow)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,i.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,i.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(this.parent.screenWorldHeight<this.parent.screenHeight){if(!this.noUnderflow)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,i.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,i.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const jB={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class VB extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},jB,i),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&t<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&t>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&i<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&i>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else{let t=this.parent.scale.x;this.options.minScale!==null&&t<this.options.minScale&&(t=this.options.minScale),this.options.maxScale!==null&&t>this.options.maxScale&&(t=this.options.maxScale),t!==this.parent.scale.x&&(this.parent.scale.set(t),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const XB={friction:.95,bounce:.8,minSpeed:.01};class YB extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},XB,i),this.saved=[],this.reset(),this.parent.on("moved",r=>this.moved(r))}destroy(){this.parent}down(){this.saved=[],this.x=this.y=!1}isActive(){return this.x||this.y}move(){if(this.paused)return;const t=this.parent.input.count();(t===1||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30))}moved(t){if(this.saved.length){const i=this.saved[this.saved.length-1];t.type==="clamp-x"?i.x===t.original.x&&(i.x=this.parent.x):t.type==="clamp-y"&&i.y===t.original.y&&(i.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const t=performance.now();for(let i of this.saved)if(i.time>=t-100){const r=t-i.time;this.x=(this.parent.x-i.x)/r,this.y=(this.parent.y-i.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction;break}}}activate(t){t=t||{},typeof t.x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;let i;this.x&&(this.parent.x+=this.x*t,this.x*=this.percentChangeX,Math.abs(this.x)<this.options.minSpeed&&(this.x=0),i=!0),this.y&&(this.parent.y+=this.y*t,this.y*=this.percentChangeY,Math.abs(this.y)<this.options.minSpeed&&(this.y=0),i=!0),i&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}var qB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function QB(e,t,i){return i={path:t,exports:{},require:function(r,n){return KB(r,n??i.path)}},e(i,i.exports),i.exports}function KB(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Tb=QB(function(e,t){(function(){var i,r;r=function(n){return e.exports=n},i={linear:function(n,s,o,l){return o*n/l+s},easeInQuad:function(n,s,o,l){return o*(n/=l)*n+s},easeOutQuad:function(n,s,o,l){return-o*(n/=l)*(n-2)+s},easeInOutQuad:function(n,s,o,l){return(n/=l/2)<1?o/2*n*n+s:-o/2*(--n*(n-2)-1)+s},easeInCubic:function(n,s,o,l){return o*(n/=l)*n*n+s},easeOutCubic:function(n,s,o,l){return o*((n=n/l-1)*n*n+1)+s},easeInOutCubic:function(n,s,o,l){return(n/=l/2)<1?o/2*n*n*n+s:o/2*((n-=2)*n*n+2)+s},easeInQuart:function(n,s,o,l){return o*(n/=l)*n*n*n+s},easeOutQuart:function(n,s,o,l){return-o*((n=n/l-1)*n*n*n-1)+s},easeInOutQuart:function(n,s,o,l){return(n/=l/2)<1?o/2*n*n*n*n+s:-o/2*((n-=2)*n*n*n-2)+s},easeInQuint:function(n,s,o,l){return o*(n/=l)*n*n*n*n+s},easeOutQuint:function(n,s,o,l){return o*((n=n/l-1)*n*n*n*n+1)+s},easeInOutQuint:function(n,s,o,l){return(n/=l/2)<1?o/2*n*n*n*n*n+s:o/2*((n-=2)*n*n*n*n+2)+s},easeInSine:function(n,s,o,l){return-o*Math.cos(n/l*(Math.PI/2))+o+s},easeOutSine:function(n,s,o,l){return o*Math.sin(n/l*(Math.PI/2))+s},easeInOutSine:function(n,s,o,l){return-o/2*(Math.cos(Math.PI*n/l)-1)+s},easeInExpo:function(n,s,o,l){return n===0?s:o*Math.pow(2,10*(n/l-1))+s},easeOutExpo:function(n,s,o,l){return n===l?s+o:o*(-Math.pow(2,-10*n/l)+1)+s},easeInOutExpo:function(n,s,o,l){return(n/=l/2)<1?o/2*Math.pow(2,10*(n-1))+s:o/2*(-Math.pow(2,-10*--n)+2)+s},easeInCirc:function(n,s,o,l){return-o*(Math.sqrt(1-(n/=l)*n)-1)+s},easeOutCirc:function(n,s,o,l){return o*Math.sqrt(1-(n=n/l-1)*n)+s},easeInOutCirc:function(n,s,o,l){return(n/=l/2)<1?-o/2*(Math.sqrt(1-n*n)-1)+s:o/2*(Math.sqrt(1-(n-=2)*n)+1)+s},easeInElastic:function(n,s,o,l){var h,c,f;return f=1.70158,c=0,h=o,n===0||(n/=l),c||(c=l*.3),h<Math.abs(o)?(h=o,f=c/4):f=c/(2*Math.PI)*Math.asin(o/h),-(h*Math.pow(2,10*(n-=1))*Math.sin((n*l-f)*(2*Math.PI)/c))+s},easeOutElastic:function(n,s,o,l){var h,c,f;return f=1.70158,c=0,h=o,n===0||(n/=l),c||(c=l*.3),h<Math.abs(o)?(h=o,f=c/4):f=c/(2*Math.PI)*Math.asin(o/h),h*Math.pow(2,-10*n)*Math.sin((n*l-f)*(2*Math.PI)/c)+o+s},easeInOutElastic:function(n,s,o,l){var h,c,f;return f=1.70158,c=0,h=o,n===0||(n/=l/2),c||(c=l*(.3*1.5)),h<Math.abs(o)?(h=o,f=c/4):f=c/(2*Math.PI)*Math.asin(o/h),n<1?-.5*(h*Math.pow(2,10*(n-=1))*Math.sin((n*l-f)*(2*Math.PI)/c))+s:h*Math.pow(2,-10*(n-=1))*Math.sin((n*l-f)*(2*Math.PI)/c)*.5+o+s},easeInBack:function(n,s,o,l,h){return h===void 0&&(h=1.70158),o*(n/=l)*n*((h+1)*n-h)+s},easeOutBack:function(n,s,o,l,h){return h===void 0&&(h=1.70158),o*((n=n/l-1)*n*((h+1)*n+h)+1)+s},easeInOutBack:function(n,s,o,l,h){return h===void 0&&(h=1.70158),(n/=l/2)<1?o/2*(n*n*(((h*=1.525)+1)*n-h))+s:o/2*((n-=2)*n*(((h*=1.525)+1)*n+h)+2)+s},easeInBounce:function(n,s,o,l){var h;return h=i.easeOutBounce(l-n,0,o,l),o-h+s},easeOutBounce:function(n,s,o,l){return(n/=l)<1/2.75?o*(7.5625*n*n)+s:n<2/2.75?o*(7.5625*(n-=1.5/2.75)*n+.75)+s:n<2.5/2.75?o*(7.5625*(n-=2.25/2.75)*n+.9375)+s:o*(7.5625*(n-=2.625/2.75)*n+.984375)+s},easeInOutBounce:function(n,s,o,l){var h;return n<l/2?(h=i.easeInBounce(n*2,0,o,l),h*.5+s):(h=i.easeOutBounce(n*2-l,0,o,l),h*.5+o*.5+s)}},r(i)}).call(qB)});function Zf(e,t){if(e){if(typeof e=="function")return e;if(typeof e=="string")return Tb[e]}else return Tb[t]}const ZB={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class JB extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},ZB,i),this.ease=Zf(this.options.ease,"easeInOutSine"),this.options.sides&&(this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?this.right=this.left=!0:this.options.sides==="vertical"?this.top=this.bottom=!0:(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1)),this.parseUnderflow(),this.last={},this.reset()}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=t.indexOf("left")!==-1?-1:t.indexOf("right")!==-1?1:0,this.underflowY=t.indexOf("top")!==-1?-1:t.indexOf("bottom")!==-1?1:0)}isActive(){return this.toX!==null||this.toY!==null}down(){this.toX=this.toY=null}up(){this.bounce()}update(t){if(!this.paused){if(this.bounce(),this.toX){const i=this.toX;i.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),i.time>=this.options.time?(this.parent.x=i.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(i.time,i.start,i.delta,this.options.time)}if(this.toY){const i=this.toY;i.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),i.time>=this.options.time?(this.parent.y=i.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(i.time,i.start,i.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const i=typeof t.x>"u"?0:t.x,r=typeof t.y>"u"?0:t.y,n=typeof t.width>"u"?this.parent.worldWidth:t.width,s=typeof t.height>"u"?this.parent.worldHeight:t.height;return{left:this.parent.left<i,right:this.parent.right>n,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new ct(i*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new ct(n*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new ct(0,0),bottomRight:new ct(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let t,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===i.options.friction||i.y&&i.percentChangeY===i.options.friction)&&(t=this.oob(),(t.left&&this.left||t.right&&this.right)&&(i.percentChangeX=this.options.friction),(t.top&&this.top||t.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const r=this.parent.plugins.get("drag",!0)||{},n=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!r.active&&!n.active&&(!this.toX||!this.toY)&&(!i.x||!i.y)){t=t||this.oob();const s=t.topLeft,o=t.bottomRight;if(!this.toX&&!i.x){let l=null;t.left&&this.left?l=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-s.x:t.right&&this.right&&(l=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-o.x),l!==null&&this.parent.x!==l&&(this.toX={time:0,start:this.parent.x,delta:l-this.parent.x,end:l},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let l=null;t.top&&this.top?l=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-s.y:t.bottom&&this.bottom&&(l=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-o.y),l!==null&&this.parent.y!==l&&(this.toY={time:0,start:this.parent.y,delta:l-this.parent.y,end:l},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const t4={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class e4 extends hr{constructor(t,i,r,n={}){super(t),this.options=Object.assign({},t4,n),this.ease=Zf(n.ease,"easeInOutSine"),this.x=i,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){this.options.removeOnInterrupt&&this.parent.plugins.remove("snap")}down(){this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null)}up(){if(this.parent.input.count()===0){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}}update(t){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const i=this.snapping;i.time+=t;let r,n,s;if(i.time>this.options.time)r=!0,n=this.startX+this.deltaX,s=this.startY+this.deltaY;else{const o=this.ease(i.time,0,1,this.options.time);n=this.startX+this.deltaX*o,s=this.startY+this.deltaY*o}this.options.topLeft?this.parent.moveCorner(n,s):this.parent.moveCenter(n,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const i=this.options.topLeft?this.parent.corner:this.parent.center;(i.x!==this.x||i.y!==this.y)&&this.snapStart()}}}const i4={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupts:!1,forceStart:!1,noMove:!1};class r4 extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},i4,i),this.ease=Zf(this.options.ease),this.options.width>0&&(this.xScale=t.screenWidth/this.options.width),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height),this.xIndependent=!!this.xScale,this.yIndependent=!!this.yScale,this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):i.forceStart&&this.createSnapping()}createSnapping(){this.parent.scale;const t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,n=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:i,deltaX:r-t,deltaY:n-i},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom")}down(){this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null)}update(t){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let i;if(!this.options.center&&!this.options.noMove&&(i=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=t,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),l=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/l}const n=this.parent.plugins.get("clamp-zoom",!0);n&&n.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(i))}}resume(){this.snapping=null,super.resume()}}const n4={speed:0,acceleration:null,radius:null};class s4 extends hr{constructor(t,i,r={}){super(t),this.target=i,this.options=Object.assign({},n4,r),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const i=this.parent.center;let r=this.target.x,n=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-i.y,2)+Math.pow(this.target.x-i.x,2))>this.options.radius){const h=Math.atan2(this.target.y-i.y,this.target.x-i.x);r=this.target.x-Math.cos(h)*this.options.radius,n=this.target.y-Math.sin(h)*this.options.radius}else return;const s=r-i.x,o=n-i.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const l=Math.atan2(n-i.y,r-i.x),h=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(h){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);h>c?this.velocity={x:Math.min(this.velocity.x+this.options.acceleration*t,this.options.speed),y:Math.min(this.velocity.y+this.options.acceleration*t,this.options.speed)}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const f=Math.cos(l)*this.velocity.x,m=Math.sin(l)*this.velocity.y,p=Math.abs(f)>Math.abs(s)?r:i.x+f,v=Math.abs(m)>Math.abs(o)?n:i.y+m;this.parent.moveCenter(p,v),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const l=Math.atan2(n-i.y,r-i.x),h=Math.cos(l)*this.options.speed,c=Math.sin(l)*this.options.speed,f=Math.abs(h)>Math.abs(s)?r:i.x+h,m=Math.abs(c)>Math.abs(o)?n:i.y+c;this.parent.moveCenter(f,m),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,n),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const o4={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20};class a4 extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},o4,i)}down(){this.options.interrupt&&(this.smoothing=null)}update(){if(this.smoothing){const t=this.smoothingCenter,i=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(t)),this.parent.scale.x+=i.x,this.parent.scale.y+=i.y,this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const n=this.parent.plugins.get("clamp-zoom",!0);if(n&&n.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=t.x-s.x,this.parent.y+=t.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}wheel(t){if(this.paused)return;let i=this.parent.input.getPointerPosition(t);const n=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,s=Math.pow(2,(1+this.options.percent)*n);if(this.options.smooth){const o={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+o.x)*s-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+o.y)*s-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=i}else{let o;this.options.center||(o=this.parent.toLocal(i)),this.parent.scale.x*=s,this.parent.scale.y*=s,this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const l=this.parent.plugins.get("clamp-zoom",!0);if(l&&l.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const h=this.parent.toGlobal(o);this.parent.x+=i.x-h.x,this.parent.y+=i.y-h.y}}if(this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent}),!this.parent.options.passiveWheel)return!0}}const l4={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class u4 extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},l4,i),this.reverse=this.options.reverse?1:-1,this.radiusSquared=Math.pow(this.options.radius,2),this.resize()}resize(){const t=this.options.distance;t!==null?(this.left=t,this.top=t,this.right=this.parent.worldScreenWidth-t,this.bottom=this.parent.worldScreenHeight-t):this.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.worldScreenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.worldScreenHeight-this.options.bottom)}down(){this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null)}move(t){if(this.paused||t.data.pointerType!=="mouse"&&t.data.identifier!==1||!this.options.allowButtons&&t.data.buttons!==0)return;const i=t.data.global.x,r=t.data.global.y;if(this.radiusSquared){const n=this.parent.toScreen(this.parent.center);if(Math.pow(n.x-i,2)+Math.pow(n.y-r,2)>=this.radiusSquared){const o=Math.atan2(n.y-r,n.x-i);this.options.linear?(this.horizontal=Math.round(Math.cos(o))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(o))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(o)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(o)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&i<this.left?this.horizontal=1*this.reverse*this.options.speed*(60/1e3):this.right!==null&&i>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=1*this.reverse*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0)}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null)}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const h4={removeOnInterrupt:!1,ease:"linear",time:1e3};class c4 extends hr{constructor(t,i={}){super(t),this.options=Object.assign({},h4,i),this.options.ease=Zf(this.options.ease),this.setupPosition(),this.setupZoom()}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),typeof this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),typeof this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight),this.time=0}down(){this.options.removeOnInterrupt&&this.parent.plugins.remove("animate")}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),this.keepCenter||this.parent.moveCenter(this.options.position.x,this.options.position.y),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(!this.paused)if(this.time+=t,this.time>=this.options.time)this.complete();else{const i=new ct(this.parent.scale.x,this.parent.scale.y),r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null&&this.parent.fitWidth(this.startWidth+this.deltaWidth*r,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.startHeight+this.deltaHeight*r,this.keepCenter,this.width===null),this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const n=new ct(this.parent.x,this.parent.y);this.parent.moveCenter(this.startX+this.deltaX*r,this.startY+this.deltaY*r),this.parent.emit("moved",{viewport:this.parent,original:n,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:i,type:"animate"}),this.keepCenter}}}const d4={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1};let f4=class extends Ee{constructor(t={}){if(super(),this.options=Object.assign({},d4,t),t.ticker)this.options.ticker=t.ticker;else{let i;const r=kL;parseInt(/^(\d+)\./.exec(qE)[1])<5?i=r.ticker.shared:i=r.Ticker.shared,this.options.ticker=t.ticker||i}this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&(this.options.divWheel.oncontextmenu=i=>i.preventDefault()),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new LB(this),this.plugins=new BB(this)}destroy(t){this.options.noTicker||this.options.ticker.remove(this.tickerFunction),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new St(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=window.innerWidth,i=window.innerHeight,r,n){this.screenWidth=t,this.screenHeight=i,typeof r<"u"&&(this._worldWidth=r),typeof n<"u"&&(this._worldHeight=n),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new St(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,i){return arguments.length===2?this.toLocal(new ct(t,i)):this.toLocal(t)}toScreen(t,i){return arguments.length===2?this.toGlobal(new ct(t,i)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new ct(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(){let t,i;return isNaN(arguments[0])?(t=arguments[0].x,i=arguments[0].y):(t=arguments[0],i=arguments[1]),this.position.set((this.worldScreenWidth/2-t)*this.scale.x,(this.worldScreenHeight/2-i)*this.scale.y),this.plugins.reset(),this.dirty=!0,this}get corner(){return new ct(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(t,i){return arguments.length===1?this.position.set(-t.x*this.scale.x,-t.y*this.scale.y):this.position.set(-t*this.scale.x,-i*this.scale.y),this.plugins.reset(),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,i){const r=this.screenWidth/t,n=this.screenHeight/i;return Math.min(r,n)}findCover(t,i){const r=this.screenWidth/t,n=this.screenHeight/i;return Math.max(r,n)}fitWidth(t,i,r=!0,n){let s;i&&(s=this.center),this.scale.x=this.screenWidth/t,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!n&&o&&o.clamp(),i&&this.moveCenter(s),this}fitHeight(t,i,r=!0,n){let s;i&&(s=this.center),this.scale.y=this.screenHeight/t,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!n&&o&&o.clamp(),i&&this.moveCenter(s),this}fitWorld(t){let i;t&&(i=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),t&&this.moveCenter(i),this}fit(t,i=this.worldWidth,r=this.worldHeight){let n;t&&(n=this.center),this.scale.x=this.screenWidth/i,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),t&&this.moveCenter(n),this}set visible(t){t||this.input.clear(),super.visible=t}setZoom(t,i){let r;i&&(r=this.center),this.scale.set(t);const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),i&&this.moveCenter(r),this}zoomPercent(t,i){return this.setZoom(this.scale.x+this.scale.x*t,i)}zoom(t,i){return this.fitWidth(t+this.worldScreenWidth,i),this}set scaled(t){this.setZoom(t,!0)}get scaled(){return this.scale.x}snapZoom(t){return this.plugins.add("snap-zoom",new r4(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this._worldHeight,cornerPoint:new ct(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new St(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new zB(this,t)),this}clamp(t){return this.plugins.add("clamp",new $B(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new YB(this,t)),this}bounce(t){return this.plugins.add("bounce",new JB(this,t)),this}pinch(t){return this.plugins.add("pinch",new GB(this,t)),this}snap(t,i,r){return this.plugins.add("snap",new e4(this,t,i,r)),this}follow(t,i){return this.plugins.add("follow",new s4(this,t,i)),this}wheel(t){return this.plugins.add("wheel",new a4(this,t)),this}animate(t){return this.plugins.add("animate",new c4(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new VB(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new u4(this,t)),this}get pause(){return this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,i,r,n,s){s&&(r>this.worldScreenWidth||n>this.worldScreenHeight)&&(this.fit(!0,r,n),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;t<this.left?(this.left=t,o=!0):t+r>this.right&&(this.right=t+r,o=!0),i<this.top?(this.top=i,o=!0):i+n>this.bottom&&(this.bottom=i+n,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}};const p4=Ar.PixiComponent("Viewport",{create:e=>{const t=new f4({screenWidth:e.width,screenHeight:e.height,worldWidth:e.width*2,worldHeight:e.height*2,ticker:e.app.ticker,interaction:e.app.renderer.plugins.interaction});return t.clamp({top:0,left:0,right:3072,bottom:3072}),t.zoom(.5,!0),Mn.getState().setViewport(t),t}}),m4=e=>{const t=Ar.useApp();return Ge.jsx(p4,{app:t,...e})};qa.add("woosh","sounds/woosh.flac");qa.add("fan_loop","sounds/fan_loop.ogg");qa.play("fan_loop",{loop:!0,filters:[new LA,new FA]});document.addEventListener("visibilitychange",()=>{document.hidden||(qa.find("fan_loop").filters=[new LA,new FA])});const BA={lifetime:{min:.5,max:1},frequency:.1,particlesPerWave:1,maxParticles:250,pos:{x:0,y:0},addAtBack:!1,behaviors:[{type:"scale",config:{scale:{list:[{value:.1,time:0},{value:.09,time:1}]}}},{type:"alpha",config:{alpha:{list:[{value:.2,time:0},{value:0,time:1}]}}},{type:"moveSpeed",config:{speed:{list:[{value:50,time:0},{value:49,time:1}],isStepped:!1}}},{type:"spawnPoint",config:{}},{type:"animatedSingle",config:{anim:{framerate:16,loop:!1,textures:["wind/W401-1.png","wind/W401-2.png","wind/W401-3.png","wind/W401-4.png","wind/W401-5.png","wind/W401-6.png","wind/W401-7.png","wind/W401-8.png","wind/W401-9.png","wind/W401-10.png","wind/W401-11.png","wind/W401-12.png","wind/W401-13.png","wind/W401-14.png","wind/W401-15.png","wind/W401-16.png"]}}}]},g4=()=>(Mn(e=>e.WEIGHTS),Ge.jsx("div",{className:"w-[100vw] min-h-[100vh] flex items-center justify-center",style:{minHeight:"-webkit-fill-available"},children:Ge.jsx(Ar.Stage,{width:window.innerWidth,height:window.innerHeight,children:Ge.jsx(m4,{width:window.innerWidth,height:window.innerHeight,children:Ge.jsx(FB,{})})})})),O_=document.createElement("div");O_.id="root";document.body.appendChild(O_);const y4=VP(O_);Promise.all([An.load("jay_sheet.json"),An.load("female_jay_sheet.json")]).then(()=>y4.render(Ge.jsx(g4,{})))});export default v4();
